<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>Web API å¼€å‘å®Œæ•´æŒ‡å— | ğŸ’» VitePress æŠ€æœ¯æ–‡æ¡£ç«™ç‚¹</title>
    <meta name="description" content="ä¸“ä¸šçš„å‰ç«¯æŠ€æœ¯çŸ¥è¯†åº“ï¼Œæ¶µç›–å‰ç«¯ã€åç«¯ã€ç½‘ç»œå·¥ç¨‹ã€å¼€å‘å·¥å…·ç­‰æŠ€æœ¯é¢†åŸŸ">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/css/style-XU9BkwDV.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.dKFcbaXU.js"></script>
    <link rel="modulepreload" href="/assets/js/theme-B0ayjxgh.js">
    <link rel="modulepreload" href="/assets/js/framework-ohJJpums.js">
    <link rel="modulepreload" href="/assets/frontEnd_window_webAPI.md.DTUEY_ji.lean.js">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#646cff">
    <meta name="keywords" content="VitePress,å‰ç«¯,æŠ€æœ¯æ–‡æ¡£,JavaScript,Vue,React,Node.js">
    <meta property="og:title" content="VitePress æŠ€æœ¯æ–‡æ¡£ç«™ç‚¹">
    <meta property="og:description" content="ä¸“ä¸šçš„å‰ç«¯æŠ€æœ¯çŸ¥è¯†åº“">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css">
    <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-eca0d43b><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b264b505></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-b264b505> Skip to content </a><!--]--><!----><header class="VPNav" data-v-eca0d43b data-v-dccac5e7><div class="VPNavBar" data-v-dccac5e7 data-v-ae66b857><div class="wrapper" data-v-ae66b857><div class="container" data-v-ae66b857><div class="title" data-v-ae66b857><div class="VPNavBarTitle has-sidebar" data-v-ae66b857 data-v-2de94492><a class="title" href="/" data-v-2de94492><!--[--><!--]--><!--[--><img class="VPImage logo" src="/images/logo-mini.svg" alt data-v-2f81b8da><!--]--><span data-v-2de94492>ğŸš€ æŠ€æœ¯æ–‡æ¡£</span><!--[--><!--]--></a></div></div><div class="content" data-v-ae66b857><div class="content-body" data-v-ae66b857><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ae66b857><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ae66b857 data-v-23fb0062><span id="main-nav-aria-label" class="visually-hidden" data-v-23fb0062> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/home" tabindex="0" data-v-23fb0062 data-v-e56526c2><!--[--><span data-v-e56526c2>ğŸ  é¦–é¡µ</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-23fb0062 data-v-6da0b9ac><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6da0b9ac><span class="text" data-v-6da0b9ac><!----><span data-v-6da0b9ac>ğŸ¨ å‰ç«¯æŠ€æœ¯</span><span class="vpi-chevron-down text-icon" data-v-6da0b9ac></span></span></button><div class="menu" data-v-6da0b9ac><div class="VPMenu" data-v-6da0b9ac data-v-e9569e77><div class="items" data-v-e9569e77><!--[--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/frontEnd/css/dom" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ“ HTML & CSS</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/frontEnd/javascript/" data-v-ad54fa74><!--[--><span data-v-ad54fa74>âš¡ JavaScript</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link active" href="/frontEnd/window/properties" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ–¥ï¸ æµè§ˆå™¨ API</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/frontEnd/web/vue" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸš€ ç°ä»£æ¡†æ¶</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-23fb0062 data-v-6da0b9ac><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6da0b9ac><span class="text" data-v-6da0b9ac><!----><span data-v-6da0b9ac>âš™ï¸ åç«¯æŠ€æœ¯</span><span class="vpi-chevron-down text-icon" data-v-6da0b9ac></span></span></button><div class="menu" data-v-6da0b9ac><div class="VPMenu" data-v-6da0b9ac data-v-e9569e77><div class="items" data-v-e9569e77><!--[--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/afterEnd/node/" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸŸ¢ Node.js</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/afterEnd/express/express" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸš‚ Node æ¡†æ¶</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/afterEnd/database/mysql" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ—„ï¸ æ•°æ®åº“</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/afterEnd/server/nginx" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸŒ æœåŠ¡å™¨</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-23fb0062 data-v-6da0b9ac><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6da0b9ac><span class="text" data-v-6da0b9ac><!----><span data-v-6da0b9ac>ğŸŒ ç½‘ç»œå·¥ç¨‹</span><span class="vpi-chevron-down text-icon" data-v-6da0b9ac></span></span></button><div class="menu" data-v-6da0b9ac><div class="VPMenu" data-v-6da0b9ac data-v-e9569e77><div class="items" data-v-e9569e77><!--[--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/network/http/" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ“¡ HTTP åè®®</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/network/httpSecure/https" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ”’ ç½‘ç»œå®‰å…¨</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/network/ajaxAndFetch/ajax" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ“¨ ç½‘ç»œè¯·æ±‚</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-23fb0062 data-v-6da0b9ac><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6da0b9ac><span class="text" data-v-6da0b9ac><!----><span data-v-6da0b9ac>ğŸ› ï¸ å¼€å‘å·¥å…·</span><span class="vpi-chevron-down text-icon" data-v-6da0b9ac></span></span></button><div class="menu" data-v-6da0b9ac><div class="VPMenu" data-v-6da0b9ac data-v-e9569e77><div class="items" data-v-e9569e77><!--[--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/tools/buildTools/vite" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ“¦ æ„å»ºå·¥å…·</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/tools/package/lodash" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ“š å¸¸ç”¨åŒ…</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/tools/stardard/git" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ“‹ å¼€å‘è§„èŒƒ</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/tools/questions/handwrite" data-v-ad54fa74><!--[--><span data-v-ad54fa74>â“ é—®é¢˜é›†åˆ</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-23fb0062 data-v-6da0b9ac><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6da0b9ac><span class="text" data-v-6da0b9ac><!----><span data-v-6da0b9ac>ğŸ“± è·¨ç«¯å¼€å‘</span><span class="vpi-chevron-down text-icon" data-v-6da0b9ac></span></span></button><div class="menu" data-v-6da0b9ac><div class="VPMenu" data-v-6da0b9ac data-v-e9569e77><div class="items" data-v-e9569e77><!--[--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/spanEnd/Taro/" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ¯ Taro</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/spanEnd/uniapp/" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ¦„ uni-app</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e9569e77 data-v-ad54fa74><a class="VPLink link" href="/spanEnd/electron" data-v-ad54fa74><!--[--><span data-v-ad54fa74>ğŸ’» Electron</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/performace/performace" tabindex="0" data-v-23fb0062 data-v-e56526c2><!--[--><span data-v-e56526c2>âš¡ æ€§èƒ½ä¼˜åŒ–</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ae66b857 data-v-2ae0eef6><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-2ae0eef6 data-v-3abcf971 data-v-c8a3763b><span class="check" data-v-c8a3763b><span class="icon" data-v-c8a3763b><!--[--><span class="vpi-sun sun" data-v-3abcf971></span><span class="vpi-moon moon" data-v-3abcf971></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ae66b857 data-v-f5fba08d data-v-add3b542><!--[--><a class="VPSocialLink no-icon" href="https://github.com/jinxi1334640772" aria-label="github" target="_blank" rel="noopener" data-v-add3b542 data-v-fe9aeefc><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/1451011080204040" aria-label target="_blank" rel="noopener" data-v-add3b542 data-v-fe9aeefc><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>æ˜é‡‘</title><path d="M12 14.316l7.454-5.88-2.022-1.625L12 11.1l-.004.003-5.432-4.289-2.022 1.625L12 14.316z"/><path d="M12 0l12 9.5-2.518 2L12 4.5 2.518 11.5 0 9.5 12 0z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ae66b857 data-v-5a0b970e data-v-6da0b9ac><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6da0b9ac><span class="vpi-more-horizontal icon" data-v-6da0b9ac></span></button><div class="menu" data-v-6da0b9ac><div class="VPMenu" data-v-6da0b9ac data-v-e9569e77><!----><!--[--><!--[--><!----><div class="group" data-v-5a0b970e><div class="item appearance" data-v-5a0b970e><p class="label" data-v-5a0b970e>ä¸»é¢˜</p><div class="appearance-action" data-v-5a0b970e><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-5a0b970e data-v-3abcf971 data-v-c8a3763b><span class="check" data-v-c8a3763b><span class="icon" data-v-c8a3763b><!--[--><span class="vpi-sun sun" data-v-3abcf971></span><span class="vpi-moon moon" data-v-3abcf971></span><!--]--></span></span></button></div></div></div><div class="group" data-v-5a0b970e><div class="item social-links" data-v-5a0b970e><div class="VPSocialLinks social-links-list" data-v-5a0b970e data-v-add3b542><!--[--><a class="VPSocialLink no-icon" href="https://github.com/jinxi1334640772" aria-label="github" target="_blank" rel="noopener" data-v-add3b542 data-v-fe9aeefc><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/1451011080204040" aria-label target="_blank" rel="noopener" data-v-add3b542 data-v-fe9aeefc><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>æ˜é‡‘</title><path d="M12 14.316l7.454-5.88-2.022-1.625L12 11.1l-.004.003-5.432-4.289-2.022 1.625L12 14.316z"/><path d="M12 0l12 9.5-2.518 2L12 4.5 2.518 11.5 0 9.5 12 0z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ae66b857 data-v-44698d40><span class="container" data-v-44698d40><span class="top" data-v-44698d40></span><span class="middle" data-v-44698d40></span><span class="bottom" data-v-44698d40></span></span></button></div></div></div></div><div class="divider" data-v-ae66b857><div class="divider-line" data-v-ae66b857></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-eca0d43b data-v-09e10c16><div class="container" data-v-09e10c16><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-09e10c16><span class="vpi-align-left menu-icon" data-v-09e10c16></span><span class="menu-text" data-v-09e10c16>èœå•</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-09e10c16 data-v-c9fbce2f><button data-v-c9fbce2f>å›åˆ°é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-eca0d43b data-v-ae360e5d><div class="curtain" data-v-ae360e5d></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-ae360e5d><span class="visually-hidden" id="sidebar-aria-label" data-v-ae360e5d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-28bd6023><section class="VPSidebarItem level-0 collapsible" data-v-28bd6023 data-v-880be9e8><div class="item" role="button" tabindex="0" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><h2 class="text" data-v-880be9e8>ğŸ¨ CSS & HTML</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-880be9e8><span class="vpi-chevron-right caret-icon" data-v-880be9e8></span></div></div><div class="items" data-v-880be9e8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/html" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“‹ HTML åŸºç¡€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/dom" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“„ DOM æ“ä½œ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/selector" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ¯ CSS é€‰æ‹©å™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/layout" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“ CSS Layout å¸ƒå±€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/function" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ­ CSS å‡½æ•°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/animation" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ¬ CSS Animation åŠ¨ç”»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/transform" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”„ CSS Transform å˜æ¢</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/less" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“ Less é¢„å¤„ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/sass" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ¨ Sass é¢„å¤„ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/css/atRules" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“ At-Rules</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28bd6023><section class="VPSidebarItem level-0 collapsible" data-v-28bd6023 data-v-880be9e8><div class="item" role="button" tabindex="0" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><h2 class="text" data-v-880be9e8>âš¡ JavaScript æ ¸å¿ƒ</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-880be9e8><span class="vpi-chevron-right caret-icon" data-v-880be9e8></span></div></div><div class="items" data-v-880be9e8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ JavaScript åŸºç¡€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/object" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ¯ JavaScript å¯¹è±¡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/proxy" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”— Proxy ä»£ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/RegExp" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“ RegExp æ­£åˆ™è¡¨è¾¾å¼</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/setAndMap" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”¢ Set & Map é›†åˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/Error" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>âš ï¸ Error é”™è¯¯å¤„ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/Intl" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸŒ Intl å›½é™…åŒ–</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/json" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“Š JSON å¤„ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/ArrayBuffer" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ’¾ ArrayBuffer äºŒè¿›åˆ¶æ•°æ®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/javascript/Atomics" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”’ Atomics åŸå­æ“ä½œ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28bd6023><section class="VPSidebarItem level-0 collapsible has-active" data-v-28bd6023 data-v-880be9e8><div class="item" role="button" tabindex="0" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><h2 class="text" data-v-880be9e8>ğŸ–¥ï¸ æµè§ˆå™¨ API</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-880be9e8><span class="vpi-chevron-right caret-icon" data-v-880be9e8></span></div></div><div class="items" data-v-880be9e8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/properties" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸŒ Window çª—å£å±æ€§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/events" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸª Window äº‹ä»¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/function" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”§ Window å‡½æ•°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/observer" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ‘€ Observer è§‚å¯Ÿè€…</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/offsetWidth" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“ å…ƒç´ å°ºå¯¸</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/Canvas" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ¨ Canvas ç»˜å›¾</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/crypto" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ” Crypto åŠ å¯† API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/indexedDB" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ—„ï¸ IndexedDB æ•°æ®åº“</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/navigator" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ§­ Navigator æµè§ˆå™¨å±æ€§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/navigatorFun" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”§ Navigator æµè§ˆå™¨æ–¹æ³•</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/payment" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ’³ Payment æ”¯ä»˜ API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/Performance" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“Š Performance æ€§èƒ½ç›‘æ§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/speech" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ¤ Speech è¯­éŸ³ API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/stream" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸŒŠ Stream æµå¤„ç†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/Socket" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”— Socket é€šä¿¡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/serviceWorker" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ› ï¸ Service Worker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/webWorker" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ‘· Web Worker</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/webComponents" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ§© Web Components</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/webRTC" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ“¹ Web RTC</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/webAPI" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸŒ Web API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/window/route" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ§­ Window è·¯ç”±</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-28bd6023><section class="VPSidebarItem level-0 collapsible" data-v-28bd6023 data-v-880be9e8><div class="item" role="button" tabindex="0" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><h2 class="text" data-v-880be9e8>ğŸš€ ç°ä»£æ¡†æ¶</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-880be9e8><span class="vpi-chevron-right caret-icon" data-v-880be9e8></span></div></div><div class="items" data-v-880be9e8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/web/VitePress" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>âš¡ VitePress é™æ€ç«™ç‚¹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/web/TypeScript" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”· TypeScript è¯­è¨€</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/web/vue" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ’š Vue.js æ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/web/svelte" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ­ Svelte æ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/web/jQuery" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ’ jQuery åº“</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/web/nuxt" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸš€ Nuxt.js æ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/web/lessCode" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ”§ Amis ä½ä»£ç æ¡†æ¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-880be9e8 data-v-880be9e8><div class="item" data-v-880be9e8><div class="indicator" data-v-880be9e8></div><a class="VPLink link link" href="/frontEnd/web/qiankun" data-v-880be9e8><!--[--><p class="text" data-v-880be9e8>ğŸ—ï¸ qiankun å¾®å‰ç«¯æ¡†æ¶</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-eca0d43b data-v-5c5a77b3><div class="VPDoc has-sidebar has-aside" data-v-5c5a77b3 data-v-9c9ad9e7><!--[--><!--]--><div class="container" data-v-9c9ad9e7><div class="aside" data-v-9c9ad9e7><div class="aside-curtain" data-v-9c9ad9e7></div><div class="aside-container" data-v-9c9ad9e7><div class="aside-content" data-v-9c9ad9e7><div class="VPDocAside" data-v-9c9ad9e7 data-v-a73c794a><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-a73c794a data-v-c102e4a2><div class="content" data-v-c102e4a2><div class="outline-marker" data-v-c102e4a2></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c102e4a2>é¡µé¢å¯¼èˆª</div><ul class="VPDocOutlineItem root" data-v-c102e4a2 data-v-b6aaea5b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-a73c794a></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-9c9ad9e7><div class="content-container" data-v-9c9ad9e7><!--[--><!--]--><main class="main" data-v-9c9ad9e7><div style="position:relative;" class="vp-doc _frontEnd_window_webAPI external-link-icon-enabled" data-v-9c9ad9e7><div><h1>Web API å¼€å‘å®Œæ•´æŒ‡å—</h1><p>æœ¬æŒ‡å—æ¶µç›–äº†ç°ä»£ Web å¼€å‘ä¸­å¸¸ç”¨çš„å„ç§æµè§ˆå™¨ APIï¼Œå¸®åŠ©å¼€å‘è€…æ„å»ºåŠŸèƒ½ä¸°å¯Œçš„ Web åº”ç”¨ç¨‹åºã€‚æ¯ä¸ª API éƒ½åŒ…å«è¯¦ç»†çš„åŠŸèƒ½ä»‹ç»ã€ä½¿ç”¨æ–¹æ³•å’Œå®é™…ä»£ç ç¤ºä¾‹ã€‚</p><h2 id="-" tabindex="-1">ç›®å½• <a class="header-anchor" href="#-" aria-label="Permalink to &quot;ç›®å½•&quot;">â€‹</a></h2><ol><li><a href="#1-é€šä¿¡ä¸æ¶ˆæ¯ä¼ é€’-api">é€šä¿¡ä¸æ¶ˆæ¯ä¼ é€’ API</a></li><li><a href="#2-css-ç›¸å…³-api">CSS ç›¸å…³ API</a></li><li><a href="#3-æ•°æ®å‹ç¼©ä¸ç¼–ç -api">æ•°æ®å‹ç¼©ä¸ç¼–ç  API</a></li><li><a href="#4-ç”¨æˆ·äº¤äº’ä¸è¾“å…¥-api">ç”¨æˆ·äº¤äº’ä¸è¾“å…¥ API</a></li><li><a href="#5-ç¼–è¾‘ä¸æ–‡æœ¬å¤„ç†-api">ç¼–è¾‘ä¸æ–‡æœ¬å¤„ç† API</a></li><li><a href="#6-æ˜¾ç¤ºä¸ç”¨æˆ·ç•Œé¢-api">æ˜¾ç¤ºä¸ç”¨æˆ·ç•Œé¢ API</a></li><li><a href="#7-åª’ä½“ä¸å¤šåª’ä½“-api">åª’ä½“ä¸å¤šåª’ä½“ API</a></li><li><a href="#8-å®‰å…¨ä¸è®¤è¯-api">å®‰å…¨ä¸è®¤è¯ API</a></li><li><a href="#9-ç½‘ç»œä¸å­˜å‚¨-api">ç½‘ç»œä¸å­˜å‚¨ API</a></li><li><a href="#10-å›¾å½¢ä¸æ¸²æŸ“-api">å›¾å½¢ä¸æ¸²æŸ“ API</a></li><li><a href="#11-ç³»ç»Ÿä¸è®¾å¤‡-api">ç³»ç»Ÿä¸è®¾å¤‡ API</a></li><li><a href="#12-æ€»ç»“ä¸å‚è€ƒ">æ€»ç»“ä¸å‚è€ƒ</a></li></ol><hr><h2 id="1-api" tabindex="-1">1. é€šä¿¡ä¸æ¶ˆæ¯ä¼ é€’ API <a class="header-anchor" href="#1-api" aria-label="Permalink to &quot;1. é€šä¿¡ä¸æ¶ˆæ¯ä¼ é€’ API&quot;">â€‹</a></h2><h3 id="1-1-broadcast-channel-api" tabindex="-1">1.1 Broadcast Channel API <a class="header-anchor" href="#1-1-broadcast-channel-api" aria-label="Permalink to &quot;1.1 Broadcast Channel API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>Broadcast Channel API å…è®¸æµè§ˆä¸Šä¸‹æ–‡ï¼ˆå³ windowã€tabã€frame æˆ– iframeï¼‰ä¸åŒæºçš„ worker ä¹‹é—´è¿›è¡ŒåŸºæœ¬é€šä¿¡ã€‚å¯è·¨ä¸Šä¸‹æ–‡é€šä¿¡ã€‚å®ƒå¯ç”¨äºæ£€æµ‹åŒä¸€æ¥æºå†…å…¶ä»–æ ‡ç­¾é¡µä¸­çš„ç”¨æˆ·æ“ä½œï¼Œä¾‹å¦‚ç”¨æˆ·ç™»å½•æˆ–é€€å‡ºæ—¶ã€‚</p><h4>åŸºæœ¬ç”¨æ³•</h4><p>å‘é€åˆ°é€šé“çš„æ•°æ®ä½¿ç”¨ç»“æ„åŒ–å…‹éš†ç®—æ³•è¿›è¡Œåºåˆ—åŒ–ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å®‰å…¨åœ°å‘é€å„ç§å„æ ·çš„æ•°æ®å¯¹è±¡ï¼Œè€Œæ— éœ€è‡ªå·±å¯¹å…¶è¿›è¡Œåºåˆ—åŒ–ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿æ¥è‡³å¹¿æ’­é¢‘é“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BroadcastChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;channelName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å‘é€ç®€å•æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event, bc.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;channelName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ”¶åˆ°æ¶ˆæ¯:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, event.data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessageerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¶ˆæ¯é”™è¯¯:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ–­å¼€é¢‘é“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="1-2-channel-messaging-api" tabindex="-1">1.2 Channel Messaging API <a class="header-anchor" href="#1-2-channel-messaging-api" aria-label="Permalink to &quot;1.2 Channel Messaging API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>Channel Messaging API å…è®¸ä¸¤ä¸ªè¿è¡Œåœ¨åŒä¸€ä¸ªæ–‡æ¡£çš„ä¸åŒæµè§ˆä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ä¸¤ä¸ª iframeï¼Œæˆ–è€…æ–‡æ¡£ä¸»ä½“å’Œä¸€ä¸ª iframeï¼Œä½¿ç”¨ SharedWorker çš„ä¸¤ä¸ªæ–‡æ¡£ï¼Œæˆ–è€…ä¸¤ä¸ª workerï¼‰ä¸­çš„ç‹¬ç«‹è„šæœ¬ç›´æ¥è¿›è¡Œé€šè®¯ï¼Œåœ¨æ¯ç«¯ä½¿ç”¨ä¸€ä¸ªç«¯å£ï¼ˆportï¼‰é€šè¿‡åŒå‘é¢‘é“ï¼ˆchannelï¼‰æˆ–ç®¡é“ï¼ˆpipeï¼‰å‘å½¼æ­¤ä¼ é€’æ¶ˆæ¯ã€‚</p><h4>åŸºæœ¬ç”¨æ³•</h4><p>è°ƒç”¨ window.postMessage æ–¹æ³•å°†ç«¯å£ä¼ é€’åˆ°å¦ä¸€ä¸ªæµè§ˆå™¨ä¸Šä¸‹æ–‡ã€‚å½“è¿™äº›å¯ä¼ é€’çš„å¯¹è±¡è¢«ä¼ é€’åï¼Œå®ƒä»¬å°±ä»ä¹‹å‰æ‰€å±çš„ä¸Šä¸‹æ–‡ä¸­æ¶ˆå¤±äº†ã€‚æ¯”å¦‚ä¸€ä¸ªç«¯å£ï¼Œä¸€æ—¦è¢«å‘é€ï¼Œåœ¨åŸæœ¬çš„ä¸Šä¸‹æ–‡ä¸­å°±å†ä¹Ÿä¸å¯ç”¨äº†ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ›å»ºæ¶ˆæ¯é¢‘é“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> channel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> port1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> channel.port1;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ port1 ç›‘å¬ port2 çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»port2æ¥æ”¶åˆ°æ•°æ®ï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e.data);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // é€šè¿‡port1å‘port2å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½ï¼Œport2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ–­å¼€ç«¯å£è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å§‹å‘é€è¯¥ç«¯å£ä¸­çš„æ¶ˆæ¯é˜Ÿåˆ—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°†port2å‘é€ç»™iframe</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> iframe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;iframe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iframe.contentWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;init&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [channel.port2]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// iframeç«¯æ¥æ”¶ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iframe.contentWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;init&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> port2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.ports[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ¥æ”¶ä»port1å‘æ¥çš„æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä»port1æ¥æ”¶åˆ°æ¶ˆæ¯ï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e.data);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // é€šè¿‡port2å‘port1å‘é€æ¶ˆæ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¿™æ˜¯port2çš„å›å¤&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><hr><h2 id="2-css-api" tabindex="-1">2. CSS ç›¸å…³ API <a class="header-anchor" href="#2-css-api" aria-label="Permalink to &quot;2. CSS ç›¸å…³ API&quot;">â€‹</a></h2><h3 id="2-1-css-custom-highlight-api" tabindex="-1">2.1 CSS Custom Highlight API <a class="header-anchor" href="#2-1-css-custom-highlight-api" aria-label="Permalink to &quot;2.1 CSS Custom Highlight API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>CSS è‡ªå®šä¹‰é«˜äº® API æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ JavaScript åˆ›å»ºèŒƒå›´å¹¶ä½¿ç”¨ CSS å®šä¹‰æ ·å¼æ¥è®¾ç½®æ–‡æ¡£ä¸­ä»»æ„æ–‡æœ¬èŒƒå›´çš„æ ·å¼ã€‚</p><p>åœ¨ç½‘é¡µä¸Šè®¾ç½®æ–‡æœ¬èŒƒå›´æ ·å¼éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œæ–‡æœ¬ç¼–è¾‘ç±»çš„ Web åº”ç”¨ç¨‹åºä¼šçªå‡ºæ˜¾ç¤ºæ‹¼å†™æˆ–è¯­æ³•é”™è¯¯ï¼Œä»£ç ç¼–è¾‘å™¨ä¼šçªå‡ºæ˜¾ç¤ºè¯­æ³•é”™è¯¯ã€‚</p><p>CSS è‡ªå®šä¹‰é«˜äº® API é€šè¿‡æä¾›ä¸€ç§åˆ›å»ºä»»æ„ Range å¯¹è±¡å¹¶è®¾ç½®å…¶æ ·å¼çš„æ–¹æ³•ï¼ˆè€Œä¸æ˜¯å±€é™äºæµè§ˆå™¨å®šä¹‰çš„èŒƒå›´ï¼‰ï¼Œæ‰©å±•äº†å…¶ä»–é«˜äº®ä¼ªå…ƒç´ çš„æ¦‚å¿µï¼Œä¾‹å¦‚ ::selectionã€::spelling-errorã€::grammar-error å’Œ ::target-textã€‚</p><p>ä½¿ç”¨ CSS è‡ªå®šä¹‰é«˜äº® APIï¼Œä½ å¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼åˆ›å»ºæ–‡æœ¬èŒƒå›´å¹¶é«˜äº®æ˜¾ç¤ºå®ƒä»¬ï¼Œè€Œä¸ä¼šå½±å“é¡µé¢ä¸­çš„ DOM ç»“æ„ã€‚</p><p>ä½¿ç”¨ CSS è‡ªå®šä¹‰é«˜äº® API è®¾ç½®ç½‘é¡µä¸Šæ–‡æœ¬èŒƒå›´çš„æ ·å¼æœ‰å››ä¸ªæ­¥éª¤ï¼š</p><ul><li>åˆ›å»º Range å¯¹è±¡ã€‚</li><li>ä¸ºè¿™äº›èŒƒå›´åˆ›å»º Highlight å¯¹è±¡ã€‚</li><li>ä½¿ç”¨ HighlightRegistry è¿›è¡Œæ³¨å†Œã€‚</li><li>ä½¿ç”¨ ::highlight() ä¼ªå…ƒç´ å®šä¹‰é«˜äº®æ ·å¼ã€‚</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºRangeå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> parentNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">range1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parentNode, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">range1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parentNode, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">range2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parentNode, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">range2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parentNode, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸ºRangeå¯¹è±¡åˆ›å»ºé«˜äº®Highlightå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> highlight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Highlight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(range1, range2);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œé«˜äº®ã€‚CSS.highlightsï¼šç±» Map å¯¹è±¡ç”¨äºä½¿ç”¨è‡ªå®šä¹‰æ ‡è¯†ç¬¦æ³¨å†Œé«˜äº®æ˜¾ç¤ºã€‚</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CSS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.highlights.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-1-highlight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, user1Highlight);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®šä¹‰æ³¨å†Œçš„é«˜äº®æ ·å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">highlight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">highlight) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  background</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: yellow;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: black;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä»æ³¨å†Œè¡¨ä¸­åˆ é™¤ä¸€ä¸ªé«˜äº®æ˜¾ç¤ºã€‚</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CSS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.highlights.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-1-highlight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¸…é™¤æ³¨å†Œè¡¨ã€‚</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CSS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.highlights.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="2-2-css-font-loading-api" tabindex="-1">2.2 CSS Font Loading API <a class="header-anchor" href="#2-2-css-font-loading-api" aria-label="Permalink to &quot;2.2 CSS Font Loading API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>CSS å­—ä½“åŠ è½½ API ä¸ºä½ æä¾›äº†åŠ¨æ€åŠ è½½å­—ä½“èµ„æºçš„äº‹ä»¶å’Œæ¥å£ã€‚</p><h4>åŸºæœ¬ç”¨æ³•</h4><p>åœ¨ CSS ä¸­ä½ å¯ä»¥ä½¿ç”¨ @font-face è§„åˆ™ä¸‹è½½å­—ä½“ï¼Œå¹¶ä½¿ç”¨ font-family å±æ€§å°†å­—ä½“åº”ç”¨äºå…ƒç´ ã€‚ä½†æ˜¯ï¼Œä¸‹è½½å­—ä½“æµç¨‹ç”±å®¢æˆ·ç«¯æ§åˆ¶ï¼Œå¤§å¤šæ•°å®¢æˆ·ç«¯ä»…ä¼šåœ¨é¦–æ¬¡éœ€è¦è¯¥å­—ä½“æ—¶æ‰è·å–ã€åŠ è½½è¯¥å­—ä½“ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ˜æ˜¾çš„å»¶è¿Ÿã€‚</p><p>CSS å­—ä½“åŠ è½½ API æä¾›äº†æ§åˆ¶å’Œè·Ÿè¸ªå­—ä½“åŠ è½½è¿‡ç¨‹çš„èƒ½åŠ›ï¼Œå¹¶å…è®¸ä½ å°†å…¶æ·»åŠ åˆ° Document æˆ– Worker çš„å­—ä½“é›†ä¸­ã€‚å°†å­—ä½“æ·»åŠ åˆ° Document æˆ– Worker çš„å­—ä½“é›†ä¸­ä¼šè®©å®¢æˆ·ç«¯åœ¨éœ€è¦æ—¶è‡ªåŠ¨è·å–ã€åŠ è½½å­—ä½“ã€‚å­—ä½“å¯ä»¥åœ¨å…¶è¢«åŠ å…¥å­—ä½“é›†ä¹‹å‰æˆ–ä¹‹åè¢«åŠ è½½ï¼Œä½†æ˜¯ä½ å¿…é¡»å…ˆå°†å­—ä½“æ·»åŠ åˆ°å­—ä½“é›†ï¼Œå†å°†å…¶ç”¨äºç»˜å›¾ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®šä¹‰å­—ä½“</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®šä¹‰å­—ä½“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> font</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FontFace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;myfont&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;url(myfont.woff)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  style: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;italic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  weight: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;400&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  stretch: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;condensed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŠŠå­—ä½“æ·»åŠ åˆ° document.fontsï¼ˆFontFaceSetï¼‰ä¸­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(font);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ è½½å­—ä½“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">font.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆ–è€…fontsSetåŠ è½½å­—ä½“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;36px FontFamily Oxygen&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  fonts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fonts);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loading&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.fontfaces);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loadingerror&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.fontfaces);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loadingdone&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  event.fontfaces.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">font</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(font.family);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.fonts.ready.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fontFace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">values</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> property</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fontFace) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fontFace[property]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="2-3-css-properties-and-values-api" tabindex="-1">2.3 CSS Properties and Values API <a class="header-anchor" href="#2-3-css-properties-and-values-api" aria-label="Permalink to &quot;2.3 CSS Properties and Values API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>å…è®¸å¼€å‘è€…æ˜¾å¼åœ°å®šä¹‰å®ƒä»¬çš„ CSS è‡ªå®šä¹‰å±æ€§ï¼Œå…è®¸è®¾ç½®å±æ€§ç±»å‹æ£€æŸ¥ã€é»˜è®¤å€¼ä»¥åŠæ˜¯å¦å¯ç»§æ‰¿å…¶å€¼ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä»¥ä¸‹ä»£ç åœ¨ JavaScript ä¸­ä½¿ç”¨ CSS.registerProperty è¾“å…¥ä¸€ä¸ª CSS è‡ªå®šä¹‰å±æ€§ï¼Œ--my-colorï¼Œå°†å…¶ä½œä¸ºä¸€ä¸ªé¢œè‰²ï¼Œç„¶åä¸ºå…¶è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¹¶ä¸”ä¸å…è®¸ç»§æ‰¿å®ƒçš„å€¼ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CSS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--my-color&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  syntax: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;color&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inherits: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  initialValue: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#c0ffee&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯ä»¥åœ¨ CSS ä¸­ä½¿ç”¨ @property at-rule è¿›è¡Œç›¸åŒçš„æ³¨å†Œï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@property </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">color {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  syntax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;color&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  inherits</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  initial</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: #c0ffee;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="2-4-css-typed-object-model-api" tabindex="-1">2.4 CSS Typed Object Model API <a class="header-anchor" href="#2-4-css-typed-object-model-api" aria-label="Permalink to &quot;2.4 CSS Typed Object Model API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>CSS å€¼å…¬å¼€ä¸ºç±»å‹åŒ–çš„ JavaScript å¯¹è±¡ï¼Œä»¥å…è®¸å…¶æ‰§è¡Œæ“ä½œã€‚é€šè¿‡æä¾›å¯¹è±¡åŠŸèƒ½ï¼ˆè€Œä¸æ˜¯ CSSOM å­—ç¬¦ä¸²æ“ä½œï¼‰ã€æä¾›å¯¹ CSS å€¼çš„ç±»å‹ã€æ–¹æ³•å’Œå¯¹è±¡æ¨¡å‹çš„è®¿é—®ï¼Œä½¿ CSS æ“ä½œæ›´å…·é€»è¾‘æ€§å’Œæ€§èƒ½ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:root {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  --</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mainColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hsl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">198</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 43</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 42</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  --</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">black</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hsl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  --</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">white</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hsl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 97</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  --</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: 1.2rem;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get the element</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Retrieve all computed styles with computedStyleMap()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> defaultComputedStyles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">computedStyleMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultComputedStyles) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultComputedStyles.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prop).value </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultComputedStyles.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prop).unit </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//px percent undefined</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> unit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultComputedStyles.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;--unit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(unit); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSUnparsedValue {0: &quot; 1.2rem&quot;, length: 1}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(unit[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot; 1.2rem&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> parsedUnit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CSSNumericValue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(unit);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parsedUnit); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSUnitValue {value: 1.2, unit: &quot;rem&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parsedUnit.unit); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;rem&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(parsedUnit.value); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1.2</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> btnWidth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allComputedStyles.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;width&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btnWidth); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSMathSum</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btnWidth.values); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSNumericArray {0: CSSUnitValue, 1: CSSUnitValue, length: 2}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(btnWidth.operator); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;sum&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> transform</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allComputedStyles.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;transform&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transform); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSTransformValue {0: CSSScale, 1: CSSTranslate, length: 2, is2D: true}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transform.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transform[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSScale {x: CSSUnitValue, y: CSSUnitValue, z: CSSUnitValue, is2D: true}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transform[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].x); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSUnitValue {value: 0.95, unit: &quot;number&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transform[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].y); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSUnitValue {value: 0.95, unit: &quot;number&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transform[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].z); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSUnitValue {value: 1, unit: &quot;number&quot;}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(transform.is2D); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bgImage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allComputedStyles.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;background-image&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bgImage); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CSSImageValue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bgImage.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// url(&quot;magic-wand.png&quot;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="2-5-css-object-model-cssom-" tabindex="-1">2.5 CSS Object Model (CSSOM) <a class="header-anchor" href="#2-5-css-object-model-cssom-" aria-label="Permalink to &quot;2.5 CSS Object Model (CSSOM)&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>CSS å¯¹è±¡æ¨¡å‹æ˜¯ä¸€ç»„å…è®¸ç”¨ JavaScript æ“çºµ CSS çš„ APIã€‚å®ƒå¾ˆåƒ DOMï¼Œä½†é’ˆå¯¹çš„æ˜¯ CSS è€Œä¸æ˜¯ HTMLã€‚å®ƒå…è®¸ç”¨æˆ·åŠ¨æ€åœ°è¯»å–å’Œä¿®æ”¹ CSS æ ·å¼ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>CSS çš„å€¼æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ String å¯¹è±¡æ¥è¡¨ç¤ºã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stylesheet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.styleSheets[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stylesheet.cssRules[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].style.backgroundColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;blue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;d&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).style.color </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;orange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;background-color:darkblue;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="3-api" tabindex="-1">3. æ•°æ®å‹ç¼©ä¸ç¼–ç  API <a class="header-anchor" href="#3-api" aria-label="Permalink to &quot;3. æ•°æ®å‹ç¼©ä¸ç¼–ç  API&quot;">â€‹</a></h2><h3 id="3-1-compression-stream-api" tabindex="-1">3.1 Compression Stream API <a class="header-anchor" href="#3-1-compression-stream-api" aria-label="Permalink to &quot;3.1 Compression Stream API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>Compression Stream API æä¾›äº†ä¸€ç§ JavaScript APIï¼Œä½¿ç”¨ gzip æˆ–è€…é»˜è®¤æ ¼å¼å‹ç¼©å’Œè§£å‹ç¼©æ•°æ®æµã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>å†…ç½®çš„å‹ç¼©åº“æ„å‘³ç€ JavaScript åº”ç”¨ä¸å†éœ€è¦åŒ…å«å…¶å®ƒå‹ç¼©åº“ï¼Œè¿™ä½¿å¾—åº”ç”¨ç¨‹åºçš„ä¸‹è½½å¤§å°æ›´å°ã€‚</p><h4>API å±æ€§</h4><p><strong>CompressionStream å±æ€§ï¼š</strong></p><ul><li><code>readable</code> è¿”å›ç”±æ­¤å¯¹è±¡æ§åˆ¶çš„ ReadableStream å®ä¾‹</li><li><code>writable</code> è¿”å›ç”±æ­¤å¯¹è±¡æ§åˆ¶çš„ WritableStream å®ä¾‹</li></ul><p><strong>DecompressionStream å±æ€§ï¼š</strong></p><ul><li><code>readable</code> è¿”å›ç”±æ­¤å¯¹è±¡æ§åˆ¶çš„ ReadableStream å®ä¾‹</li><li><code>writable</code> è¿”å›ç”±æ­¤å¯¹è±¡æ§åˆ¶çš„ WritableStream å®ä¾‹</li></ul><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ gzip å¯¹æµè¿›è¡Œå‹ç¼©ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> compressedReadableStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inputReadableStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipeThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CompressionStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gzip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å‡½æ•°ä½¿ç”¨ gzip è§£å‹ç¼© blobã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DecompressBlob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> decompressedStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blob</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipeThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DecompressionStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gzip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(decompressedStream).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="3-2-encoding-textencoderstream-api" tabindex="-1">3.2 Encoding &amp; TextEncoderStream API <a class="header-anchor" href="#3-2-encoding-textencoderstream-api" aria-label="Permalink to &quot;3.2 Encoding &amp; TextEncoderStream API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>TextEncoder æä¾›äº†ä¸€ç§æœºåˆ¶æ¥å¤„ç†å„ç§å­—ç¬¦ç¼–ç æ–‡æœ¬ï¼ŒåŒ…æ‹¬ä¼ ç»Ÿçš„é UTF-8 ç¼–ç ã€‚</p><h4>API æ¥å£</h4><ul><li><strong>TextEncoderStream</strong>: å°†ä¸€ä¸ªå­—ç¬¦ä¸²æµè½¬æ¢ä¸º UTF-8 ç¼–ç çš„å­—èŠ‚ï¼Œå®ƒä¸ TextEncoder çš„æµå½¢å¼ç­‰ä»·</li><li><strong>TextDecoderStream</strong>: å°†äºŒè¿›åˆ¶ç¼–ç ï¼ˆå¦‚ UTF-8 ç­‰ï¼‰çš„æ–‡æœ¬æµè½¬æ¢ä¸ºå­—ç¬¦ä¸²æµï¼Œå®ƒä¸ TextDecoder çš„æµå½¢å¼ç­‰ä»·</li></ul><p>API æä¾›äº†å››ä¸ªæ¥å£ï¼šTextDecoderã€TextEncoderã€TextDecoderStream å’Œ TextEncoderStreamã€‚</p><h4>API å±æ€§</h4><p><strong>TextEncoderStream å±æ€§ï¼š</strong></p><ul><li><code>encoding</code> æ€»æ˜¯è¿”å›&quot;utf-8&quot;</li><li><code>readable</code> è¿”å›æ­¤å¯¹è±¡æ§åˆ¶çš„ ReadableStream å®ä¾‹</li><li><code>writable</code> è¿”å›æ­¤å¯¹è±¡æ§åˆ¶çš„ WritableStream å®ä¾‹</li></ul><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**TextDecoder å’Œ TextDecoderStream</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@urfLabel</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé»˜è®¤æ˜¯ &quot;utf-8&quot;ã€‚å¯ä»¥æ˜¯ä»»æ„æœ‰æ•ˆçš„ç¼–ç ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@options</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåœ¨è§£ç æ— æ•ˆæ•°æ®æ—¶,æ˜¯å¦å¿…é¡»æŠ›å‡º TypeErrorã€‚é»˜è®¤æ˜¯ false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *  fatal</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(utfLabel);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(utfLabel, options);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> u8arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">240</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">160</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">174</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">183</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(utf8decoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u8arr));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿›è¡Œç¼–ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> encoder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextEncoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> array</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> encoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;â‚¬&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uint8Array(3) [226, 130, 172]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿›è¡Œè§£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> decoder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> decoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(array); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// String &quot;â‚¬&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åˆ›å»ºäº†ä¸€ä¸ª TextEncoderStream å°†å­—ç¬¦ä¸²æµè½¬æ¢ä¸º UTF-8 ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> textStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipeThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextEncoderStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/dest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  headers: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/plain; charset=UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ä»ä¸€ä¸ª fetch() ä¸­è·å–å¹¶è§£ç äºŒè¿›åˆ¶æ•°æ®è½¬ä¸ºå­—ç¬¦ä¸²æµ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipeThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoderStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="4-api" tabindex="-1">4. ç”¨æˆ·äº¤äº’ä¸è¾“å…¥ API <a class="header-anchor" href="#4-api" aria-label="Permalink to &quot;4. ç”¨æˆ·äº¤äº’ä¸è¾“å…¥ API&quot;">â€‹</a></h2><h3 id="4-1-eyedropper-api" tabindex="-1">4.1 EyeDropper API <a class="header-anchor" href="#4-1-eyedropper-api" aria-label="Permalink to &quot;4.1 EyeDropper API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>EyeDropper æ¥å£è¡¨ç¤ºä¸€ä¸ªæ‹¾è‰²å™¨å·¥å…·çš„å®ä¾‹ï¼Œç”¨æˆ·å¯ä»¥æ‰“å¼€å¹¶ä½¿ç”¨å®ƒä»å±å¹•ä¸Šé€‰æ‹©é¢œè‰²ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// HTML ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;button id=&quot;start-button&quot;&gt;æ‰“å¼€æ‹¾è‰²å™¨&lt;/button&gt; &lt;span id=&quot;result&quot;&gt;&lt;/span&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;start-button&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> resultElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.EyeDropper) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    resultElement.textContent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ EyeDropper API&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eyeDropper</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EyeDropper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> abortController</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  eyeDropper</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ signal: abortController.signal })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      resultElement.textContent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.sRGBHex;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      resultElement.style.backgroundColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.sRGBHex;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      resultElement.textContent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸­æ­¢æ‹¾è‰²å™¨æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      abortController.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="4-2-contact-picker-api" tabindex="-1">4.2 Contact Picker API <a class="header-anchor" href="#4-2-contact-picker-api" aria-label="Permalink to &quot;4.2 Contact Picker API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>Contact Picker API å…è®¸ç”¨æˆ·ä»ä»–ä»¬çš„è”ç³»äººåˆ—è¡¨ä¸­é€‰æ‹©æ¡ç›®ï¼Œå¹¶ä¸ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºå…±äº«æ‰€é€‰æ¡ç›®çš„æœ‰é™è¯¦ç»†ä¿¡æ¯ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¼‚æ­¥å‡½æ•°ä½¿ç”¨è¯¥æ–¹æ³•æ£€æŸ¥æ”¯æŒçš„å±æ€§ã€‚getProperties()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> supportedProperties</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.contacts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (supportedProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // run code for name support</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (supportedProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // run code for email support</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (supportedProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // run code for telephone number support</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (supportedProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;address&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // run code for address support</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (supportedProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // run code for avatar support</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¾ç½®è¦ä¸ºæ¯ä¸ªè”ç³»äººæ£€ç´¢çš„å±æ€§æ•°ç»„ï¼Œå¹¶è®¾ç½®ä¸€ä¸ª options å¯¹è±¡ä»¥å…è®¸é€‰æ‹©å¤šä¸ªè”ç³»äººã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;address&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> opts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { multiple: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getContacts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //è¯¥æ–¹æ³•å‘ç”¨æˆ·æ˜¾ç¤ºè”ç³»äººé€‰å–å™¨ç•Œé¢å¹¶å¤„ç†æ‰€é€‰ç»“æœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> contacts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.contacts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">select</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props, opts);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    handleResults</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(contacts);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ex) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Handle any errors here.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="4-3-content-index-api" tabindex="-1">4.3 Content Index API <a class="header-anchor" href="#4-3-content-index-api" aria-label="Permalink to &quot;4.3 Content Index API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>Content Index API æ˜¯ Service Worker çš„æ‰©å±•ï¼Œå®ƒå…è®¸å¼€å‘äººå‘˜åœ¨å½“å‰ Service Worker çš„èŒƒå›´å†…æ·»åŠ å·²ç¼“å­˜é¡µé¢çš„ URL å’Œå…ƒæ•°æ®ã€‚ç„¶åï¼Œæµè§ˆå™¨å¯ä»¥ä½¿ç”¨è¿™äº›æ¡ç›®å‘ç”¨æˆ·æ˜¾ç¤ºç¦»çº¿é˜…è¯»ã€‚ä½œä¸ºå¼€å‘äººå‘˜ï¼Œæ‚¨è¿˜å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­æ˜¾ç¤ºè¿™äº›æ¡ç›®ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>ç´¢å¼•æ¡ç›®ä¸ä¼šè‡ªåŠ¨è¿‡æœŸã€‚æœ€å¥½æä¾›ä¸€ä¸ªç”¨äºæ¸…é™¤æ¡ç›®çš„ç•Œé¢ï¼Œæˆ–å®šæœŸåˆ é™¤è¾ƒæ—§çš„æ¡ç›®ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¦æ·»åŠ ç´¢å¼•çš„å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;post-1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/posts/amet.html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Amet consectetur adipisicing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  description:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;Repellat et quia iste possimus ducimus aliquid a aut eaque nostrum.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  icons: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      src: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/media/dark.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sizes: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;128x128&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;article&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// our asynchronous function to add indexed content</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registerContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> registration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.serviceWorker.ready;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ç‰¹æ€§æ£€æµ‹ï¼š Content Index</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registration.index) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ³¨å†Œ content</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> registration.index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed to register content: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// our content</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;post-1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/posts/amet.html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Amet consectetur adipisicing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  description:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;Repellat et quia iste possimus ducimus aliquid a aut eaque nostrum.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  icons: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      src: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/media/dark.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sizes: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;128x128&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  category: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;article&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// our asynchronous function to add indexed content</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registerContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> registration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.serviceWorker.ready;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // feature detect Content Index</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registration.index) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // register content</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> registration.index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed to register content: &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è·å–æ‰€æœ‰ç´¢å¼•æ¡ç›®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> entries</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> registration.index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entries) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(entry.title, entry.url);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //å–æ¶ˆæ³¨å†Œçš„ç´¢å¼•å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> registration.index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(article.id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// service workerä¸­è®¿é—®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">self.registration.index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">self.registration.index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(item.id);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> contentIndexItems</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> self.registration.index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// contentdelete äº‹ä»¶ä»…åœ¨ç”±äºä¸æµè§ˆå™¨çš„å†…ç½®ç”¨æˆ·ç•Œé¢äº¤äº’è€Œå‘ç”Ÿåˆ é™¤æ—¶è§¦å‘ã€‚è°ƒç”¨ ContentIndex.deleteï¼ˆï¼‰ æ–¹æ³•æ—¶ï¼Œä¸ä¼šè§¦å‘è¯¥å‡½æ•°ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">self.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;contentdelete&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.id);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // logs content index id, which can then be used to determine what content to delete from your cache</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br></div></div><h3 id="4-4-api" tabindex="-1">4.4 æŒ‡é’ˆé”å®š API <a class="header-anchor" href="#4-4-api" aria-label="Permalink to &quot;4.4 æŒ‡é’ˆé”å®š API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>é€šè¿‡å®ƒå¯ä»¥è®¿é—®åŸå§‹çš„é¼ æ ‡è¿åŠ¨ï¼ŒæŠŠé¼ æ ‡äº‹ä»¶çš„ç›®æ ‡é”å®šåˆ°ä¸€ä¸ªå•ç‹¬çš„å…ƒç´ ï¼Œè¿™å°±æ¶ˆé™¤äº†é¼ æ ‡åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–¹å‘ä¸Šåˆ°åº•å¯ä»¥ç§»åŠ¨å¤šè¿œè¿™æ–¹é¢çš„é™åˆ¶ï¼Œå¹¶ä»è§†å›¾ä¸­åˆ å»å…‰æ ‡ã€‚</p><blockquote><p>æŒ‡é’ˆé”å®šè®©ä½ å³ä½¿å…‰æ ‡è¶…å‡ºæµè§ˆå™¨æˆ–å±å¹•çš„è¾¹ç•Œä¹Ÿèƒ½è®¿é—®é¼ æ ‡äº‹ä»¶ã€‚</p></blockquote><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>æŒ‡é’ˆé”å®šå’ŒæŒ‡é’ˆæ•è·æœ‰å…³ã€‚æŒ‡é’ˆæ•è·åœ¨é¼ æ ‡è¢«æ‹–æ›³æ—¶å¯ä»¥å‘ä¸€ä¸ªç›®æ ‡å…ƒç´ æŒç»­ä¼ é€’æœ‰å…³äº‹ä»¶ï¼Œä½†æ˜¯å½“é¼ æ ‡æŒ‰é’®è¢«æ”¾å¼€æ—¶å°±ä¼šåœæ­¢ã€‚æŒ‡é’ˆé”å®šå’ŒæŒ‡é’ˆæ•è·åœ¨ä»¥ä¸‹æ–¹é¢æœ‰æ‰€ä¸åŒï¼š</p><ul><li>å®ƒæ˜¯æŒä¹…æ€§çš„ã€‚æŒ‡é’ˆé”å®šä¸é‡Šæ”¾é¼ æ ‡ï¼Œç›´åˆ°ä½œå‡ºä¸€ä¸ªæ˜¾å¼çš„ API è°ƒç”¨æˆ–æ˜¯ç”¨æˆ·ä½¿ç”¨ä¸€ä¸ªä¸“é—¨çš„é‡Šæ”¾æ‰‹åŠ¿</li><li>å®ƒä¸å±€é™äºæµè§ˆå™¨æˆ–è€…å±å¹•è¾¹ç•Œ</li><li>å®ƒæŒç»­å‘é€äº‹ä»¶ï¼Œè€Œä¸ç®¡é¼ æ ‡æŒ‰é’®çŠ¶æ€å¦‚ä½•</li><li>å®ƒéšè—å…‰æ ‡</li></ul><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> requestPointerLockWithUnadjustedMovement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å…ƒç´ è®¾ç½®æŒ‡é’ˆé”å®šï¼Œä¸å¯ç”¨é¼ æ ‡åŠ é€Ÿ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myTargetElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestPointerLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    unadjustedMovement: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">promise) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸æ”¯æŒç¦ç”¨é¼ æ ‡åŠ é€Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> promise</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æŒ‡é’ˆè¢«é”å®š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;NotSupportedError&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æœ‰äº›å¹³å°å¯èƒ½ä¸æ”¯æŒæœªè°ƒæ•´çš„ç§»åŠ¨ã€‚ä½ å¯ä»¥é‡æ–°è¯·æ±‚å¸¸è§„æŒ‡é’ˆé”å®šã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> myTargetElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestPointerLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å½“æŒ‡é’ˆé”å®šçŠ¶æ€æ”¹å˜æ—¶ï¼Œåœ¨ document ä¸Šè§¦å‘ã€‚ä¸åŒ…å«ä»»ä½•é¢å¤–æ•°æ®çš„ç®€å•äº‹ä»¶ã€‚è¿˜æœ‰pointerlockerroräº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pointerlockchange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, lockChangeAlert, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lockChangeAlert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆ¤æ–­å½“å‰æŒ‡é’ˆé”å®šçš„å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (document.pointerLockElement </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æŒ‡é’ˆé”å®šçŠ¶æ€ç°å·²é”å®š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é€€å‡ºé”å®š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exitPointerLock</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æŒ‡é’ˆé”å®šçŠ¶æ€ç°å·²è§£é”&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="5-api" tabindex="-1">5. ç¼–è¾‘ä¸æ–‡æœ¬å¤„ç† API <a class="header-anchor" href="#5-api" aria-label="Permalink to &quot;5. ç¼–è¾‘ä¸æ–‡æœ¬å¤„ç† API&quot;">â€‹</a></h2><h3 id="5-1-editcontext-api" tabindex="-1">5.1 EditContext API <a class="header-anchor" href="#5-1-editcontext-api" aria-label="Permalink to &quot;5.1 EditContext API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>EditContext API å¯ç”¨äºåœ¨ Web ä¸Šæ„å»ºæ”¯æŒé«˜çº§æ–‡æœ¬è¾“å…¥ä½“éªŒçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¾‹å¦‚è¾“å…¥æ³•ç¼–è¾‘å™¨ ï¼ˆIMEï¼‰ æ’ç‰ˆã€è¡¨æƒ…ç¬¦å·é€‰å–å™¨æˆ–ä»»ä½•å…¶ä»–ç‰¹å®šäºå¹³å°çš„ç¼–è¾‘ç›¸å…³ UI å›¾é¢ã€‚</p><h4>åŸºæœ¬ç”¨æ³•</h4><p>è‹¥è¦ä½¿å…ƒç´ åœ¨ Web ä¸Šå¯ç¼–è¾‘ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨ <code>&lt;input&gt;</code> å…ƒç´ ã€<code>&lt;textarea&gt;</code> å…ƒç´ æˆ– <code>contenteditable</code> å±æ€§ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ EditContext APIï¼Œæ‚¨å¯ä»¥åœ¨ä¸ä½¿ç”¨å±æ€§çš„æƒ…å†µä¸‹ä½¿å…¶ä»–ç±»å‹çš„å…ƒç´ å¯ç¼–è¾‘ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;html-editor&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> spellcheck</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¦å˜æˆå¯ç¼–è¾‘çš„å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> editorEl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;html-editor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ›å»ºEditContextå¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> editContext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EditContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  text: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;html&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &lt;body id=foo&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &lt;h1 id=&#39;header&#39;&gt;Cool Title&lt;/h1&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &lt;p class=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">wow</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&gt;hello&lt;br/&gt;How are you? test&lt;/p&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &lt;/body&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;/html&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å†…å®¹æ”¹å˜æ—¶è§¦å‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">editContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;textupdate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ›´æ–°å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">editContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// èµ‹å€¼ç»™å…ƒç´ çš„editContextå±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">editorEl.editContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> editContext;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ›´æ–°æ§åˆ¶è¾¹ç•Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> editorBounds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> editorEl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBoundingClientRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Update the control bounds of the EditContext instance.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">editContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateControlBounds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(editorBounds);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//EditContext.updateSelectionï¼ˆï¼‰ å’Œ EditContext.updateSelectionBoundsï¼ˆï¼‰ æ–¹æ³•æ›´æ–° EditContext é€‰æ‹©çŠ¶æ€å’Œé€‰æ‹©è¾¹ç•Œã€‚EditContext.updateCharacterBoundsï¼ˆï¼‰ æ–¹æ³•æ›´æ–°å­—ç¬¦è¾¹ç•Œã€‚</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><ul><li><code>readable</code> è¿”å›æ­¤å¯¹è±¡æ§åˆ¶çš„ ReadableStream å®ä¾‹ã€‚</li><li><code>writable</code> è¿”å›æ­¤å¯¹è±¡æ§åˆ¶çš„ WritableStream å®ä¾‹ã€‚</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**TextDecoder å’Œ TextDecoderStream</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@urfLabel</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé»˜è®¤æ˜¯ &quot;utf-8&quot;ã€‚å¯ä»¥æ˜¯ä»»æ„æœ‰æ•ˆçš„ç¼–ç ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@options</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåœ¨è§£ç æ— æ•ˆæ•°æ®æ—¶,æ˜¯å¦å¿…é¡»æŠ›å‡º TypeErrorã€‚é»˜è®¤æ˜¯ false</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *  fatal</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(utfLabel);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(utfLabel, options);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> u8arr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">240</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">160</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">174</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">183</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(utf8decoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u8arr));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿›è¡Œç¼–ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> encoder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextEncoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> array</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> encoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;â‚¬&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uint8Array(3) [226, 130, 172]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿›è¡Œè§£ç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> decoder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> decoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(array); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// String &quot;â‚¬&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åˆ›å»ºäº†ä¸€ä¸ª TextEncoderStream å°†å­—ç¬¦ä¸²æµè½¬æ¢ä¸º UTF-8 ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> textStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipeThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextEncoderStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/dest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  headers: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/plain; charset=UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//ä»ä¸€ä¸ª fetch() ä¸­è·å–å¹¶è§£ç äºŒè¿›åˆ¶æ•°æ®è½¬ä¸ºå­—ç¬¦ä¸²æµ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipeThrough</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TextDecoderStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="6-api" tabindex="-1">6. æ˜¾ç¤ºä¸ç”¨æˆ·ç•Œé¢ API <a class="header-anchor" href="#6-api" aria-label="Permalink to &quot;6. æ˜¾ç¤ºä¸ç”¨æˆ·ç•Œé¢ API&quot;">â€‹</a></h2><h3 id="6-1-api" tabindex="-1">6.1 å…¨å± API <a class="header-anchor" href="#6-1-api" aria-label="Permalink to &quot;6.1 å…¨å± API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>å…¨å± APIï¼ˆFullscreen APIï¼‰é€šè¿‡æ·»åŠ æ–¹æ³•ä½¿ç‰¹å®šçš„ Elementï¼ˆåŠå…¶åä»£ï¼‰ä»¥å…¨å±æ¨¡å¼å‘ˆç°ï¼Œå¹¶åœ¨ä¸å†éœ€è¦æ—¶é€€å‡ºå…¨å±æ¨¡å¼ã€‚è¿™ä½¿å¾—ä½¿ç”¨ç”¨æˆ·çš„æ•´ä¸ªå±å¹•ï¼ˆåœ¨é€€å‡ºå…¨å±æ¨¡å¼ä¹‹å‰å»é™¤æ‰€æœ‰æµè§ˆå™¨ç”¨æˆ·ç•Œé¢å…ƒç´ å’Œå…¶ä»–åº”ç”¨ç¨‹åºï¼‰æ¥å±•ç¤ºæ‰€éœ€å†…å®¹ï¼ˆä¾‹å¦‚åœ¨çº¿æ¸¸æˆï¼‰æˆä¸ºå¯èƒ½ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>å…¨å± API å‘ Document å’Œ Element æ¥å£æ·»åŠ äº†æ–¹æ³•ï¼Œä»¥å…è®¸æ‰“å¼€å’Œå…³é—­å…¨å±æ¨¡å¼ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> toggleFullScreen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //æ˜¯å¦å­˜åœ¨å·²ç»å…¨å±çš„å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.fullscreenElement) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä½¿å…ƒç´ å…¨å±æ˜¾ç¤º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.documentElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestFullscreen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (document.exitFullscreen) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é€€å‡ºå…¨å±</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exitFullscreen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ˜¯å¦æ”¯æŒå…¨å±</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.fullscreenEnable;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘æ§å…¨å±æ”¹å˜äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fullscreenchange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸èƒ½åˆ‡æ¢å…¨å±æ¨¡å¼æ—¶è§¦å‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fullscreenerror&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="6-2-html-api" tabindex="-1">6.2 HTML æ‹–æ”¾ API <a class="header-anchor" href="#6-2-html-api" aria-label="Permalink to &quot;6.2 HTML æ‹–æ”¾ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>HTML æ‹–æ”¾ï¼ˆDrag and Dropï¼‰æ¥å£ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨æ‹–æ”¾åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä½¿ç”¨é¼ æ ‡é€‰æ‹©å¯æ‹–æ‹½ï¼ˆdraggableï¼‰å…ƒç´ ï¼Œå°†å…ƒç´ æ‹–æ‹½åˆ°å¯æ”¾ç½®ï¼ˆdroppableï¼‰å…ƒç´ ï¼Œå¹¶é‡Šæ”¾é¼ æ ‡æŒ‰é’®ä»¥æ”¾ç½®è¿™äº›å…ƒç´ ã€‚æ‹–æ‹½æ“ä½œæœŸé—´ï¼Œä¼šæœ‰ä¸€ä¸ªå¯æ‹–æ‹½å…ƒç´ çš„åŠé€æ˜å¿«ç…§è·Ÿéšç€é¼ æ ‡æŒ‡é’ˆã€‚</p><h4>ç›¸å…³äº‹ä»¶</h4><p><strong>è¢«æ‹–æ”¾å…ƒç´ çš„äº‹ä»¶ï¼š</strong></p><ul><li><code>drag</code></li><li><code>dragstart</code></li><li><code>dragend</code></li></ul><p><strong>æ”¾ç½®å…ƒç´ çš„äº‹ä»¶ï¼š</strong></p><ul><li><code>dragenter</code></li><li><code>dragover</code></li><li><code>dragleave</code></li><li><code>drop</code></li></ul><h4>DataTransfer å±æ€§å’Œæ–¹æ³•</h4><ul><li><code>effectAllowed</code> æä¾›æ‰€æœ‰å¯ç”¨çš„æ“ä½œç±»å‹ã€‚å¿…é¡»æ˜¯ none, copy, copyLink, copyMove, link, linkMove, move, all or uninitialized ä¹‹ä¸€</li><li><code>dropEffect</code> è·å–å½“å‰é€‰å®šçš„æ‹–æ”¾æ“ä½œç±»å‹æˆ–è€…è®¾ç½®çš„ä¸ºä¸€ä¸ªæ–°çš„ç±»å‹ã€‚å€¼å¿…é¡»ä¸º none, copy, link æˆ– move</li><li><code>files</code> åŒ…å«æ•°æ®ä¼ è¾“ä¸­å¯ç”¨çš„æ‰€æœ‰æœ¬åœ°æ–‡ä»¶çš„åˆ—è¡¨</li><li><code>items</code> åŒ…å«æ‰€æœ‰æ‹–åŠ¨æ•°æ®åˆ—è¡¨çš„ DataTransferItemList å¯¹è±¡ <ul><li><code>kind</code> æ‹–æ‹½é¡¹çš„ç§ç±»ï¼Œstring æˆ–æ˜¯ file</li><li><code>type</code> æ‹–æ‹½é¡¹çš„ç±»å‹ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ª MIME ç±»å‹</li><li><code>getAsFile()</code> æ‹–æ‹½é¡¹çš„ File å¯¹è±¡ï¼ˆå½“æ‹–æ‹½é¡¹ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶æ—¶è¿”å› nullï¼‰</li><li><code>getAsString()</code> ä½¿ç”¨æ‹–æ‹½é¡¹çš„å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°æ‰§è¡ŒæŒ‡å®šå›è°ƒå‡½æ•°</li></ul></li><li><code>types</code> ä¸€ä¸ªæä¾› dragstart äº‹ä»¶ä¸­è®¾ç½®çš„æ ¼å¼çš„ strings æ•°ç»„</li><li><code>getData()</code></li><li><code>setData()</code></li><li><code>clearData()</code></li><li><code>setDragImage</code></li><li><code>addElement()</code></li></ul><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;p1&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> draggable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  This element is draggable.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;target&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ondrop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;drop_handler(event)&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ondragover</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dragover_handler(event)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Drop Zone</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOMContentLoaded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> element</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;p1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  element.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dragstart&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // è·å–æ”¯æŒçš„ç±»å‹ï¼Œä¾‹å¦‚ï¼štext/plain</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    event.dataTransfer.types;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ·»åŠ æ‹–æ‹½æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ev.dataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/plain&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ev.target.innerText);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ev.dataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ev.target.outerHTML);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å‚¨å­˜idåœ¨application/my-app</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ev.dataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/my-app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ev.target.id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ev.dataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;text/uri-list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ev.target.ownerDocument.location.href</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;example.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ev.dataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDragImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //æ‹–æ”¾æ“ä½œä¸­ç”¨æˆ·ç»™äºˆçš„åé¦ˆ copy,move,link,none,copyMove,copyLink,linkMove,all</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ev.dataTransfer.effectAllowed </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;copy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ”¾ç½®åŒºå…ƒç´ äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dragover_handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //æ¯ä¸ªå¤„ç†ç¨‹åºè°ƒç”¨ preventDefault() æ¥é˜»æ­¢å¯¹è¿™ä¸ªäº‹ä»¶çš„å…¶ä»–å¤„ç†è¿‡ç¨‹ï¼ˆå¦‚è§¦ç‚¹äº‹ä»¶æˆ–æŒ‡é’ˆäº‹ä»¶ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ev.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // none,copy,move,link</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ev.dataTransfer.dropEffect </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;move&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> drop_handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ev.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ ¹æ®å‰é¢å‚¨å­˜çš„idè·å–æ•°æ®ï¼Œæ”¾ç½®åˆ°æ”¾ç½®åŒº</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ev.dataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/my-app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ev.target.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆ é™¤æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  event.dataTransfer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/uri-list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h3 id="6-3-api" tabindex="-1">6.3 ç©ºé—²æ£€æµ‹ API <a class="header-anchor" href="#6-3-api" aria-label="Permalink to &quot;6.3 ç©ºé—²æ£€æµ‹ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>ç©ºé—²æ£€æµ‹ API æä¾›äº†ä¸€ç§æ–¹æ³•æ¥æ£€æµ‹ç”¨æˆ·çš„ç©ºé—²çŠ¶æ€ã€æ´»åŠ¨ã€ç©ºé—²å’Œé”å®šï¼Œå…·ä½“æ¥è¯´ï¼Œæ— éœ€ä»è„šæœ¬è½®è¯¢å³å¯æ”¶åˆ°ç©ºé—²çŠ¶æ€æ›´æ”¹çš„é€šçŸ¥ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> signal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> controller.signal;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">startButton.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ˜¯å¦æˆäºˆæºè®¿é—®å…¶ Idle çŠ¶æ€çš„æƒé™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ((</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IdleDetector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;granted&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Idle detection permission denied.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> idleDetector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IdleDetector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // userState å’Œ screenStateå€¼å‘ç”Ÿæ›´æ”¹æ—¶è°ƒç”¨ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    idleDetector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;change&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ç”¨æˆ·æ˜¯å¦ä¸å±å¹•æˆ–è®¾å¤‡è¿›è¡Œäº†äº¤äº’active,idle</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> userState</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idleDetector.userState;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //æŒ‡ç¤ºå±å¹•æ˜¯å¦è¢«é”å®šlocked,unlocked</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> screenState</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idleDetector.screenState;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Idle change: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">userState</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}, ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">screenState</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}.`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å¼€å§‹ä¾¦å¬ ç”¨æˆ· IDLE çŠ¶æ€çš„æ›´æ”¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idleDetector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      threshold: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60_000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      signal,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;IdleDetector is active.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Deal with initialization errors like permission denied,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // running outside of top-level frame, etc.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err.name, err.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stopButton.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;IdleDetector is stopped.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="6-4-api" tabindex="-1">6.4 å¼¹å‡ºæ¡† API <a class="header-anchor" href="#6-4-api" aria-label="Permalink to &quot;6.4 å¼¹å‡ºæ¡† API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>Popover API ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§æ ‡å‡†ã€ä¸€è‡´ã€çµæ´»çš„æœºåˆ¶ï¼Œç”¨äºåœ¨å…¶ä»–é¡µé¢å†…å®¹ä¹‹ä¸Šæ˜¾ç¤ºå¼¹å‡ºæ¡†å†…å®¹ã€‚Popover å†…å®¹å¯ä»¥ä½¿ç”¨ HTML å±æ€§ä»¥å£°æ˜æ–¹å¼æ§åˆ¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ JavaScript è¿›è¡Œæ§åˆ¶ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><p>HTML æ§åˆ¶ï¼š</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> popovertarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mypopover&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> popovertargetaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;show&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  show popoverã€‚é»˜è®¤æ˜¯toggleï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> popovertarget</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mypopover&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> popovertargetaction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hide&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  hide popove</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mypopover&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> popover</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Popover content&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>JavaScript æ§åˆ¶ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> popover </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mypopover&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">popover.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hidePopover</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">popover.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showPopover</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">popover.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">togglePopover</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">popover.popover </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;auto&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mannul&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">popover.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;beforetoggle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;showing å’Œ hidden ä¹‹é—´å˜åŒ–ä¹‹å‰è§¦å‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">popover.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;toggle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;showing å’Œ hidden ä¹‹é—´å˜åŒ–ä¹‹åè§¦å‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="7-api" tabindex="-1">7. åª’ä½“ä¸å¤šåª’ä½“ API <a class="header-anchor" href="#7-api" aria-label="Permalink to &quot;7. åª’ä½“ä¸å¤šåª’ä½“ API&quot;">â€‹</a></h2><h3 id="7-1-mediastream-api" tabindex="-1">7.1 MediaStream å›¾åƒæ•è· API <a class="header-anchor" href="#7-1-mediastream-api" aria-label="Permalink to &quot;7.1 MediaStream å›¾åƒæ•è· API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>MediaStream Image Capture API æ˜¯ç”¨äºä»æ‘„å½±è®¾å¤‡æ•è·å›¾åƒæˆ–è§†é¢‘çš„ APIã€‚é™¤äº†æ•è·æ•°æ®ä¹‹å¤–ï¼Œå®ƒè¿˜å…è®¸æ‚¨æ£€ç´¢æœ‰å…³è®¾å¤‡åŠŸèƒ½çš„ä¿¡æ¯ï¼Œä¾‹å¦‚å›¾åƒå¤§å°ã€çº¢çœ¼æ¶ˆé™¤ã€æ˜¯å¦æœ‰é—ªå…‰ç¯ä»¥åŠå®ƒä»¬å½“å‰è®¾ç½®çš„å†…å®¹ã€‚ç›¸åï¼ŒAPI å…è®¸åœ¨è®¾å¤‡å…è®¸çš„çº¦æŸèŒƒå›´å†…é…ç½®åŠŸèƒ½ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šè¿‡è°ƒç”¨ MediaDevices.getUserMediaï¼ˆï¼‰ è·å–å¯¹è®¾å¤‡çš„å¼•ç”¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navigator.mediaDevices.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUserMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ video: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mediaStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // éš”ç¦»åª’ä½“æµçš„è§†è§‰éƒ¨åˆ†ï¼Œè·å–ç¬¬ä¸€é¡¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> track</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mediaStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVideoTracks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //ç”¨äºä»é€šè¿‡æœ‰æ•ˆçš„ MediaStreamTrack å¼•ç”¨çš„æ‘„å½±è®¾å¤‡æ•è·å›¾åƒã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageCapture </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ImageCapture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(track);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //è·å–å®æ—¶è§†é¢‘çš„å¿«ç…§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  imageCapture</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">grabFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">imageBitmap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#grabFrameCanvas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      drawCanvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas, imageBitmap);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //ä½¿ç”¨è§†é¢‘æ•è·è¿›è¡Œå•æ¬¡æ›å…‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  imageCapture</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">takePhoto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">blob</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createImageBitmap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(blob))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">imageBitmap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#takePhotoCanvas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      drawCanvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(canvas, imageBitmap);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> zoom </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#zoom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //æ•è·æ˜ åƒä¹‹è·å–è®¾å¤‡åŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> capabilities</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> track.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCapabilities</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Check whether zoom is supported or not.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">capabilities.zoom) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // é…ç½®è®¾å¤‡åŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  track.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">applyConstraints</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ advanced: [{ zoom: zoom.value }] });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="7-2-api" tabindex="-1">7.2 åª’ä½“åŠŸèƒ½ API <a class="header-anchor" href="#7-2-api" aria-label="Permalink to &quot;7.2 åª’ä½“åŠŸèƒ½ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>åª’ä½“åŠŸèƒ½ API å…è®¸å¼€å‘äººå‘˜ç¡®å®šè®¾å¤‡çš„è§£ç å’Œç¼–ç èƒ½åŠ›ï¼Œå…¬å¼€åª’ä½“æ˜¯å¦å—æ”¯æŒã€æ’­æ”¾æ˜¯å¦åº”æµç•…ä¸”èŠ‚èƒ½ç­‰ä¿¡æ¯ï¼Œå¹¶æä¾›æœ‰å…³æ’­æ”¾çš„å®æ—¶åé¦ˆï¼Œä»¥æ›´å¥½åœ°å¯ç”¨è‡ªé€‚åº”æµå¼å¤„ç†ï¼Œå¹¶è®¿é—®æ˜¾ç¤ºå±æ€§ä¿¡æ¯ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>åª’ä½“åŠŸèƒ½ API æä¾›äº†æ¯” <code>MediaRecorder.isTypeSupported()</code> æˆ– <code>HTMLMediaElement.canPlayType()</code> æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œåè€…ä»…è§£å†³ä¸€èˆ¬æµè§ˆå™¨æ”¯æŒé—®é¢˜ï¼Œè€Œä¸è§£å†³æ€§èƒ½é—®é¢˜ã€‚è¯¥ API è¿˜æä¾›äº†è®¿é—®æ˜¾ç¤ºå±æ€§ä¿¡æ¯çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ”¯æŒçš„è‰²åŸŸã€åŠ¨æ€èŒƒå›´åŠŸèƒ½ä»¥åŠæœ‰å…³æ’­æ”¾çš„å®æ—¶åé¦ˆã€‚</p><p>è¦æµ‹è¯•å¯¹è§†é¢‘æˆ–éŸ³é¢‘å†…å®¹è¿›è¡Œç¼–ç å’Œè§£ç çš„æ”¯æŒã€æµç•…åº¦å’Œèƒ½æ•ˆï¼Œè¯·ä½¿ç”¨ MediaCapabilities æ¥å£çš„ <code>encodingInfo()</code> å’Œ <code>decodingInfo()</code> æ–¹æ³•ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mediaCapabilities&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> audioFileConfiguration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    audio: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      contentType: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;audio/mp3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      channels: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      bitrate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">132700</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      samplerate: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  navigator.mediaCapabilities</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decodingInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(audioFileConfiguration)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        `This configuration is ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">supported</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;not &quot;}supported,`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">smooth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;not &quot;}smooth, and`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">powerEfficient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;not &quot;}power efficient.`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`decodingInfo error: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contentType</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="7-3-api" tabindex="-1">7.3 åª’ä½“æ•æ‰ä¸åª’ä½“æµ API <a class="header-anchor" href="#7-3-api" aria-label="Permalink to &quot;7.3 åª’ä½“æ•æ‰ä¸åª’ä½“æµ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>åª’ä½“æ•æ‰ä¸åª’ä½“æµ APIï¼ˆMedia Capture and Streams APIï¼‰ï¼Œé€šå¸¸è¢«ç§°ä¸ºåª’ä½“æµ APIï¼ˆMedia Streams APIã€MediaStream APIï¼‰ï¼Œæ˜¯ä¸ WebRTC ç›¸å…³çš„ APIï¼Œæä¾›å¯¹éŸ³é¢‘æˆ–è§†é¢‘æ•°æ®æµçš„æ”¯æŒã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>å®ƒæä¾›äº†ç”¨äºå¤„ç†åª’ä½“æµåŠå…¶ç»„æˆè½¨é“çš„æ¥å£å’Œæ–¹æ³•ã€ä¸æ•°æ®æ ¼å¼ç›¸å…³çš„çº¦æŸã€å¼‚æ­¥ä½¿ç”¨æ•°æ®æ—¶æˆåŠŸå’Œé”™è¯¯çš„å›è°ƒä»¥åŠåœ¨å¤„ç†æœŸé—´è§¦å‘çš„äº‹ä»¶ã€‚</p><p>ä¸€ä¸ª MediaStream åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªä»£è¡¨å„ç§å£°éŸ³å’Œè§†é¢‘è½¨é“çš„ MediaStreamTrack å¯¹è±¡ã€‚æ¯ä¸€ä¸ª MediaStreamTrack å¯èƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé€šé“ã€‚è¿™ä¸ªé€šé“ä»£è¡¨ç€åª’ä½“æµçš„æœ€å°å•å…ƒï¼Œæ¯”å¦‚ä¸€ä¸ªéŸ³é¢‘ä¿¡å·å¯¹åº”ç€ä¸€ä¸ªå¯¹åº”çš„æ‰¬å£°å™¨ï¼Œåƒæ˜¯åœ¨ç«‹ä½“å£°é“ä¸­çš„å·¦å£°é“æˆ–å³å£°é“ã€‚</p><p>MediaStream å¯¹è±¡æœ‰ç€å•ä¸€çš„è¾“å…¥å’Œè¾“å‡ºã€‚ç”± getUserMedia() åˆ›å»ºçš„ MediaStream å¯¹è±¡æ˜¯åœ¨æœ¬åœ°å€ŸåŠ©ç”¨æˆ·ç›¸æœºå’Œéº¦å…‹é£çš„æºè¾“å…¥ã€‚éæœ¬åœ°çš„ MediaStream å¯èƒ½ä»£è¡¨ä¸€ä¸ªåª’ä½“å…ƒç´ ï¼ˆå¦‚ <code>&lt;video&gt; æˆ– &lt;audio&gt;</code>ï¼‰ï¼Œæˆ–æ˜¯ä¸€ä¸ªé€šè¿‡ WebRTC RTCPeerConnection API è·å¾—çš„æºè‡ªç½‘ç»œçš„åª’ä½“æµï¼Œåˆæˆ–æ˜¯ä¸€ä¸ªä½¿ç”¨ Web éŸ³é¢‘ API çš„ MediaStreamAudioDestinationNode åˆ›å»ºçš„åª’ä½“æµã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;use strict&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Put variables in global scope to make them available to the browser console.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> video </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;video&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> constraints </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (window.constraints </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  audio: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  video: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errorElement </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#errorMsg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navigator.mediaDevices</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUserMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(constraints)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> videoTracks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVideoTracks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Got stream with constraints:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, constraints);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Using video device: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> videoTracks[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].label);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onended</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Stream ended&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    window.stream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// make variable available to browser console</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    video.srcObject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ConstraintNotSatisfiedError&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      errorMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;The resolution &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          constraints.video.width.exact </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;x&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          constraints.video.width.exact </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot; px is not supported by your device.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;PermissionDeniedError&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      errorMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;Permissions have not been granted to use your camera and &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;microphone, you need to allow the page access to your devices in &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;order for the demo to work.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    errorMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;getUserMedia error: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error.name, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> errorMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">msg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorElement.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;p&gt;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&lt;/p&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;undefined&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="7-4-api" tabindex="-1">7.4 åª’ä½“ä¼šè¯ API <a class="header-anchor" href="#7-4-api" aria-label="Permalink to &quot;7.4 åª’ä½“ä¼šè¯ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>åª’ä½“ä¼šè¯ API æä¾›äº†ä¸€ç§è‡ªå®šä¹‰åª’ä½“é€šçŸ¥çš„æ–¹æ³•ã€‚å®ƒé€šè¿‡æä¾›å…ƒæ•°æ®ä¾› Web åº”ç”¨ç¨‹åºæ­£åœ¨æ’­æ”¾çš„åª’ä½“çš„ç”¨æˆ·ä»£ç†æ˜¾ç¤ºæ¥å®ç°æ­¤ç›®çš„ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>å®ƒè¿˜æä¾›äº†æ“ä½œå¤„ç†ç¨‹åºï¼Œæµè§ˆå™¨å¯ä»¥ä½¿ç”¨è¿™äº›æ“ä½œå¤„ç†ç¨‹åºæ¥è®¿é—®å¹³å°åª’ä½“é”®ï¼Œä¾‹å¦‚é”®ç›˜ã€è€³æœºã€é¥æ§å™¨ä¸Šçš„ç¡¬ä»¶é”®ï¼Œä»¥åŠç§»åŠ¨è®¾å¤‡çš„é€šçŸ¥åŒºåŸŸå’Œé”å±ç•Œé¢ä¸Šçš„è½¯ä»¶é”®ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¾å¤‡æ— ç¼æ§åˆ¶ Web æä¾›çš„åª’ä½“ï¼Œå³ä½¿ä¸æŸ¥çœ‹ç½‘é¡µä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">playButton.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pointerup&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> audio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;audio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // User interacted with the page. Let&#39;s play audio!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  audio</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mediaSession&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        navigator.mediaSession.metadata </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MediaMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Unforgettable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          artist: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Nat King Cole&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          album: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;The Ultimate Collection (Remastered)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          artwork: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              src: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://dummyimage.com/96x96&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              sizes: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;96x96&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              src: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://dummyimage.com/128x128&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              sizes: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;128x128&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              src: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://dummyimage.com/192x192&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              sizes: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;192x192&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              src: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://dummyimage.com/256x256&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              sizes: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;256x256&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        navigator.mediaSession.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setActionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;play&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          /* Code excerpted. */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        navigator.mediaSession.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setActionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pause&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          /* Code excerpted. */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        navigator.mediaSession.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setActionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;seekforward&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          /* Code excerpted. */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        navigator.mediaSession.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setActionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;previoustrack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          /* Code excerpted. */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        navigator.mediaSession.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setActionHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nexttrack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          /* Code excerpted. */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        //è¦å°†åª’ä½“ä¼šè¯çš„å½“å‰çŠ¶æ€è®¾ç½®ä¸º playing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        navigator.mediaSession.playbackState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;playing&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h3 id="7-5-mediastream-recording-api" tabindex="-1">7.5 MediaStream Recording API <a class="header-anchor" href="#7-5-mediastream-recording-api" aria-label="Permalink to &quot;7.5 MediaStream Recording API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>åª’ä½“æµï¼ˆéŸ³/è§†é¢‘ï¼‰å½•åˆ¶ API è®©è®°å½•éŸ³é¢‘æµæˆ–è§†é¢‘æµä¿¡æ¯æ›´åŠ å®¹æ˜“ã€‚å½“ä½¿ç”¨ <code>navigator.mediaDevices.getUserMedia()</code> æ—¶ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼ä»ç”¨æˆ·çš„è¾“å…¥è®¾å¤‡ä¸­è®°å½•ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥é©¬ä¸Šåœ¨ Web åº”ç”¨ä¸­æŸ¥çœ‹è®°å½•çš„ä¿¡æ¯ã€‚</p><h4>åŸºæœ¬ç”¨æ³•</h4><p>ä½¿ç”¨ <code>getUserMedia()</code> æ¥æ•è·æˆ‘ä»¬æƒ³è¦çš„åª’ä½“æµã€‚æˆ‘ä»¬ä½¿ç”¨ MediaRecorder API æ¥è®°å½•ä¿¡æ¯æµï¼Œå¹¶å°†æ¯ä¸ªè®°å½•çš„ç‰‡æ®µè¾“å‡ºåˆ°ç”Ÿæˆçš„ <code>&lt;audio&gt;</code> å…ƒç´ çš„æºä¸­ï¼Œä»¥ä¾¿å¯ä»¥å›æ”¾ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (navigator.mediaDevices </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.mediaDevices.getUserMedia) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> audio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;audio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> body </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementsByTagName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(audio);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä½¿ç”¨getUserMediaï¼Œä»…æŠ“å–éŸ³é¢‘æµ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  navigator.mediaDevices</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUserMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ audio: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // åˆ›å»ºåª’ä½“è®°å½•å™¨å®ä¾‹ï¼Œå¹¶ç›´æ¥ä¼ é€’è¯¥åª’ä½“æµ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mediaRecorder </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MediaRecorder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stream);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //0såå¼€å§‹å½•éŸ³ï¼šè°ƒç”¨MediaRecorder.start()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mediaRecorder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;recordingçŠ¶æ€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mediaRecorder.state);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æ”¶é›†å½•åˆ¶çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      mediaRecorder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ondataavailable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        chunks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 5såç»“æŸå½•åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mediaRecorder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inactiveçŠ¶æ€&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mediaRecorder.state);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å½•éŸ³åœæ­¢æ—¶ï¼Œä½¿ç”¨æŠ“å–åˆ°çš„blobæ•°æ®ï¼Œèµ‹ç»™audio.src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      mediaRecorder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onstop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blob </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Blob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunks, { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;audio/ogg; codecs=opus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        chunks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> audioURL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(blob);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        audio.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> audioURL;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;The following getUserMedia error occured: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;getUserMedia not supported on your browser!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="7-6-api" tabindex="-1">7.6 é¡µé¢å¯è§æ€§ API <a class="header-anchor" href="#7-6-api" aria-label="Permalink to &quot;7.6 é¡µé¢å¯è§æ€§ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>é¡µé¢å¯è§æ€§ API æä¾›äº†ä¸€äº›äº‹ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹è¿™äº›äº‹ä»¶æ¥äº†è§£æ–‡æ¡£ä½•æ—¶å˜ä¸ºå¯è§æˆ–éšè—ï¼Œè¿˜æä¾›äº†ä¸€äº›åŠŸèƒ½æ¥æŸ¥çœ‹é¡µé¢çš„å½“å‰å¯è§æ€§çŠ¶æ€ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>é€šè¿‡è®©é¡µé¢åœ¨æ–‡æ¡£ä¸å¯è§æ—¶é¿å…æ‰§è¡Œä¸å¿…è¦çš„ä»»åŠ¡ï¼Œè¿™å¯¹äºèŠ‚çœèµ„æºå’Œæé«˜æ€§èƒ½ç‰¹åˆ«æœ‰ç”¨ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> audio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;audio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;visibilitychange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // visible hidden</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (document.visibilityState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;visible&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    audio.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pause</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    audio.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="7-7-api" tabindex="-1">7.7 ç”»ä¸­ç”» API <a class="header-anchor" href="#7-7-api" aria-label="Permalink to &quot;7.7 ç”»ä¸­ç”» API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>ç”»ä¸­ç”» APIï¼ˆPicture-in-Picture APIï¼‰å…è®¸ç½‘ç«™æ€»æ˜¯åœ¨å…¶ä»–çª—å£ä¹‹ä¸Šåˆ›å»ºä¸€ä¸ªæµ®åŠ¨çš„è§†é¢‘ï¼Œä»¥ä¾¿ç”¨æˆ·åœ¨å…¶ä»–å†…å®¹ç«™ç‚¹æˆ–è€…è®¾å¤‡ä¸Šçš„åº”ç”¨ç¨‹åºäº¤äº’æ—¶å¯ä»¥ç»§ç»­æ’­æ”¾åª’ä½“ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><blockquote><p>æ–‡æ¡£ç”»ä¸­ç”» API æ‰©å±•äº†ç”»ä¸­ç”» APIï¼Œä½¿å…¶èƒ½å¤Ÿå°†ä»»æ„ HTML å†…å®¹ï¼ˆè€Œä¸ä»…ä»…æ˜¯è§†é¢‘ï¼‰å‘ˆç°åœ¨å§‹ç»ˆç½®é¡¶çš„çª—å£ä¸­ã€‚</p></blockquote><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> togglePictureInPicture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å·²ç»å­˜åœ¨ç”»ä¸­ç”»å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (document.pictureInPictureElement) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é€€å‡ºç”»ä¸­ç”»æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exitPictureInPicture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ”¯æŒç”»ä¸­ç”»æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (document.pictureInPictureEnabled) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å¯åŠ¨ç”»ä¸­ç”»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PictureInPictureWindow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> video.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestPictureInPicture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      PictureInPictureWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onresize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          PictureInPictureWindow.width,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          PictureInPictureWindow.height</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;enterpictureinpicture&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¿›å…¥ç”»ä¸­ç”»æ¨¡å¼æ—¶è§¦å‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;leavepictureinpicture&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç¦»å¼€ç”»ä¸­ç”»æ¨¡å¼æ—¶è§¦å‘&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="7-8-api" tabindex="-1">7.8 å±å¹•æ•æ‰ API <a class="header-anchor" href="#7-8-api" aria-label="Permalink to &quot;7.8 å±å¹•æ•æ‰ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>å±å¹•æ•æ‰ API å¼•å…¥äº†å¯¹ç°æœ‰åª’ä½“æ•æ‰å’Œæµ API çš„è¡¥å……ï¼Œä»¥ä¾¿è®©ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªå±å¹•æˆ–å±å¹•çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚ä¸€ä¸ªçª—å£ï¼‰åœ¨ MediaStream ä¸­è¿›è¡Œæ•æ‰ã€‚ç„¶åï¼Œè¯¥æµå¯ä»¥è¢«å½•åˆ¶æˆ–ä¸å…¶ä»–äººå…±äº«ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>å±å¹•æ•æ‰ API ç›¸å¯¹ç®€å•æ˜“ç”¨ã€‚å…¶å”¯ä¸€çš„æ–¹æ³•æ˜¯ <code>getDisplayMedia()</code>ï¼Œå®ƒçš„ä»»åŠ¡æ˜¯è¦æ±‚ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªå±å¹•æˆ–å±å¹•çš„ä¸€éƒ¨åˆ†ä»¥ MediaStream çš„å½¢å¼æ•æ‰ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> startCapture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">displayMediaOptions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> captureStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    captureStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.mediaDevices.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDisplayMedia</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(displayMediaOptions);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Error: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> captureStream;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">startCapture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> video</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;video&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  video.srcObject </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  video.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;loadedmetadata&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    video.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="7-9-web-audio-api" tabindex="-1">7.9 Web Audio API <a class="header-anchor" href="#7-9-web-audio-api" aria-label="Permalink to &quot;7.9 Web Audio API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>Web Audio API æä¾›äº†ä¸€ä¸ªå¼ºå¤§ä¸”åŠŸèƒ½é½å…¨çš„ç³»ç»Ÿæ¥æ§åˆ¶ç½‘ç»œä¸Šçš„éŸ³é¢‘ï¼Œå…è®¸å¼€å‘äººå‘˜é€‰æ‹©éŸ³é¢‘æºï¼Œå‘éŸ³é¢‘æ·»åŠ æ•ˆæœï¼Œåˆ›å»ºéŸ³é¢‘å¯è§†åŒ–ï¼Œåº”ç”¨ç©ºé—´æ•ˆæœï¼ˆå¦‚å¹³ç§»ï¼‰ç­‰ç­‰ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>Web Audio API ä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨éŸ³é¢‘ä¸Šä¸‹æ–‡ä¸­è¿›è¡ŒéŸ³é¢‘æ“ä½œï¼Œå…·æœ‰æ¨¡å—åŒ–è·¯ç”±çš„ç‰¹è‰²ã€‚åœ¨éŸ³é¢‘èŠ‚ç‚¹ä¸­æ‰§è¡ŒåŸºæœ¬çš„éŸ³é¢‘æ“ä½œï¼Œè¿™äº›éŸ³é¢‘èŠ‚ç‚¹è¿æ¥åœ¨ä¸€èµ·å½¢æˆéŸ³é¢‘è·¯ç”±å›¾ã€‚åœ¨å•ä¸ªä¸Šä¸‹æ–‡ä¸­æ”¯æŒå¤šä¸ªéŸ³é¢‘æºï¼Œå°½ç®¡å®ƒä»¬å…·æœ‰ä¸åŒçš„é€šé“å¸ƒå±€ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> audioContext</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (window.AudioContext </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.webkitAudioContext)();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> oscillator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> audioContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createOscillator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> gainNode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> audioContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createGain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">oscillator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gainNode);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gainNode.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(audioContext.destination);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">oscillator.frequency.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 440</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gainNode.gain.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">oscillator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">oscillator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(audioContext.currentTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="8-api" tabindex="-1">8. å®‰å…¨ä¸è®¤è¯ API <a class="header-anchor" href="#8-api" aria-label="Permalink to &quot;8. å®‰å…¨ä¸è®¤è¯ API&quot;">â€‹</a></h2><h3 id="8-1-web-authentication-api" tabindex="-1">8.1 Web Authentication API <a class="header-anchor" href="#8-1-web-authentication-api" aria-label="Permalink to &quot;8.1 Web Authentication API&quot;">â€‹</a></h3><p>Web Authentication API ç»§æ‰¿è‡ª Credential Management API ï¼Œä½¿ç”¨å…¬é’¥å¯†ç å­¦ä½¿å¾—éªŒè¯æ›´å¼ºå£®ï¼Œä¸éœ€è¦ SMS æ–‡æœ¬å°±èƒ½å®ç°æ— å¯†ç éªŒè¯å’Œå®‰å…¨çš„åŒå› ç´ éªŒè¯ã€‚è¿™é‡ŒæŒ‡å®šä½¿ç”¨ PublicKeyCredentialã€‚</p><p>ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ›¿ä»£å¯†ç æˆ– SMS çŸ­ä¿¡åœ¨ç½‘ç«™ä¸Šæ³¨å†Œã€ç™»å½•ã€second-factor authenticationï¼ˆåŒå› ç´ éªŒè¯ï¼‰ã€‚è§£å†³äº† phishingï¼ˆé’“é±¼ï¼‰ã€data breachesï¼ˆæ•°æ®ç ´åï¼‰ã€SMS æ–‡æœ¬æ”»å‡»ã€å…¶ä»–åŒå› ç´ éªŒè¯ç­‰é‡å¤§å®‰å…¨é—®é¢˜ï¼ŒåŒæ—¶æ˜¾è‘—æé«˜äº†æ˜“ç”¨æ€§ï¼ˆå› ä¸ºç”¨æˆ·ä¸å¿…ç®¡ç†è®¸å¤šè¶Šæ¥è¶Šå¤æ‚çš„å¯†ç ï¼‰ã€‚</p><p>Web Authentication API æœ‰ä¸¤ä¸ªå¯¹åº”äºæ³¨å†Œå’Œç™»å½•çš„åŸºæœ¬æ–¹æ³•ï¼š</p><ul><li>navigator.credentials.create() - å½“ä½¿ç”¨ publicKey é€‰é¡¹æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å‡­æ®ï¼Œæ— è®ºæ˜¯ç”¨äºæ³¨å†Œæ–°è´¦å·è¿˜æ˜¯å°†æ–°çš„éå¯¹ç§°å¯†é’¥å‡­æ®ä¸å·²æœ‰çš„è´¦å·å…³è”ã€‚</li><li>navigator.credentials.get() - å½“ä½¿ç”¨ publicKey é€‰é¡¹æ—¶ï¼Œä½¿ç”¨ä¸€ç»„ç°æœ‰çš„å‡­æ®è¿›è¡Œèº«ä»½éªŒè¯æœåŠ¡ï¼Œæ— è®ºæ˜¯ç”¨äºç”¨æˆ·ç™»å½•è¿˜æ˜¯åŒå› ç´ éªŒè¯ä¸­çš„ä¸€æ­¥ã€‚</li></ul><p>WebAuthn æ³¨å†Œæµç¨‹:</p><ul><li><p>åº”ç”¨ç¨‹åºè¯·æ±‚æ³¨å†Œ - åº”ç”¨ç¨‹åºå‘å‡ºæ³¨å†Œè¯·æ±‚ã€‚</p></li><li><p>æœåŠ¡å™¨å‘é€æŒ‘æˆ˜ï¼ˆè‡³å°‘ 16 å­—èŠ‚çš„éšæœº bufferï¼‰ã€ç”¨æˆ·ä¿¡æ¯å’Œä¾èµ–æ–¹ä¿¡æ¯ - ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å‚æ•°å°†ä¼ é€’ç»™ create()ï¼Œè¿”å›å…‘ç°ä¸ºåŒ…å« AuthenticatorAttestationResponse çš„ PublicKeyCredential çš„ Promiseã€‚</p></li><li><p>æµè§ˆå™¨å‘è®¤è¯å™¨è°ƒç”¨ authenticatorMakeCredential()</p></li><li><p>è®¤è¯å™¨åˆ›å»ºæ–°çš„å¯†é’¥å¯¹å’Œè¯æ˜ - åœ¨è¿›è¡Œä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œè®¤è¯å™¨é€šå¸¸ä¼šä»¥æŸç§å½¢å¼è¦æ±‚ç”¨æˆ·ç¡®è®¤ï¼Œå¦‚è¾“å…¥ PINï¼Œä½¿ç”¨æŒ‡çº¹ï¼Œè¿›è¡Œè™¹è†œæ‰«æç­‰ï¼Œä»¥è¯æ˜ç”¨æˆ·åœ¨åœºå¹¶åŒæ„æ³¨å†Œ</p></li><li><p>è®¤è¯å™¨å°†æ•°æ®è¿”å›æµè§ˆå™¨ - æ–°çš„å…¬é’¥ã€å…¨å±€å”¯ä¸€çš„å‡­è¯ ID å’Œå…¶ä»–çš„è¯æ˜æ•°æ®ä¼šè¢«è¿”å›åˆ°æµè§ˆå™¨ï¼Œæˆä¸º attestationObjectã€‚</p></li><li><p>æµè§ˆå™¨ç”Ÿæˆæœ€ç»ˆçš„æ•°æ®å¹¶å‘é€åˆ°æœåŠ¡å™¨</p></li><li><p>æœåŠ¡å™¨éªŒè¯æ•°æ®å¹¶å®Œæˆæ³¨å†Œ</p><ul><li>éªŒè¯æ¥æ”¶åˆ°çš„æŒ‘æˆ˜ä¸å‘é€çš„æŒ‘æˆ˜ç›¸åŒ</li><li>ç¡®ä¿ origin ä¸é¢„æœŸçš„ä¸€è‡´</li><li>ä½¿ç”¨å¯¹åº”è®¤è¯å™¨å‹å·çš„è¯ä¹¦é“¾éªŒè¯ clientDataHash çš„ç­¾åå’Œè¯æ˜</li></ul><p>æœåŠ¡å™¨å°†ä¼šæŠŠæ–°çš„å…¬é’¥ä¸ç”¨æˆ·å¸æˆ·ç›¸å…³è”ä»¥ä¾›å°†æ¥ç”¨æˆ·å¸Œæœ›ä½¿ç”¨å…¬é’¥è¿›è¡Œèº«ä»½éªŒè¯æ—¶ä½¿ç”¨ã€‚</p></li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”¨ä½œcreate()çš„å‚æ•°ï¼Œå‘è®¤è¯å™¨æ³¨å†Œå‡­æ®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> createCredentialDefaultArgs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  publicKey: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rp: { name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Acme&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      id: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;john.p.smith@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      displayName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John P. Smith&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pubKeyCredParams: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public-key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, alg: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    attestation: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;direct&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timeout: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä»æœåŠ¡ç«¯è¿”å›çš„challengeä¿¡æ¯ï¼Œè‡³å°‘16ä½çš„buffer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    challenge: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0x8c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x0a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x26</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x91</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xc1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xe9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xb9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x4e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x2e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x17</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0x1a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x98</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x6a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x73</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x71</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x9d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x43</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x48</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xd5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xa7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x6a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0x7e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x38</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x94</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x52</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x77</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x97</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x0f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]).buffer,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ„å»ºç™»å½•å‡­æ®ï¼Œç”¨äºget()å‚æ•°ï¼Œè¿›è¡Œèº«ä»½éªŒè¯æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> getCredentialDefaultArgs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  publicKey: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timeout: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æŠŠcreate()è¿”å›çš„PublicKeyCredentialçš„idï¼Œæ·»åŠ è¿›æ¥</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // allowCredentials: [newCredential],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    challenge: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0x79</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x68</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x71</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xb9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x94</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xc3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xc2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0x67</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x65</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x26</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xe3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xf3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x3b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x78</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x2e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xd5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x6f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      0x81</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x26</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xe2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0xa6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x7d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x74</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0x50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]).buffer,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œå‡­æ®ï¼šè®¤è¯å™¨é€šå¸¸ä¼šä»¥æŸç§å½¢å¼è¦æ±‚ç”¨æˆ·ç¡®è®¤ï¼Œå¦‚è¾“å…¥ PINï¼Œä½¿ç”¨æŒ‡çº¹ï¼Œè¿›è¡Œè™¹è†œæ‰«æç­‰ï¼Œä»¥è¯æ˜ç”¨æˆ·åœ¨åœºå¹¶åŒæ„æ³¨å†Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navigator.credentials</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(createCredentialDefaultArgs)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PublicKeyCredential</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //æ­¤æ—¶åº”è¯¥æŠŠè®¤è¯å™¨è¿”å›çš„PublicKeyCredentialå‘é€åˆ°æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨éªŒè¯æ•°æ®å¹¶å®Œæˆæ³¨å†Œ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¿å­˜è®¤è¯å™¨è¿”å›çš„å‡­æ®ï¼Œç”¨äºä¸‹æ¬¡ç™»å½•ä½¿ç”¨è¯¥å‡­æ®ç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idList </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        id: PublicKeyCredential.rawId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        transports: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;usb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nfc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ble&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public-key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    getCredentialDefaultArgs.publicKey.allowCredentials </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idList;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">assertion</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ASSERTION&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, assertion);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ERROR&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ä¸€ç»„ç°æœ‰çš„å‡­æ®è¿›è¡Œèº«ä»½éªŒè¯æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.credentials.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(getCredentialDefaultArgs);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>ç”Ÿæˆå‡­æ®ä¹‹å‰ï¼Œè¯¢é—®å‡­æ®ä¿å­˜çš„ä½ç½®ï¼š <img src="/assets/png/image-B8bD9r-4.png" alt="alt text"> é€‰æ‹©ä¿å­˜åˆ°ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œéœ€è¦æ‰“å¼€è“ç‰™ï¼š <img src="/assets/png/image-1-BLAba129.png" alt="alt text"> éœ€è¦ç§»åŠ¨è®¾å¤‡æ‰«ç ä¿å­˜ï¼š <img src="/assets/png/image-2-CPYeCJag.png" alt="alt text"></p><h3 id="8-2-passwordcredential" tabindex="-1">8.2 PasswordCredential <a class="header-anchor" href="#8-2-passwordcredential" aria-label="Permalink to &quot;8.2 PasswordCredential&quot;">â€‹</a></h3><p>Credential Management API çš„ä¸€ç§ï¼Œç”¨æˆ·æµè§ˆå™¨ä¿å­˜ç”¨æˆ·å’Œå¯†ç ï¼Œå…äºä¸‹æ¬¡è¾“å…¥æ“ä½œã€‚Credential æœ‰ä»¥ä¸‹å‡ ç±»ï¼š</p><ul><li>PublicKeyCredential éå¯¹ç§°å¯†é’¥å‡­æ®ï¼Œç”¨äº web authentication ç™»å½•</li><li>PasswordCredential æµè§ˆå™¨ä¿å­˜è´¦å·å¯†ç </li><li>IdentityCredential è”åˆèº«ä»½éªŒè¯äº§ç”Ÿçš„ç”¨æˆ·èº«ä»½å‡­è¯</li><li>FederatedCredential è”åˆå‡­è¯</li><li>OTPCredential éªŒè¯ç å‡­æ®</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//FederatedCredentialè”åˆè®¤è¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cred</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FederatedCredential</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2323&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jixii&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  provider: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://account.google.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Store it</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navigator.credentials.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cred).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Do something else.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zhang&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zhangjinxi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  password: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;zhangjinxi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  origin: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://developer.mozilla.org/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  iconURL:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;https://www.baidu.com/link?url=V_IZ3q1Pnw9qtN2o_WWw5u5XOMLTyrAYrAx4t6pH46P-xCAgSULCbEM_EKNAbD7bTBepxOLr0HNK_4MX7cEDhLz1Ftl2LhxD_PDgzxJHiYoQW7m19zFy-4ohY_UTfgldTiBpZjwcsPyPusfNRFJWR-LtthKCWFNPNQhipZCPX67mYsHJCuDuxVgjUwemaj8sTcbINa4eObyTRcx6r7nTy2QTbLpuB3iTV_e5qsmC-tjOGGIo0YegBFPVkhaRlTwgMdtsS4ESsNFTn-_O4q2xuRoeBSc8FOD0KMuPpHb2z8w5ttdUIde6V-zJcXFQipLG-QS7wifTZcqmLaN7MDXmi7r1vQQOKT_ak0QvIKNRtGyVrS_nEOjxizcmq3sNCWeWLzwT6QGSGQLy4-68hFMrA5I2QBMy_Oa2r9r82qikov6qLn3-hKYr_WttM-Zur6h9SCeTZsclzg8-bvyDTxRDykosfp3hCQmz0rJDEK2bHiK4Z6NR2OTZuKnV8h_HfmThU4RFsf9VGyg9eBxFwwW0VAg1Rq0qhvfNhTmAa3WXXr0G3kyYDRz_Ji5LpIJncbeT61tIgX76GwPS74uhHmO9LZGbJj7-mXlbJvOm3DnnK78a_n62pI_sOUUIvQ9fYE-uIlWkxG5lkcB8rrDC42S2C_&amp;wd=&amp;eqid=c54dbb4b000abb4a00000005672daad2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> creds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PasswordCredential</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Store the credentials.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navigator.credentials.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(creds).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">creds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Do something with the credentials if you need to.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">111</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, creds);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><img src="/assets/png/image-3-BTZeHhaE.png" alt="alt text"></p><h3 id="8-3-webotp" tabindex="-1">8.3 WebOTP <a class="header-anchor" href="#8-3-webotp" aria-label="Permalink to &quot;8.3 WebOTP&quot;">â€‹</a></h3><p>WebOTP API ä¸º Web åº”ç”¨ç¨‹åºæä¾›äº†ç®€åŒ–çš„ç”¨æˆ·ä½“éªŒï¼Œä»¥ä¾¿åœ¨å°†ç”µè¯å·ç ç”¨ä½œç™»å½•å› ç´ æ—¶éªŒè¯è¯¥ç”µè¯å·ç æ˜¯å¦å±äºç”¨æˆ·ã€‚WebOTP æ˜¯å‡­æ®ç®¡ç† API çš„æ‰©å±•ã€‚</p><p>éªŒè¯é€šè¿‡ä¸¤ä¸ªæ­¥éª¤å®Œæˆï¼š</p><ul><li>åº”ç”¨ç¨‹åºå®¢æˆ·ç«¯è¯·æ±‚ä¸€æ¬¡æ€§å¯†ç  ï¼ˆOTPï¼‰ï¼Œè¯¥å¯†ç æ˜¯ä»åº”ç”¨ç¨‹åºæœåŠ¡å™¨å‘é€çš„ç‰¹æ®Šæ ¼å¼çš„ SMS æ¶ˆæ¯ä¸­è·å–çš„ã€‚</li><li>JavaScript ç”¨äºå°† OTP è¾“å…¥åˆ°åº”ç”¨ç¨‹åºå®¢æˆ·ç«¯çš„éªŒè¯è¡¨å•ä¸­ï¼Œå¹¶å°†å…¶æäº¤å›æœåŠ¡å™¨ä»¥éªŒè¯å®ƒæ˜¯å¦ä¸ SMS ä¸­æœ€åˆå‘é€çš„å†…å®¹åŒ¹é…ã€‚</li></ul><p>WebOTP API æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</p><ul><li>åœ¨éœ€è¦éªŒè¯ç”µè¯å·ç æ—¶ï¼Œåº”ç”¨ç¨‹åºå®¢æˆ·ç«¯å°†è¦æ±‚ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥ä»–ä»¬çš„ç”µè¯å·ç ï¼Œç„¶åå°†å…¶æäº¤ç»™åº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚</li><li>ç„¶åï¼Œåº”ç”¨ç¨‹åºå®¢æˆ·ç«¯ä½¿ç”¨æŒ‡å®šç±»å‹çš„é€‰é¡¹è°ƒç”¨ navigator.credentials.getï¼ˆï¼‰ã€‚è¿™ä¼šè§¦å‘æ¥è‡ªåº•å±‚ç³»ç»Ÿçš„ OTP è¯·æ±‚ï¼Œå…¶æ¥æºå°†ä»åº”ç”¨ç¨‹åºæœåŠ¡å™¨æ¥æ”¶çš„ç‰¹æ®Šæ ¼å¼çš„ SMS æ¶ˆæ¯ï¼ˆåŒ…å« OTP å’Œåº”ç”¨ç¨‹åºçš„åŸŸï¼‰ã€‚è¯¥è°ƒç”¨æ˜¯åŸºäº Promise çš„ï¼Œå¹¶ç­‰å¾…æ”¶åˆ° SMS æ¶ˆæ¯ã€‚otptransport&quot;sms&quot;get()</li><li>App æœåŠ¡å™¨å°†çŸ­ä¿¡å‘é€åˆ°æŒ‡å®šçš„ç”µè¯å·ç ã€‚è¿™å¿…é¡»åœ¨æ­¥éª¤ 2 å‘ç”Ÿåç«‹å³å®Œæˆã€‚</li><li>å½“è®¾å¤‡ä¸Šæ”¶åˆ°çŸ­ä¿¡æ—¶ï¼Œå¦‚æœå®ƒåŒ…å«åº”ç”¨ç¨‹åºçš„åŸŸï¼Œæµè§ˆå™¨å°†è¯¢é—®ç”¨æˆ·æ˜¯å¦åŒæ„æ£€ç´¢/ä½¿ç”¨ OTPã€‚ä¾‹å¦‚ï¼ŒChrome ä¼šæ˜¾ç¤ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œè¯¢é—®ä»–ä»¬æ˜¯å¦å…è®¸ä» SMS ä¸­æ£€ç´¢ OTP;å…¶ä»–æµè§ˆå™¨å¯èƒ½ä¼šä»¥ä¸åŒçš„æ–¹å¼å¤„ç†å®ƒã€‚å¦‚æœä»–ä»¬åŒæ„ï¼Œåˆ™è°ƒç”¨å°†ä½¿ç”¨åŒ…å« OTP çš„ OTPCredential å¯¹è±¡å®Œæˆã€‚get()</li><li>ç„¶åï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»»ä½•æ‚¨æƒ³è¦çš„æ–¹å¼ä½¿ç”¨ OTPã€‚å…¸å‹çš„ç”¨æ³•æ˜¯å°†å…¶è®¾ç½®ä¸ºåº”ç”¨ç¨‹åºå®¢æˆ·ç«¯ä¸ŠéªŒè¯è¡¨å•çš„å€¼ï¼Œç„¶åæäº¤è¡¨å•ï¼Œä»è€Œä½¿è¯¥è¿‡ç¨‹å°½å¯èƒ½æ— ç¼ã€‚</li><li>ç„¶åï¼Œåº”ç”¨æœåŠ¡å™¨å°†éªŒè¯å‘å›ç»™å®ƒçš„ OTP æ˜¯å¦ä¸æœ€åˆåœ¨ SMS ä¸­å‘é€çš„ OTP åŒ¹é…ï¼Œå¦‚æœåŒ¹é…ï¼Œåˆ™å®Œæˆè¯¥è¿‡ç¨‹ï¼ˆä¾‹å¦‚ï¼Œè®©ç”¨æˆ·ç™»å½•ï¼‰ã€‚</li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å…¸å‹çš„ SMS æ¶ˆæ¯å¦‚ä¸‹æ‰€ç¤ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Your verification code is </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123456.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@www.example.com #</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123456</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå½“ SMS æ¶ˆæ¯åˆ°è¾¾å¹¶ä¸”ç”¨æˆ·æˆäºˆæƒé™æ—¶ï¼Œå°†è¿”å›ä¸€ä¸ª OTPCredential å¯¹è±¡ä»¥åŠ OTPã€‚ç„¶åï¼Œæ­¤å¯†ç å°†é¢„å…ˆå¡«å……åˆ°éªŒè¯è¡¨å•å­—æ®µä¸­ï¼Œå¹¶æäº¤è¡¨å•ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> autocomplete</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;one-time-code&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inputmode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;numeric&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‰¹æ€§æ£€æµ‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;OTPCredential&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOMContentLoaded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;input[autocomplete=&quot;one-time-code&quot;]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">input) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ§åˆ¶å™¨ç”¨äºæ‰‹åŠ¨æäº¤è¡¨å•æ—¶ï¼Œç»ˆæ­¢OTPè¯·æ±‚ã€‚ä¹Ÿå¯ä»¥è¶…æ—¶ç»ˆæ­¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ac</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> form</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> input.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">closest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;form&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (form) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      form.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;submit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ac.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é€šè¿‡getæ–¹æ³•è¯·æ±‚OTP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    navigator.credentials</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        otp: { transport: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        signal: ac.signal,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">otp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // è·å–åˆ°otpåï¼Œæ”¾è¿›inputè¾“å…¥æ¡†å†…ï¼Œç„¶åè‡ªåŠ¨æäº¤è¡¨å•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        input.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> otp.code;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (form) form.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">submit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="9-api" tabindex="-1">9. ç½‘ç»œä¸å­˜å‚¨ API <a class="header-anchor" href="#9-api" aria-label="Permalink to &quot;9. ç½‘ç»œä¸å­˜å‚¨ API&quot;">â€‹</a></h2><h3 id="9-1-web-locks-api" tabindex="-1">9.1 Web Locks API <a class="header-anchor" href="#9-1-web-locks-api" aria-label="Permalink to &quot;9.1 Web Locks API&quot;">â€‹</a></h3><p>Web Locks API å…è®¸åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µæˆ– worker ä¸­è¿è¡Œçš„è„šæœ¬å¼‚æ­¥è·å–é”ï¼Œåœ¨æ‰§è¡Œå·¥ä½œæ—¶ä¿æŒé”ï¼Œæœ€åé‡Šæ”¾é”ã€‚æŒæœ‰é”æ—¶ï¼Œåœ¨åŒä¸€æºä¸­æ‰§è¡Œçš„å…¶ä»–è„šæœ¬éƒ½æ— æ³•è·å–ç›¸åŒçš„é”ï¼Œè¿™å…è®¸åœ¨å¤šä¸ªæ ‡ç­¾é¡µæˆ– worker ä¸­è¿è¡Œçš„ Web åº”ç”¨ç¨‹åºåè°ƒå·¥ä½œå’Œèµ„æºçš„ä½¿ç”¨ã€‚</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> abort </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¯·æ±‚é”</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navigator.locks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;my_resource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mode: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exclusive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‹¬å æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ifAvailable: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æŒ‡å®šåå¦‚æœä¸ç­‰å¾…å°±æ— æ³•ç«‹å³æˆäºˆé”å®š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    steal: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¦‚æœæŒ‡å®šï¼Œåˆ™å°†é‡Šæ”¾ä»»ä½•æŒæœ‰çš„åŒåé”ï¼Œå¹¶ä¸”è¯·æ±‚å°†è¢«æˆäºˆï¼ŒæŠ¢å ä»»ä½•æ’é˜Ÿçš„è¯·æ±‚ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    signal: abort.signal, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¯ä»¥ä¼ å…¥ä¸€ä¸ª AbortSignalï¼Œå…è®¸ä¸­æ­¢é”å®šè¯·æ±‚ã€‚è¿™å¯ç”¨äºå®ç°è¯·æ±‚è¶…æ—¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> lock</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // é”å·²è¢«è·å–ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> do_something</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lock.name);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> do_something_else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lock.mode);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç°åœ¨é”å°†è¢«é‡Šæ”¾ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="9-2-notifications-api" tabindex="-1">9.2 Notifications API <a class="header-anchor" href="#9-2-notifications-api" aria-label="Permalink to &quot;9.2 Notifications API&quot;">â€‹</a></h3><p>Notifications API å…è®¸ç½‘é¡µæ§åˆ¶å‘æœ€ç»ˆç”¨æˆ·æ˜¾ç¤ºç³»ç»Ÿé€šçŸ¥â€”â€”è¿™äº›éƒ½åœ¨é¡¶å±‚æµè§ˆä¸Šä¸‹æ–‡çª—å£ä¹‹å¤–ï¼Œå› æ­¤å³ä½¿ç”¨æˆ·å·²ç»åˆ‡æ¢æ ‡ç­¾é¡µæˆ–ç§»åŠ¨åˆ°ä¸åŒçš„åº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥æ˜¾ç¤ºã€‚è¯¥ API è¢«è®¾è®¡æˆä¸ä¸åŒå¹³å°ä¸Šçš„ç°æœ‰é€šçŸ¥ç³»ç»Ÿå…¼å®¹ã€‚</p><ul><li><code>Notification.permission</code>è¡¨ç¤ºå½“å‰æ˜¾ç¤ºé€šçŸ¥çš„æƒé™ <ul><li><code>denied</code></li><li><code>granted</code></li><li><code>default</code> ç”¨æˆ·é€‰æ‹©æ˜¯æœªçŸ¥çš„ï¼Œå› æ­¤æµè§ˆå™¨çš„è¡Œä¸ºç±»ä¼¼äºå€¼æ˜¯ denied</li></ul></li><li><code>Notification.maxActions</code> è®¾å¤‡å’Œç”¨æˆ·ä»£ç†æ”¯æŒçš„æœ€å¤§çš„æ“ä½œæ•°é‡ã€‚</li><li><code>actions</code> options å‚æ•°ä¸­æŒ‡å®šçš„é€šçŸ¥çš„æ“ä½œçš„æ•°ç»„</li><li><code>badge</code> è¿”å›ä¸€ä¸ªåŒ…å«å›¾åƒ URL çš„å­—ç¬¦ä¸²ï¼Œåœ¨æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥æ˜¾ç¤ºé€šçŸ¥æœ¬èº«ï¼ˆä¾‹å¦‚ Android é€šçŸ¥æ ï¼‰æ—¶è¡¨ç¤ºé€šçŸ¥ã€‚åœ¨ Android è®¾å¤‡ä¸Šï¼Œå¾½ç« åº”é€‚åº”é«˜è¾¾ 4 å€åˆ†è¾¨ç‡ï¼ˆçº¦ 96 x 96 åƒç´ ï¼‰çš„è®¾å¤‡ï¼Œå¹¶ä¸”å›¾åƒå°†è‡ªåŠ¨å±è”½ã€‚</li><li><code>body</code></li><li><code>data</code> é€šçŸ¥æ•°æ®çš„ç»“æ„åŒ–å…‹éš†ã€‚</li><li><code>dir</code></li><li><code>lang</code></li><li><code>icon</code></li><li><code>image</code></li><li><code>renotify</code> æ–°é€šçŸ¥å–ä»£æ—§é€šçŸ¥åï¼Œæ˜¯å¦åº”è¯¥é€šçŸ¥ç”¨æˆ·</li><li><code>requireInteraction</code> é€šçŸ¥åº”è¯¥ä¿æŒæ´»åŠ¨çŠ¶æ€ï¼Œç›´åˆ°ç”¨æˆ·ç‚¹å‡»æˆ–è€…å…³æ‰å®ƒï¼Œè€Œä¸æ˜¯è‡ªåŠ¨å…³é—­</li><li><code>silent</code> æ˜¯å¦åº”è¯¥é™éŸ³</li><li><code>tag</code> options å‚æ•°ä¸­æŒ‡å®šçš„é€šçŸ¥çš„ ID</li><li><code>timestamp</code> æŒ‡å®šé€šçŸ¥åˆ›å»ºæˆ–è€…åº”ç”¨æ—¶ï¼ˆè¿‡å»ã€ç°åœ¨æˆ–è€…æœªæ¥ï¼‰çš„æ—¶é—´ã€‚</li><li><code>title</code></li><li><code>vibrate</code> ä¸ºæ‹¥æœ‰æŒ¯åŠ¨ç¡¬ä»¶çš„ç»ˆç«¯è®¾å¤‡æŒ‡å®šæŒ¯åŠ¨æ¨¡å¼ã€‚</li><li><code>close()</code></li><li><code>clickäº‹ä»¶</code></li><li><code>closeäº‹ä»¶</code></li><li><code>showäº‹ä»¶</code></li><li><code>erroräº‹ä»¶</code></li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> notificatonOptions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  actions: [],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  badge: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/image/tuzi.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸€ä¸ªè¡¨ç¤ºé€šçŸ¥æ­£æ–‡çš„å­—ç¬¦ä¸²ï¼Œæ˜¾ç¤ºåœ¨æ ‡é¢˜ä¸‹æ–¹ï¼Œé»˜è®¤å€¼æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  data: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    description:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;ä»»æ„ä½ æƒ³è¦ä¸é€šçŸ¥å…³è”çš„æ•°æ®ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•å¯ç»“æ„åŒ–å…‹éš†çš„æ•°æ®ç±»å‹ã€‚é»˜è®¤å€¼ä¸º nullã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dir: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/image/xiong.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  image: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/image/mogu.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  renotify: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  requireInteraction: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  silent: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  tag: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¿™æ˜¯ä¸€ä¸ªtag&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  vibrate: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> notifyMe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒé€šçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Notification&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å½“å‰æµè§ˆå™¨ä¸æ”¯æŒæ¡Œé¢é€šçŸ¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Notification.permission </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;granted&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ£€æŸ¥æ˜¯å¦å·²æˆäºˆé€šçŸ¥æƒé™ï¼›å¦‚æœæ˜¯çš„è¯ï¼Œåˆ›å»ºä¸€ä¸ªé€šçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> notification</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Notification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // â€¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Notification.permission </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;denied&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æˆ‘ä»¬éœ€è¦å¾æ±‚ç”¨æˆ·çš„è®¸å¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Notification.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">permission</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å¦‚æœç”¨æˆ·æ¥å—ï¼Œæˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªé€šçŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (permission </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;granted&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> notification</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Notification</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ å¥½ï¼&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, notificatonOptions);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        notification.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclose</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;notificationå·²ç»å…³é—­äº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            event.notification,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            event.action</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">notifyMe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// serviceWorkerä¸­ä½¿ç”¨notification</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">self.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;notificationclick&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`é€šçŸ¥è¢«ç‚¹å‡»ï¼š${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">event</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">notification</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tag</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  event.notification.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è¿™ä¼šæ£€æŸ¥å½“å‰æ ‡ç­¾é¡µæ˜¯å¦å·²æ‰“å¼€å¹¶èšç„¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">waitUntil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    clients</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">matchAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;window&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">clientList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> client</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> clientList) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (client.url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;focus&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (clients.openWindow) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> clients.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><h3 id="9-3-web-api" tabindex="-1">9.3 Web å®šæœŸåå°åŒæ­¥ API <a class="header-anchor" href="#9-3-web-api" aria-label="Permalink to &quot;9.3 Web å®šæœŸåå°åŒæ­¥ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>å…è®¸ Web åº”ç”¨ç¨‹åºå®šæœŸæé†’å…¶ Service Worker è¿›è¡Œä»»ä½•æ›´æ–°ã€‚ç”¨é€”å¯èƒ½åŒ…æ‹¬åœ¨è®¾å¤‡è¿æ¥åˆ° Wi-Fi æ—¶è·å–æœ€æ–°å†…å®¹ï¼Œæˆ–å…è®¸å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œåå°æ›´æ–°ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>è°ƒç”¨ API æ—¶è®¾ç½®æœ€å°æ—¶é—´é—´éš”ï¼›ä½†æ˜¯ï¼Œç”¨æˆ·ä»£ç†è¿˜å¯èƒ½è€ƒè™‘å½±å“ Service Worker ä½•æ—¶æ¥æ”¶äº‹ä»¶çš„å…¶ä»–å› ç´ ã€‚ä¾‹å¦‚ï¼Œä»¥å‰çš„ç½‘ç«™å‚ä¸æˆ–è¿æ¥åˆ°å·²çŸ¥ç½‘ç»œã€‚</p><p>PeriodicSyncManager æ¥å£å¯é€šè¿‡ ServiceWorkerRegistration.periodicSync è·å¾—ã€‚è®¾ç½®å”¯ä¸€æ ‡è®°æ ‡è¯†ç¬¦ä»¥&quot;å‘½å&quot;åŒæ­¥äº‹ä»¶ï¼Œç„¶åå¯ä»¥åœ¨ ServiceWorker è„šæœ¬ä¸­ä¾¦å¬è¯¥äº‹ä»¶ã€‚æ”¶åˆ°äº‹ä»¶åï¼Œæ‚¨å¯ä»¥è¿è¡Œä»»ä½•å¯ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ›´æ–°ç¼“å­˜æˆ–è·å–æ–°èµ„æºã€‚</p><p>ç”±äºæ­¤ API ä¾èµ–äº Service Workerï¼Œå› æ­¤æ­¤ API æä¾›çš„åŠŸèƒ½ä»…åœ¨å®‰å…¨ä¸Šä¸‹æ–‡ä¸­å¯ç”¨ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼‚æ­¥å‡½æ•°ä»¥è‡³å°‘ä¸€å¤©çš„é—´éš”ä»æµè§ˆä¸Šä¸‹æ–‡æ³¨å†Œå®šæœŸåå°åŒæ­¥ï¼š</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registerPeriodicNewsCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> registration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.serviceWorker.ready;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> registration.periodicSync.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get-latest-news&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      minInterval: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">24</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //é€šè¿‡æ ‡ç­¾éªŒè¯åå°å®šæœŸåŒæ­¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    registration.periodicSync.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">tags</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (tags.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get-latest-news&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å·²ç»æ³¨å†Œget-latest-newsäº‹ä»¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // åˆ é™¤å®šæœŸåå°åŒæ­¥ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        registration.periodicSync.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unregister</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;get-latest-news&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Periodic Sync could not be registered!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åœ¨ Service Worker ä¸­ä¾¦å¬å®šæœŸåå°åŒæ­¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">self.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;periodicsync&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.tag </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;get-latest-news&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">waitUntil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fetchAndCacheLatestNews</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="10-api" tabindex="-1">10. å›¾å½¢ä¸æ¸²æŸ“ API <a class="header-anchor" href="#10-api" aria-label="Permalink to &quot;10. å›¾å½¢ä¸æ¸²æŸ“ API&quot;">â€‹</a></h2><h3 id="10-1-webcodecs-api" tabindex="-1">10.1 WebCodecs API <a class="header-anchor" href="#10-1-webcodecs-api" aria-label="Permalink to &quot;10.1 WebCodecs API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>WebCodecs API ä¸º web å¼€å‘è€…æä¾›äº†å¯¹è§†é¢‘æµçš„å•ä¸ªå¸§å’ŒéŸ³é¢‘æ•°æ®å—çš„åº•å±‚è®¿é—®èƒ½åŠ›ã€‚è¿™å¯¹äºé‚£äº›éœ€è¦å®Œå…¨æ§åˆ¶åª’ä½“å¤„ç†æ–¹å¼çš„ web åº”ç”¨ç¨‹åºéå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œè§†é¢‘æˆ–éŸ³é¢‘ç¼–è¾‘å™¨ï¼Œä»¥åŠè§†é¢‘ä¼šè®®ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>WebCodecs API æä¾›äº†å¯¹æµè§ˆå™¨ä¸­å·²å­˜åœ¨çš„ç¼–è§£ç å™¨çš„è®¿é—®èƒ½åŠ›ã€‚å®ƒå¯ä»¥è®¿é—®åŸå§‹è§†é¢‘å¸§ã€éŸ³é¢‘æ•°æ®å—ã€å›¾åƒè§£ç å™¨ã€éŸ³é¢‘å’Œè§†é¢‘çš„ç¼–ç å™¨åŠè§£ç å™¨ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><p>åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œè·å–ä» MediaStreamTrackProcessor ä¸­è¿”å›çš„å¸§ï¼Œç„¶åå¯¹ä»–ä»¬è¿›è¡Œç¼–ç ã€‚</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frame_counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> track</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVideoTracks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> media_processor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MediaStreamTrackProcessor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(track);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> reader</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> media_processor.readable.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (result.done) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.value;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (encoder.encodeQueueSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Too many frames in flight, encoder is overwhelmed</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // let&#39;s drop this frame.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    frame.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    frame_counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> insert_keyframe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frame_counter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 150</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    encoder.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(frame, { keyFrame: insert_keyframe });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    frame.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="10-2-webgl-api" tabindex="-1">10.2 WebGL API <a class="header-anchor" href="#10-2-webgl-api" aria-label="Permalink to &quot;10.2 WebGL API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>WebGLï¼ˆWeb å›¾å½¢åº“ï¼‰æ˜¯ä¸€ç§å¯åœ¨ä»»ä½•å…¼å®¹çš„ Web æµè§ˆå™¨ä¸­æ— éœ€ä½¿ç”¨æ’ä»¶å³å¯æ¸²æŸ“é«˜æ€§èƒ½äº¤äº’å¼ 3D å’Œ 2D å›¾å½¢çš„ JavaScript APIã€‚WebGL é€šè¿‡å¼•å…¥ä¸€ä¸ªä¸ OpenGL ES 2.0 é«˜åº¦ä¸€è‡´çš„ API æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯¥ API å¯ä»¥åœ¨ HTML <code>&lt;canvas&gt;</code> å…ƒç´ ä¸­ä½¿ç”¨ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>è¿™ç§ä¸€è‡´æ€§ä½¿ API å¯ä»¥åˆ©ç”¨ç”¨æˆ·è®¾å¤‡æä¾›çš„ç¡¬ä»¶å›¾å½¢åŠ é€Ÿã€‚WebGL 2 API å¼•å…¥äº†å¯¹ OpenGL ES 3.0 ç‰¹æ€§é›†çš„å¹¿æ³›æ”¯æŒï¼›å®ƒé€šè¿‡ WebGL2RenderingContext æ¥å£æä¾›ã€‚three.js æ˜¯ä¸€ä¸ªå¼€æºã€åŠŸèƒ½é½å…¨çš„ 3D WebGL åº“ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main()&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">canvas</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;glcanvas&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;640&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;480&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ä½ çš„æµè§ˆå™¨ä¼¼ä¹ä¸æ”¯æŒæˆ–è€…ç¦ç”¨äº† HTML5 &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&amp;lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">canvas</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&amp;gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; å…ƒç´ ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä»è¿™é‡Œå¼€å§‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#glcanvas&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // åˆå§‹åŒ– WebGL ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> gl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;webgl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ç¡®è®¤ WebGL æ”¯æŒæ€§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gl) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ— æ³•åˆå§‹åŒ– WebGLï¼Œä½ çš„æµè§ˆå™¨ã€æ“ä½œç³»ç»Ÿæˆ–ç¡¬ä»¶ç­‰å¯èƒ½ä¸æ”¯æŒ WebGLã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ä½¿ç”¨å®Œå…¨ä¸é€æ˜çš„é»‘è‰²æ¸…é™¤æ‰€æœ‰å›¾åƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ç”¨ä¸Šé¢æŒ‡å®šçš„é¢œè‰²æ¸…é™¤ç¼“å†²åŒº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gl.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">COLOR_BUFFER_BIT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="11-api" tabindex="-1">11. ç³»ç»Ÿä¸è®¾å¤‡ API <a class="header-anchor" href="#11-api" aria-label="Permalink to &quot;11. ç³»ç»Ÿä¸è®¾å¤‡ API&quot;">â€‹</a></h2><h3 id="11-1-api" tabindex="-1">11.1 çª—å£ç®¡ç† API <a class="header-anchor" href="#11-1-api" aria-label="Permalink to &quot;11.1 çª—å£ç®¡ç† API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>çª—å£ç®¡ç† API å…è®¸æ‚¨è·å–æœ‰å…³è¿æ¥åˆ°è®¾å¤‡çš„æ˜¾ç¤ºå™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶æ›´è½»æ¾åœ°å°†çª—å£æ”¾ç½®åœ¨ç‰¹å®šå±å¹•ä¸Šï¼Œä»è€Œä¸ºæ›´æœ‰æ•ˆçš„å¤šå±å¹•åº”ç”¨ç¨‹åºé“ºå¹³é“è·¯ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>å®ƒå…è®¸æ‚¨æŸ¥è¯¢æ‚¨çš„æ˜¾ç¤ºæ˜¯å¦æ‰©å±•äº†å¤šä¸ªå±å¹•ï¼Œå¹¶åˆ†åˆ«è·å–æ¯ä¸ªå±å¹•ä¸Šçš„ä¿¡æ¯ï¼šç„¶åå¯ä»¥æ ¹æ®éœ€è¦å°†çª—å£æ”¾ç½®åœ¨æ¯ä¸ªå±å¹•ä¸Šã€‚å®ƒè¿˜æä¾›äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå…è®¸æ‚¨å“åº”å¯ç”¨å±å¹•ä¸­çš„æ›´æ”¹ï¼Œæä¾›æ–°çš„å…¨å±åŠŸèƒ½ï¼Œä»¥é€‰æ‹©è¦å°†å“ªä¸ªå±å¹•ç½®äºå…¨å±æ¨¡å¼ï¼ˆå¦‚æœæœ‰ï¼‰ï¼Œä»¥åŠç”¨äºæ§åˆ¶å¯¹ API çš„è®¿é—®çš„æƒé™åŠŸèƒ½ã€‚</p><h4>API ä½¿ç”¨æ–¹æ³•</h4><ul><li><strong>Window.getScreenDetails()</strong> æ–¹æ³•çš„ç”¨æ³•ã€‚å¦‚æœè¢«é˜»æ­¢ï¼Œå®ƒçš„ Promise å°†æ‹’ç»å¹¶å‡ºç°å¼‚å¸¸ NotAllowedError</li><li><strong>Window.screen.isExtended</strong> å±æ€§ã€‚å¦‚æœè¢«é˜»æ­¢ï¼Œå®ƒå°†å§‹ç»ˆè¿”å› false</li></ul><h4>ScreenDetails å¯¹è±¡å±æ€§</h4><ul><li><code>screens</code> ä¸€ä¸ª ScreenDetailed å¯¹è±¡çš„æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«æœ‰å…³ç³»ç»Ÿå¯ç”¨çš„å•ç‹¬å±å¹•çš„è¯¦ç»†ä¿¡æ¯</li><li><code>currentScreen</code> å•ä¸ª ScreenDetailed å¯¹è±¡ï¼ŒåŒ…å«æœ‰å…³å½“å‰æµè§ˆå™¨çª—å£æ˜¾ç¤ºçš„å±å¹•çš„è¯¦ç»†ä¿¡æ¯</li></ul><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‰¹æ€§æ£€æµ‹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;getScreenDetails&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getScreenDetails</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">screenDetails</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // screenDetails.addEventListener(&quot;screenschange&quot;, () =&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> screen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> screenDetails.screens) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,screen)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ¯ä¸ªçª—å£å æ®å±å¹•å…¨éƒ¨å¯ç”¨ç©ºé—´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> windowFeatures</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `left=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">screen</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">availLeft</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">},top=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">screen</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">availTop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">},width=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">screen</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">availWidth</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">},height=${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">screen</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">availHeight</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ¯ä¸ªå±å¹•æ‰“å¼€ä¸€ä¸ªç™¾åº¦çª—å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;//www.baidu.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;_blank&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// needed for it to open in a new window</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          windowFeatures</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ScreenDetailedå¯¹è±¡å±æ€§å’Œæ–¹æ³•ï¼š</p><p><img src="/assets/png/image-4-2fhyTiby.png" alt="alt text"></p><h3 id="11-2-api" tabindex="-1">11.2 ä¼˜å…ˆä»»åŠ¡è°ƒåº¦ API <a class="header-anchor" href="#11-2-api" aria-label="Permalink to &quot;11.2 ä¼˜å…ˆä»»åŠ¡è°ƒåº¦ API&quot;">â€‹</a></h3><h4>åŠŸèƒ½ä»‹ç»</h4><p>Prioritized Task Scheduling API æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–æ–¹æ³•æ¥ç¡®å®šå±äºåº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œæ— è®ºå®ƒä»¬æ˜¯åœ¨ç½‘ç«™å¼€å‘äººå‘˜çš„ä»£ç ä¸­è¿˜æ˜¯åœ¨ç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶ä¸­å®šä¹‰ã€‚</p><h4>åŸºæœ¬ç‰¹ç‚¹</h4><p>è¯¥ API åŸºäºæ‰¿è¯ºï¼Œæ”¯æŒè®¾ç½®å’Œæ›´æ”¹ä»»åŠ¡ä¼˜å…ˆçº§ã€å»¶è¿Ÿå°†ä»»åŠ¡æ·»åŠ åˆ°è®¡åˆ’ç¨‹åºã€ä¸­æ­¢ä»»åŠ¡ä»¥åŠç›‘æ§ä¼˜å…ˆçº§æ›´æ”¹å’Œä¸­æ­¢äº‹ä»¶çš„åŠŸèƒ½ã€‚</p><h4>ä»£ç ç¤ºä¾‹</h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è°ƒåº¦å…·æœ‰ä¸åŒä¼˜å…ˆçº§çš„ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> scheduler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> navigator.scheduling </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.scheduler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é«˜ä¼˜å…ˆçº§ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scheduler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é«˜ä¼˜å…ˆçº§ä»»åŠ¡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, { priority: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user-blocking&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸­ä¼˜å…ˆçº§ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scheduler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸­ä¼˜å…ˆçº§ä»»åŠ¡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, { priority: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user-visible&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½ä¼˜å…ˆçº§ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scheduler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½ä¼˜å…ˆçº§ä»»åŠ¡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, { priority: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;background&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯ä»¥ä¸­æ­¢çš„ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scheduler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¯ä¸­æ­¢ä»»åŠ¡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  priority: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user-visible&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  signal: controller.signal </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸­æ­¢ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="12-" tabindex="-1">12. æ€»ç»“ä¸å‚è€ƒ <a class="header-anchor" href="#12-" aria-label="Permalink to &quot;12. æ€»ç»“ä¸å‚è€ƒ&quot;">â€‹</a></h2><p>æœ¬æŒ‡å—æ¶µç›–äº†ç°ä»£ Web å¼€å‘ä¸­æœ€é‡è¦çš„æµè§ˆå™¨ APIï¼Œè¿™äº› API ä¸ºå¼€å‘è€…æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½æ¥æ„å»ºä¸°å¯Œçš„ Web åº”ç”¨ç¨‹åºã€‚é€šè¿‡åˆç†ä½¿ç”¨è¿™äº› APIï¼Œæ‚¨å¯ä»¥ï¼š</p><h3 id="12-1-api-" tabindex="-1">12.1 API ä½¿ç”¨å»ºè®® <a class="header-anchor" href="#12-1-api-" aria-label="Permalink to &quot;12.1 API ä½¿ç”¨å»ºè®®&quot;">â€‹</a></h3><ul><li><strong>ä¼˜é›…é™çº§</strong>ï¼šå§‹ç»ˆè¿›è¡Œç‰¹æ€§æ£€æµ‹ï¼Œä¸ºä¸æ”¯æŒçš„æµè§ˆå™¨æä¾›å¤‡ç”¨æ–¹æ¡ˆ</li><li><strong>æ€§èƒ½è€ƒé‡</strong>ï¼šåˆç†ä½¿ç”¨ APIï¼Œé¿å…è¿‡åº¦æ¶ˆè€—è®¾å¤‡èµ„æº</li><li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šåœ¨è¯·æ±‚æ•æ„Ÿæƒé™å‰ï¼Œå‘ç”¨æˆ·è¯´æ˜åŸå› å’Œå¥½å¤„</li><li><strong>å®‰å…¨æ€§</strong>ï¼šéµå¾ªæœ€ä½³å®‰å…¨å®è·µï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç”¨æˆ·æ•°æ®æ—¶</li></ul><h3 id="12-2-" tabindex="-1">12.2 å­¦ä¹ å»ºè®® <a class="header-anchor" href="#12-2-" aria-label="Permalink to &quot;12.2 å­¦ä¹ å»ºè®®&quot;">â€‹</a></h3><ol><li><strong>åˆ†ç±»å­¦ä¹ </strong>ï¼šæ ¹æ®å®é™…éœ€æ±‚ï¼Œé‡ç‚¹æŒæ¡ç›¸å…³ç±»åˆ«çš„ API</li><li><strong>å®è·µåº”ç”¨</strong>ï¼šé€šè¿‡å°é¡¹ç›®ç»ƒä¹ å„ç§ API çš„ä½¿ç”¨</li><li><strong>å…¼å®¹æ€§æ£€æŸ¥</strong>ï¼šä½¿ç”¨ Can I Use ç­‰å·¥å…·æ£€æŸ¥ API å…¼å®¹æ€§</li><li><strong>æŒç»­å…³æ³¨</strong>ï¼šWeb API æŒç»­å‘å±•ï¼Œå»ºè®®å…³æ³¨æœ€æ–°æ ‡å‡†</li></ol><h3 id="12-3-" tabindex="-1">12.3 å‚è€ƒèµ„æº <a class="header-anchor" href="#12-3-" aria-label="Permalink to &quot;12.3 å‚è€ƒèµ„æº&quot;">â€‹</a></h3><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API" target="_blank" rel="noreferrer">MDN Web API æ–‡æ¡£</a></li><li><a href="https://www.w3.org/TR/" target="_blank" rel="noreferrer">W3C è§„èŒƒ</a></li><li><a href="https://caniuse.com/" target="_blank" rel="noreferrer">Can I Use</a></li><li><a href="https://web.dev/" target="_blank" rel="noreferrer">Web.dev</a></li></ul><p>é€šè¿‡æœ¬æŒ‡å—ï¼Œæ‚¨åº”è¯¥å¯¹ç°ä»£ Web API æœ‰äº†å…¨é¢çš„äº†è§£ã€‚å»ºè®®æ ¹æ®é¡¹ç›®éœ€æ±‚æ·±å…¥å­¦ä¹ ç‰¹å®šçš„ APIï¼Œå¹¶åœ¨å®é™…å¼€å‘ä¸­é€æ­¥åº”ç”¨è¿™äº›å¼ºå¤§çš„åŠŸèƒ½ã€‚</p></div></div></main><footer class="VPDocFooter" data-v-9c9ad9e7 data-v-d0848036><!--[--><!--]--><div class="edit-info" data-v-d0848036><div class="edit-link" data-v-d0848036><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/jinxi1334640772/jinxi1334640772.github.io/edit/master/docs/frontEnd/window/webAPI.md" target="_blank" rel="noreferrer" data-v-d0848036><!--[--><span class="vpi-square-pen edit-link-icon" data-v-d0848036></span> åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µé¢<!--]--></a></div><div class="last-updated" data-v-d0848036><p class="VPLastUpdated" data-v-d0848036 data-v-ded9c5fb>æœ€åæ›´æ–°äº: <time datetime="2025-07-10T07:22:19.000Z" data-v-ded9c5fb></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-d0848036><span class="visually-hidden" id="doc-footer-aria-label" data-v-d0848036>Pager</span><div class="pager" data-v-d0848036><a class="VPLink link pager-link prev" href="/frontEnd/window/webRTC" data-v-d0848036><!--[--><span class="desc" data-v-d0848036>ä¸Šä¸€é¡µ</span><span class="title" data-v-d0848036>ğŸ“¹ Web RTC</span><!--]--></a></div><div class="pager" data-v-d0848036><a class="VPLink link pager-link next" href="/frontEnd/window/route" data-v-d0848036><!--[--><span class="desc" data-v-d0848036>ä¸‹ä¸€é¡µ</span><span class="title" data-v-d0848036>ğŸ§­ Window è·¯ç”±</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-eca0d43b data-v-e648cac2><div class="container" data-v-e648cac2><p class="message" data-v-e648cac2>åŸºäº <a href="https://vitepress.dev/" target="_blank">VitePress</a> æ„å»ºçš„æŠ€æœ¯æ–‡æ¡£ç«™ç‚¹</p><p class="copyright" data-v-e648cac2>Copyright Â© 2024 <a href="https://github.com/jinxi1334640772" target="_blank">å¼ è¿›å–œ</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"afterend_database_mongoose.md\":\"BQlC03zb\",\"afterend_database_mysql.md\":\"bdM5e8PA\",\"afterend_express_egg.md\":\"CwcKRR5m\",\"afterend_express_express.md\":\"BRm9Vpo3\",\"afterend_express_koa.md\":\"7ULLWJFT\",\"afterend_node_assert.md\":\"BbYsqbfF\",\"afterend_node_buffer.md\":\"gCSEUTbx\",\"afterend_node_events.md\":\"Bxv2KEi7\",\"afterend_node_fs.md\":\"DTyBOgLg\",\"afterend_node_http2.md\":\"D-BTOEBZ\",\"afterend_node_index.md\":\"CgICKf-V\",\"afterend_node_module.md\":\"DSKSFis8\",\"afterend_node_path.md\":\"CxoRvBOu\",\"afterend_node_process.md\":\"Bl7609uS\",\"afterend_node_querystring.md\":\"B-kyI0r3\",\"afterend_node_readline.md\":\"CgFfcPk1\",\"afterend_node_reptile.md\":\"BMx3Qo1r\",\"afterend_node_server.md\":\"B9_fD_UN\",\"afterend_node_stream.md\":\"WOj39Wdw\",\"afterend_node_test.md\":\"Dgo6ctZN\",\"afterend_node_util.md\":\"Ce9Bbh4r\",\"afterend_server_nginx.md\":\"yLQft40N\",\"afterend_server_nitro.md\":\"nSJ-JZK5\",\"frontend_css_animation.md\":\"06VMN-cg\",\"frontend_css_atrules.md\":\"B5Vjw5bK\",\"frontend_css_dom.md\":\"DdH-btJh\",\"frontend_css_function.md\":\"ikIBgq-k\",\"frontend_css_html.md\":\"BdMDDatD\",\"frontend_css_index.md\":\"T-ceLRvi\",\"frontend_css_layout.md\":\"CL_yktAD\",\"frontend_css_less.md\":\"BQAONZAP\",\"frontend_css_sass.md\":\"D9z5VifZ\",\"frontend_css_selector.md\":\"P1pWTuZg\",\"frontend_css_transform.md\":\"Ba9-TcrS\",\"frontend_javascript_arraybuffer.md\":\"bYOFkeMH\",\"frontend_javascript_atomics.md\":\"5MPbBMGZ\",\"frontend_javascript_error.md\":\"DROYLV9Y\",\"frontend_javascript_index.md\":\"B3N3arAc\",\"frontend_javascript_intl.md\":\"CPzZOHSB\",\"frontend_javascript_json.md\":\"CW6pE_6z\",\"frontend_javascript_object.md\":\"Cunq78wj\",\"frontend_javascript_proxy.md\":\"DhImfFXJ\",\"frontend_javascript_regexp.md\":\"CorHCeAu\",\"frontend_javascript_setandmap.md\":\"BeNZp0gR\",\"frontend_web_jquery.md\":\"BlzpX-rc\",\"frontend_web_lesscode.md\":\"CjiidnKE\",\"frontend_web_nuxt.md\":\"BzzZfQyO\",\"frontend_web_qiankun.md\":\"BA7yaB43\",\"frontend_web_svelte.md\":\"X6IuA1jc\",\"frontend_web_typescript.md\":\"CwPY1A8l\",\"frontend_web_vitepress.md\":\"CQOn-GPG\",\"frontend_web_vue.md\":\"CY85R6Dt\",\"frontend_window_canvas.md\":\"cLaHdFCB\",\"frontend_window_crypto.md\":\"KP2DUlvx\",\"frontend_window_events.md\":\"CW_Xo59J\",\"frontend_window_function.md\":\"CqJMa9h4\",\"frontend_window_indexeddb.md\":\"CpnumGjt\",\"frontend_window_navigator.md\":\"BjrXMxiD\",\"frontend_window_navigatorfun.md\":\"DAMEwNbs\",\"frontend_window_observer.md\":\"JI6ubzRK\",\"frontend_window_offsetwidth.md\":\"LkoTE7YQ\",\"frontend_window_payment.md\":\"iLyyXQq5\",\"frontend_window_performance.md\":\"5z3YbJdj\",\"frontend_window_properties.md\":\"CuplrnXM\",\"frontend_window_route.md\":\"_fEQ7YyA\",\"frontend_window_serviceworker.md\":\"DRZXYj2Z\",\"frontend_window_socket.md\":\"CVbHh5T8\",\"frontend_window_speech.md\":\"eOSTN5li\",\"frontend_window_stream.md\":\"Ds3VJbMu\",\"frontend_window_webapi.md\":\"DTUEY_ji\",\"frontend_window_webcomponents.md\":\"CHOeKABE\",\"frontend_window_webrtc.md\":\"z_1sgze-\",\"frontend_window_webworker.md\":\"DN2u1bl8\",\"home.md\":\"Btg2dm4J\",\"index.md\":\"BFvkHmkV\",\"network_ajaxandfetch_ajax.md\":\"kiiSH3bt\",\"network_ajaxandfetch_axios.md\":\"PfNoVuPl\",\"network_ajaxandfetch_fetch.md\":\"Bh8IGcwZ\",\"network_http_accept.md\":\"DFSTKiZr\",\"network_http_connection.md\":\"D68q-aEy\",\"network_http_index.md\":\"B1pdg1Ns\",\"network_http_mime.md\":\"CnzPy2_G\",\"network_http_osi.md\":\"BSg0HFxV\",\"network_http_range.md\":\"CJZC13AC\",\"network_http_status.md\":\"CrNwAZnk\",\"network_httpsecure_contentsecurity.md\":\"BwpT97yH\",\"network_httpsecure_crossorigin.md\":\"wd3KD3p2\",\"network_httpsecure_https.md\":\"5MtVlt5z\",\"network_httpsecure_premission.md\":\"-IIlLJLA\",\"network_httpsecure_secure.md\":\"D3MphF2W\",\"performace_dnsprefetch.md\":\"DnURQwdG\",\"performace_image.md\":\"DM3l0TLU\",\"performace_performace.md\":\"DZlUjqVW\",\"performace_prefetch.md\":\"UGbCk3QI\",\"performace_seo.md\":\"dg0nyogt\",\"spanend_electron.md\":\"Pb5tBPat\",\"spanend_taro_api.md\":\"B44HBz-a\",\"spanend_taro_basic.md\":\"oJkLbzPm\",\"spanend_taro_cloud.md\":\"CBFmorts\",\"spanend_taro_config.md\":\"CAyDO2r8\",\"spanend_taro_form.md\":\"4KVlw8UL\",\"spanend_taro_index.md\":\"DjDE_TNJ\",\"spanend_taro_media.md\":\"C7nk3ri5\",\"spanend_taro_navigator.md\":\"CVz6DbIa\",\"spanend_taro_open.md\":\"D8VWdoNw\",\"spanend_taro_router.md\":\"BdeE9tK1\",\"spanend_taro_viewcontrainer.md\":\"C4mF85cn\",\"spanend_taro_vue.md\":\"DAJmBre4\",\"spanend_uniapp_api.md\":\"DR_-gklY\",\"spanend_uniapp_components.md\":\"CgwVPWL8\",\"spanend_uniapp_index.md\":\"UNwCISjJ\",\"tools_buildtools_actions.md\":\"BZnqZeDY\",\"tools_buildtools_docker.md\":\"yNmYDFnH\",\"tools_buildtools_gulp.md\":\"BJyXip0l\",\"tools_buildtools_jenkins.md\":\"BnSmDeG9\",\"tools_buildtools_lerna.md\":\"CcK-eKIO\",\"tools_buildtools_npm.md\":\"DR9YIXlE\",\"tools_buildtools_rollup.md\":\"sOQ9BHvE\",\"tools_buildtools_scaffolder.md\":\"DDMSW0po\",\"tools_buildtools_vite.md\":\"LjeZrAe7\",\"tools_buildtools_webpack.md\":\"CgfO6JYs\",\"tools_package_animate.md\":\"CT8KOMzn\",\"tools_package_anime.md\":\"8s8nHXkg\",\"tools_package_antv.md\":\"DGbvqTwP\",\"tools_package_bootstrap.md\":\"DO8OR3PW\",\"tools_package_cesium.md\":\"DBnDPQLX\",\"tools_package_d3.md\":\"fuZ1i-YV\",\"tools_package_dayjs.md\":\"9SbRNogJ\",\"tools_package_domtoimage.md\":\"DM8tpqBI\",\"tools_package_echarts.md\":\"Dg3yZDlW\",\"tools_package_fuse.md\":\"1mywCx0t\",\"tools_package_hybrid.md\":\"CXC6fN2L\",\"tools_package_iconfont.md\":\"DlPmG12s\",\"tools_package_lodash.md\":\"TW3XOnsu\",\"tools_package_lottie.md\":\"9E_T0pYv\",\"tools_package_mermaid.md\":\"CARSuy7U\",\"tools_package_mockjs.md\":\"DcNFlERM\",\"tools_package_pinia.md\":\"C-UDjfmJ\",\"tools_package_sentry.md\":\"tFSz-zA2\",\"tools_package_signalrä½¿ç”¨æŒ‡å—.md\":\"CpSTfX3E\",\"tools_package_sodajs.md\":\"CNdoyzSa\",\"tools_package_sortablejs.md\":\"75Ca4TYm\",\"tools_package_storybook.md\":\"oV2VyaPu\",\"tools_package_tailwindcss.md\":\"By5vlfVA\",\"tools_package_tasksfile.md\":\"DgKSl4mO\",\"tools_package_test_cypress.md\":\"CGaOWgBm\",\"tools_package_tinymce.md\":\"h4WsIQHd\",\"tools_package_velocity.md\":\"DcSnY1hi\",\"tools_package_vuei18n.md\":\"BzUGsxTP\",\"tools_package_vuerouter.md\":\"Dt878ew2\",\"tools_package_vuexpersist.md\":\"DezY_a1C\",\"tools_package_whistle.md\":\"CgvQqppo\",\"tools_questions_algorithm.md\":\"DM2soUJv\",\"tools_questions_compatibility.md\":\"CXf4bIqN\",\"tools_questions_debugging.md\":\"B99vt2gv\",\"tools_questions_designmode.md\":\"DSq2n5AJ\",\"tools_questions_grafana.md\":\"BNuiV8hy\",\"tools_questions_handwrite.md\":\"CRoweP5Y\",\"tools_questions_iconfont.md\":\"DSXmZLSX\",\"tools_questions_jq.md\":\"nRjNaJ8z\",\"tools_questions_leetcode.md\":\"sCCi8p4x\",\"tools_questions_mobilefit.md\":\"DQFjfAxT\",\"tools_questions_npmhub.md\":\"B7mo5F12\",\"tools_questions_optimization.md\":\"BD0zWPiH\",\"tools_questions_print.md\":\"CKbjTZSk\",\"tools_questions_questions.md\":\"EfcV2SJJ\",\"tools_questions_robots.md\":\"BOrMdKkb\",\"tools_questions_system.md\":\"ClK61v5p\",\"tools_questions_vite.md\":\"C9PJpLwV\",\"tools_questions_vue.md\":\"VxVb28HG\",\"tools_questions_wechatpay.md\":\"BSuc0hTB\",\"tools_stardard_eslint.md\":\"E_yvotq0\",\"tools_stardard_git.md\":\"CFCHuymr\",\"tools_stardard_naming.md\":\"DI-vjr4l\",\"tools_stardard_prettier.md\":\"DlhzXXgj\",\"tools_stardard_quality.md\":\"VrE1iMUC\",\"tools_stardard_vscode.md\":\"cminzm7v\",\"tools_study.md\":\"Zx7ZB6Gi\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"ğŸ’» VitePress æŠ€æœ¯æ–‡æ¡£ç«™ç‚¹\",\"description\":\"ä¸“ä¸šçš„å‰ç«¯æŠ€æœ¯çŸ¥è¯†åº“ï¼Œæ¶µç›–å‰ç«¯ã€åç«¯ã€ç½‘ç»œå·¥ç¨‹ã€å¼€å‘å·¥å…·ç­‰æŠ€æœ¯é¢†åŸŸ\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/images/logo-mini.svg\",\"siteTitle\":\"ğŸš€ æŠ€æœ¯æ–‡æ¡£\",\"nav\":[{\"text\":\"ğŸ  é¦–é¡µ\",\"link\":\"/home\",\"activeMatch\":\"^/home\"},{\"text\":\"ğŸ¨ å‰ç«¯æŠ€æœ¯\",\"activeMatch\":\"^/frontEnd/\",\"items\":[{\"text\":\"ğŸ“ HTML & CSS\",\"link\":\"/frontEnd/css/dom\",\"activeMatch\":\"^/frontEnd/css/\"},{\"text\":\"âš¡ JavaScript\",\"link\":\"/frontEnd/javascript/\",\"activeMatch\":\"^/frontEnd/javascript/\"},{\"text\":\"ğŸ–¥ï¸ æµè§ˆå™¨ API\",\"link\":\"/frontEnd/window/properties\",\"activeMatch\":\"^/frontEnd/window/\"},{\"text\":\"ğŸš€ ç°ä»£æ¡†æ¶\",\"link\":\"/frontEnd/web/vue\",\"activeMatch\":\"^/frontEnd/web/\"}]},{\"text\":\"âš™ï¸ åç«¯æŠ€æœ¯\",\"activeMatch\":\"^/afterEnd/\",\"items\":[{\"text\":\"ğŸŸ¢ Node.js\",\"link\":\"/afterEnd/node/\",\"activeMatch\":\"^/afterEnd/node/\"},{\"text\":\"ğŸš‚ Node æ¡†æ¶\",\"link\":\"/afterEnd/express/express\",\"activeMatch\":\"^/afterEnd/express/\"},{\"text\":\"ğŸ—„ï¸ æ•°æ®åº“\",\"link\":\"/afterEnd/database/mysql\",\"activeMatch\":\"^/afterEnd/database/\"},{\"text\":\"ğŸŒ æœåŠ¡å™¨\",\"link\":\"/afterEnd/server/nginx\",\"activeMatch\":\"^/afterEnd/server/\"}]},{\"text\":\"ğŸŒ ç½‘ç»œå·¥ç¨‹\",\"activeMatch\":\"^/network/\",\"items\":[{\"text\":\"ğŸ“¡ HTTP åè®®\",\"link\":\"/network/http/\",\"activeMatch\":\"^/network/http/\"},{\"text\":\"ğŸ”’ ç½‘ç»œå®‰å…¨\",\"link\":\"/network/httpSecure/https\",\"activeMatch\":\"^/network/httpSecure/\"},{\"text\":\"ğŸ“¨ ç½‘ç»œè¯·æ±‚\",\"link\":\"/network/ajaxAndFetch/ajax\",\"activeMatch\":\"^/network/ajaxAndFetch/\"}]},{\"text\":\"ğŸ› ï¸ å¼€å‘å·¥å…·\",\"activeMatch\":\"^/tools/\",\"items\":[{\"text\":\"ğŸ“¦ æ„å»ºå·¥å…·\",\"link\":\"/tools/buildTools/vite\",\"activeMatch\":\"^/tools/buildTools/\"},{\"text\":\"ğŸ“š å¸¸ç”¨åŒ…\",\"link\":\"/tools/package/lodash\",\"activeMatch\":\"^/tools/package/\"},{\"text\":\"ğŸ“‹ å¼€å‘è§„èŒƒ\",\"link\":\"/tools/stardard/git\",\"activeMatch\":\"^/tools/stardard/\"},{\"text\":\"â“ é—®é¢˜é›†åˆ\",\"link\":\"/tools/questions/handwrite\",\"activeMatch\":\"^/tools/questions/\"}]},{\"text\":\"ğŸ“± è·¨ç«¯å¼€å‘\",\"activeMatch\":\"^/spanEnd/\",\"items\":[{\"text\":\"ğŸ¯ Taro\",\"link\":\"/spanEnd/Taro/\",\"activeMatch\":\"^/spanEnd/Taro/\"},{\"text\":\"ğŸ¦„ uni-app\",\"link\":\"/spanEnd/uniapp/\",\"activeMatch\":\"^/spanEnd/uniapp/\"},{\"text\":\"ğŸ’» Electron\",\"link\":\"/spanEnd/electron\",\"activeMatch\":\"^/spanEnd/electron\"}]},{\"text\":\"âš¡ æ€§èƒ½ä¼˜åŒ–\",\"link\":\"/performace/performace\",\"activeMatch\":\"^/performace/\"}],\"sidebar\":{\"/frontEnd/\":[{\"text\":\"ğŸ¨ CSS & HTML\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ“‹ HTML åŸºç¡€\",\"link\":\"/frontEnd/css/html\"},{\"text\":\"ğŸ“„ DOM æ“ä½œ\",\"link\":\"/frontEnd/css/dom\"},{\"text\":\"ğŸ¯ CSS é€‰æ‹©å™¨\",\"link\":\"/frontEnd/css/selector\"},{\"text\":\"ğŸ“ CSS Layout å¸ƒå±€\",\"link\":\"/frontEnd/css/layout\"},{\"text\":\"ğŸ­ CSS å‡½æ•°\",\"link\":\"/frontEnd/css/function\"},{\"text\":\"ğŸ¬ CSS Animation åŠ¨ç”»\",\"link\":\"/frontEnd/css/animation\"},{\"text\":\"ğŸ”„ CSS Transform å˜æ¢\",\"link\":\"/frontEnd/css/transform\"},{\"text\":\"ğŸ“ Less é¢„å¤„ç†\",\"link\":\"/frontEnd/css/less\"},{\"text\":\"ğŸ¨ Sass é¢„å¤„ç†\",\"link\":\"/frontEnd/css/sass\"},{\"text\":\"ğŸ“ At-Rules\",\"link\":\"/frontEnd/css/atRules\"}]},{\"text\":\"âš¡ JavaScript æ ¸å¿ƒ\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ JavaScript åŸºç¡€\",\"link\":\"/frontEnd/javascript/\"},{\"text\":\"ğŸ¯ JavaScript å¯¹è±¡\",\"link\":\"/frontEnd/javascript/object\"},{\"text\":\"ğŸ”— Proxy ä»£ç†\",\"link\":\"/frontEnd/javascript/proxy\"},{\"text\":\"ğŸ“ RegExp æ­£åˆ™è¡¨è¾¾å¼\",\"link\":\"/frontEnd/javascript/RegExp\"},{\"text\":\"ğŸ”¢ Set & Map é›†åˆ\",\"link\":\"/frontEnd/javascript/setAndMap\"},{\"text\":\"âš ï¸ Error é”™è¯¯å¤„ç†\",\"link\":\"/frontEnd/javascript/Error\"},{\"text\":\"ğŸŒ Intl å›½é™…åŒ–\",\"link\":\"/frontEnd/javascript/Intl\"},{\"text\":\"ğŸ“Š JSON å¤„ç†\",\"link\":\"/frontEnd/javascript/json\"},{\"text\":\"ğŸ’¾ ArrayBuffer äºŒè¿›åˆ¶æ•°æ®\",\"link\":\"/frontEnd/javascript/ArrayBuffer\"},{\"text\":\"ğŸ”’ Atomics åŸå­æ“ä½œ\",\"link\":\"/frontEnd/javascript/Atomics\"}]},{\"text\":\"ğŸ–¥ï¸ æµè§ˆå™¨ API\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸŒ Window çª—å£å±æ€§\",\"link\":\"/frontEnd/window/properties\"},{\"text\":\"ğŸª Window äº‹ä»¶\",\"link\":\"/frontEnd/window/events\"},{\"text\":\"ğŸ”§ Window å‡½æ•°\",\"link\":\"/frontEnd/window/function\"},{\"text\":\"ğŸ‘€ Observer è§‚å¯Ÿè€…\",\"link\":\"/frontEnd/window/observer\"},{\"text\":\"ğŸ“ å…ƒç´ å°ºå¯¸\",\"link\":\"/frontEnd/window/offsetWidth\"},{\"text\":\"ğŸ¨ Canvas ç»˜å›¾\",\"link\":\"/frontEnd/window/Canvas\"},{\"text\":\"ğŸ” Crypto åŠ å¯† API\",\"link\":\"/frontEnd/window/crypto\"},{\"text\":\"ğŸ—„ï¸ IndexedDB æ•°æ®åº“\",\"link\":\"/frontEnd/window/indexedDB\"},{\"text\":\"ğŸ§­ Navigator æµè§ˆå™¨å±æ€§\",\"link\":\"/frontEnd/window/navigator\"},{\"text\":\"ğŸ”§ Navigator æµè§ˆå™¨æ–¹æ³•\",\"link\":\"/frontEnd/window/navigatorFun\"},{\"text\":\"ğŸ’³ Payment æ”¯ä»˜ API\",\"link\":\"/frontEnd/window/payment\"},{\"text\":\"ğŸ“Š Performance æ€§èƒ½ç›‘æ§\",\"link\":\"/frontEnd/window/Performance\"},{\"text\":\"ğŸ¤ Speech è¯­éŸ³ API\",\"link\":\"/frontEnd/window/speech\"},{\"text\":\"ğŸŒŠ Stream æµå¤„ç†\",\"link\":\"/frontEnd/window/stream\"},{\"text\":\"ğŸ”— Socket é€šä¿¡\",\"link\":\"/frontEnd/window/Socket\"},{\"text\":\"ğŸ› ï¸ Service Worker\",\"link\":\"/frontEnd/window/serviceWorker\"},{\"text\":\"ğŸ‘· Web Worker\",\"link\":\"/frontEnd/window/webWorker\"},{\"text\":\"ğŸ§© Web Components\",\"link\":\"/frontEnd/window/webComponents\"},{\"text\":\"ğŸ“¹ Web RTC\",\"link\":\"/frontEnd/window/webRTC\"},{\"text\":\"ğŸŒ Web API\",\"link\":\"/frontEnd/window/webAPI\"},{\"text\":\"ğŸ§­ Window è·¯ç”±\",\"link\":\"/frontEnd/window/route\"}]},{\"text\":\"ğŸš€ ç°ä»£æ¡†æ¶\",\"collapsed\":false,\"items\":[{\"text\":\"âš¡ VitePress é™æ€ç«™ç‚¹\",\"link\":\"/frontEnd/web/VitePress\"},{\"text\":\"ğŸ”· TypeScript è¯­è¨€\",\"link\":\"/frontEnd/web/TypeScript\"},{\"text\":\"ğŸ’š Vue.js æ¡†æ¶\",\"link\":\"/frontEnd/web/vue\"},{\"text\":\"ğŸ­ Svelte æ¡†æ¶\",\"link\":\"/frontEnd/web/svelte\"},{\"text\":\"ğŸ’ jQuery åº“\",\"link\":\"/frontEnd/web/jQuery\"},{\"text\":\"ğŸš€ Nuxt.js æ¡†æ¶\",\"link\":\"/frontEnd/web/nuxt\"},{\"text\":\"ğŸ”§ Amis ä½ä»£ç æ¡†æ¶\",\"link\":\"/frontEnd/web/lessCode\"},{\"text\":\"ğŸ—ï¸ qiankun å¾®å‰ç«¯æ¡†æ¶\",\"link\":\"/frontEnd/web/qiankun\"}]}],\"/afterEnd/\":[{\"text\":\"ğŸŸ¢ Node.js\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ“¦ Node.js æ¦‚è¿°\",\"link\":\"/afterEnd/node/\"},{\"text\":\"ğŸ“¦ æ¨¡å—ç³»ç»Ÿ\",\"link\":\"/afterEnd/node/module\"},{\"text\":\"ğŸŒ HTTP æ¨¡å—\",\"link\":\"/afterEnd/node/server\"},{\"text\":\"ğŸ”§ å®ç”¨å·¥å…·\",\"link\":\"/afterEnd/node/util\"},{\"text\":\"ğŸ“‚ æ–‡ä»¶ç³»ç»Ÿ\",\"link\":\"/afterEnd/node/fs\"},{\"text\":\"ğŸ“ è·¯å¾„å¤„ç†\",\"link\":\"/afterEnd/node/path\"},{\"text\":\"âš™ï¸ è¿›ç¨‹ç®¡ç†\",\"link\":\"/afterEnd/node/process\"},{\"text\":\"ğŸ” æ–­è¨€åº“\",\"link\":\"/afterEnd/node/assert\"},{\"text\":\"ğŸ’¾ ç¼“å†²åŒº\",\"link\":\"/afterEnd/node/buffer\"},{\"text\":\"ğŸ“¡ äº‹ä»¶ç³»ç»Ÿ\",\"link\":\"/afterEnd/node/events\"},{\"text\":\"ğŸŒŠ æµå¤„ç†\",\"link\":\"/afterEnd/node/stream\"},{\"text\":\"ğŸ”— æŸ¥è¯¢å­—ç¬¦ä¸²\",\"link\":\"/afterEnd/node/querystring\"},{\"text\":\"ğŸ“ è¯»å–è¡Œ\",\"link\":\"/afterEnd/node/readline\"},{\"text\":\"ğŸ•·ï¸ ç½‘ç»œçˆ¬è™«\",\"link\":\"/afterEnd/node/reptile\"},{\"text\":\"ğŸš€ HTTP/2\",\"link\":\"/afterEnd/node/http2\"},{\"text\":\"ğŸ§ª æµ‹è¯•å·¥å…·\",\"link\":\"/afterEnd/node/test\"}]},{\"text\":\"ğŸš‚ Node æ¡†æ¶\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸŒ Express æ¡†æ¶\",\"link\":\"/afterEnd/express/express\"},{\"text\":\"ğŸ¥š Egg.js æ¡†æ¶\",\"link\":\"/afterEnd/express/egg\"},{\"text\":\"ğŸ¯ Koa.js æ¡†æ¶\",\"link\":\"/afterEnd/express/koa\"}]},{\"text\":\"ğŸ—„ï¸ æ•°æ®åº“\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ¬ MySQL æ•°æ®åº“\",\"link\":\"/afterEnd/database/mysql\"},{\"text\":\"ğŸƒ MongoDB æ•°æ®åº“\",\"link\":\"/afterEnd/database/mongoose\"}]},{\"text\":\"ğŸŒ æœåŠ¡å™¨\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸŒŠ Nginx æœåŠ¡å™¨\",\"link\":\"/afterEnd/server/nginx\"},{\"text\":\"âš¡ Nitro æœåŠ¡å™¨\",\"link\":\"/afterEnd/server/nitro\"}]}],\"/network/\":[{\"text\":\"ğŸ“¡ HTTP åè®®\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸŒ HTTP åŸºç¡€\",\"link\":\"/network/http/\"},{\"text\":\"ğŸ“Š çŠ¶æ€ç \",\"link\":\"/network/http/status\"},{\"text\":\"ğŸ­ MIME ç±»å‹\",\"link\":\"/network/http/mime\"},{\"text\":\"âœ… Accept åå•†\",\"link\":\"/network/http/accept\"},{\"text\":\"ğŸ”— è¿æ¥ç®¡ç†\",\"link\":\"/network/http/connection\"},{\"text\":\"ğŸ“„ èŒƒå›´è¯·æ±‚\",\"link\":\"/network/http/range\"},{\"text\":\"ğŸ—ï¸ OSI æ¨¡å‹\",\"link\":\"/network/http/osi\"}]},{\"text\":\"ğŸ”’ ç½‘ç»œå®‰å…¨\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ” HTTPS åè®®\",\"link\":\"/network/httpSecure/https\"},{\"text\":\"ğŸ›¡ï¸ å†…å®¹å®‰å…¨\",\"link\":\"/network/httpSecure/contentSecurity\"},{\"text\":\"ğŸŒ è·¨åŸŸå¤„ç†\",\"link\":\"/network/httpSecure/crossOrigin\"},{\"text\":\"ğŸ”‘ æƒé™ç®¡ç†\",\"link\":\"/network/httpSecure/premission\"},{\"text\":\"ğŸ›¡ï¸ å®‰å…¨ç­–ç•¥\",\"link\":\"/network/httpSecure/secure\"}]},{\"text\":\"ğŸ“¨ ç½‘ç»œè¯·æ±‚\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ“¡ Ajax æŠ€æœ¯\",\"link\":\"/network/ajaxAndFetch/ajax\"},{\"text\":\"ğŸš€ Fetch API\",\"link\":\"/network/ajaxAndFetch/fetch\"},{\"text\":\"ğŸ“Š Axios åº“\",\"link\":\"/network/ajaxAndFetch/axios\"}]}],\"/tools/\":[{\"text\":\"ğŸ“¦ æ„å»ºå·¥å…·\",\"collapsed\":false,\"items\":[{\"text\":\"âš¡ Vite\",\"link\":\"/tools/buildTools/vite\"},{\"text\":\"ğŸ“¦ Webpack\",\"link\":\"/tools/buildTools/webpack\"},{\"text\":\"ğŸ”§ Rollup\",\"link\":\"/tools/buildTools/rollup\"},{\"text\":\"ğŸŒŠ Gulp\",\"link\":\"/tools/buildTools/gulp\"},{\"text\":\"ğŸ—ï¸ è„šæ‰‹æ¶\",\"link\":\"/tools/buildTools/scaffolder\"},{\"text\":\"ğŸ“¦ NPM åŒ…ç®¡ç†\",\"link\":\"/tools/buildTools/npm\"},{\"text\":\"ğŸ¯ Lerna åŒ…ç®¡ç†\",\"link\":\"/tools/buildTools/lerna\"},{\"text\":\"ğŸ³ Docker å®¹å™¨\",\"link\":\"/tools/buildTools/docker\"},{\"text\":\"ğŸš€ Jenkins æŒç»­é›†æˆ\",\"link\":\"/tools/buildTools/Jenkins\"},{\"text\":\"âš™ï¸ GitHub Actions\",\"link\":\"/tools/buildTools/actions\"}]},{\"text\":\"ğŸ“š å¸¸ç”¨åŒ…\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ› ï¸ Lodash å·¥å…·åº“\",\"link\":\"/tools/package/lodash\"},{\"text\":\"ğŸ“Š ECharts æ•°æ®å¯è§†åŒ–\",\"link\":\"/tools/package/echarts\"},{\"text\":\"ğŸ“ˆ AntV æ•°æ®å¯è§†åŒ–\",\"link\":\"/tools/package/antv\"},{\"text\":\"ğŸ“Š D3.js æ•°æ®å¯è§†åŒ–\",\"link\":\"/tools/package/D3\"},{\"text\":\"ğŸ¨ Iconfont å›¾æ ‡åº“\",\"link\":\"/tools/package/iconfont\"},{\"text\":\"ğŸ­ Anime.js åŠ¨ç”»åº“\",\"link\":\"/tools/package/anime\"},{\"text\":\"ğŸ¬ Lottie åŠ¨ç”»åº“\",\"link\":\"/tools/package/Lottie\"},{\"text\":\"âš¡ Velocity.js åŠ¨ç”»åº“\",\"link\":\"/tools/package/Velocity\"},{\"text\":\"ğŸ¨ Bootstrap CSS æ¡†æ¶\",\"link\":\"/tools/package/bootstrap\"},{\"text\":\"ğŸ¨ Tailwind CSS æ¡†æ¶\",\"link\":\"/tools/package/tailwindcss\"},{\"text\":\"ğŸ¨ SortableJS æ‹–æ‹½åº“\",\"link\":\"/tools/package/sortablejs\"},{\"text\":\"ğŸŒ Cesium åœ°å›¾\",\"link\":\"/tools/package/Cesium\"},{\"text\":\"ğŸ“… Day.js æ—¥æœŸå¤„ç†\",\"link\":\"/tools/package/dayjs\"},{\"text\":\"ğŸ–¼ï¸ DomToImage æˆªå›¾\",\"link\":\"/tools/package/DomToImage\"},{\"text\":\"ğŸ” Fuse.js æœç´¢\",\"link\":\"/tools/package/fuse\"},{\"text\":\"ğŸ“± Hybrid æ··åˆå¼€å‘\",\"link\":\"/tools/package/hybrid\"},{\"text\":\"ğŸ­ Mock.js æ¨¡æ‹Ÿæ•°æ®\",\"link\":\"/tools/package/mockjs\"},{\"text\":\"ğŸ“Š Sentry é”™è¯¯ç›‘æ§\",\"link\":\"/tools/package/sentry\"},{\"text\":\"ğŸ§© SodaJS æ¨¡æ¿å¼•æ“\",\"link\":\"/tools/package/sodajs\"},{\"text\":\"ğŸ“š Storybook ç»„ä»¶æµ‹è¯•\",\"link\":\"/tools/package/Storybook\"},{\"text\":\"ğŸ“ TinyMCE å¯Œæ–‡æœ¬ç¼–è¾‘å™¨\",\"link\":\"/tools/package/TinyMCE\"},{\"text\":\"ğŸŒ Vue I18n å›½é™…åŒ–\",\"link\":\"/tools/package/vueI18n\"},{\"text\":\"ğŸ Pinia çŠ¶æ€ç®¡ç†\",\"link\":\"/tools/package/pinia\"},{\"text\":\"ğŸ§­ Vue Router è·¯ç”±\",\"link\":\"/tools/package/VueRouter\"},{\"text\":\"ğŸ’¾ Vuex Persist çŠ¶æ€ç®¡ç†\",\"link\":\"/tools/package/vuexPersist\"},{\"text\":\"ğŸ” Whistle ä»£ç†\",\"link\":\"/tools/package/whistle\"},{\"text\":\"ğŸ“‹ Tasks æ–‡ä»¶\",\"link\":\"/tools/package/tasksfile\"},{\"text\":\"ğŸ¬ animate.css åŠ¨ç”»åº“\",\"link\":\"/tools/package/animate\"},{\"text\":\"ğŸ“‹ SignalR å®æ—¶é€šä¿¡\",\"link\":\"/tools/package/SignalRä½¿ç”¨æŒ‡å—\"},{\"text\":\"ğŸ“Š Mermaid æ•™ç¨‹\",\"link\":\"/tools/package/mermaid\"},{\"text\":\"ğŸŒ² Cypress æµ‹è¯•æ¡†æ¶\",\"link\":\"/tools/package/test/Cypress\"}]},{\"text\":\"ğŸ“‹ å¼€å‘è§„èŒƒ\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ”„ Git ç‰ˆæœ¬æ§åˆ¶\",\"link\":\"/tools/stardard/git\"},{\"text\":\"âœ¨ Prettier ä»£ç æ ¼å¼åŒ–\",\"link\":\"/tools/stardard/prettier\"},{\"text\":\"ğŸ” ESLint ä»£ç è§„èŒƒ\",\"link\":\"/tools/stardard/eslint\"},{\"text\":\"ğŸ’» VS Code ç¼–è¾‘å™¨\",\"link\":\"/tools/stardard/vscode\"},{\"text\":\"ğŸ“– å‘½åè§„èŒƒ\",\"link\":\"/tools/stardard/naming\"},{\"text\":\"ğŸ“Š è´¨é‡ç®¡æ§\",\"link\":\"/tools/stardard/quality\"}]},{\"text\":\"â“ é—®é¢˜é›†åˆ\",\"collapsed\":false,\"items\":[{\"text\":\"ï¿½ å­¦ä¹ æŒ‡å—\",\"link\":\"/tools/study\"},{\"text\":\"âœï¸ æ‰‹å†™é¢˜æ±‡æ€»\",\"link\":\"/tools/questions/handwrite\"},{\"text\":\"ğŸ§® ç®—æ³•é¢˜è§£\",\"link\":\"/tools/questions/algorithm\"},{\"text\":\"ğŸ¨ è®¾è®¡æ¨¡å¼\",\"link\":\"/tools/questions/designMode\"},{\"text\":\"ğŸ è°ƒè¯•æŠ€å·§\",\"link\":\"/tools/questions/debugging\"},{\"text\":\"ğŸ”„ å…¼å®¹æ€§å¤„ç†\",\"link\":\"/tools/questions/compatibility\"},{\"text\":\"ğŸ“± ç§»åŠ¨ç«¯é€‚é…\",\"link\":\"/tools/questions/mobileFit\"},{\"text\":\"ğŸ¤– æœºå™¨äººåè®®\",\"link\":\"/tools/questions/robots\"},{\"text\":\"ğŸ–¨ï¸ ä»£ç è¾“å‡º\",\"link\":\"/tools/questions/print\"},{\"text\":\"ğŸ’³ å¾®ä¿¡æ”¯ä»˜\",\"link\":\"/tools/questions/wechatPay\"},{\"text\":\"ğŸ—ï¸ ç³»ç»Ÿè®¾è®¡\",\"link\":\"/tools/questions/system\"},{\"text\":\"ğŸ“Š Grafana ç›‘æ§\",\"link\":\"/tools/questions/Grafana\"},{\"text\":\"ğŸ” NPM ç§æœ\",\"link\":\"/tools/questions/npmHub\"},{\"text\":\"ğŸ“„ LeetCode\",\"link\":\"/tools/questions/leetCode\"},{\"text\":\"â“ ç»¼åˆé—®é¢˜\",\"link\":\"/tools/questions/questions\"}]}],\"/spanEnd/\":[{\"text\":\"ğŸ¯ Taro æ¡†æ¶\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ Taro å…¥é—¨\",\"link\":\"/spanEnd/Taro/\"},{\"text\":\"âš™ï¸ åŸºç¡€é…ç½®\",\"link\":\"/spanEnd/Taro/basic\"},{\"text\":\"ğŸ”§ é…ç½®è¯¦è§£\",\"link\":\"/spanEnd/Taro/config\"},{\"text\":\"ğŸ“Š API ä½¿ç”¨\",\"link\":\"/spanEnd/Taro/api\"},{\"text\":\"ğŸ“± åª’ä½“ç»„ä»¶\",\"link\":\"/spanEnd/Taro/media\"},{\"text\":\"ğŸ“‹ è¡¨å•ç»„ä»¶\",\"link\":\"/spanEnd/Taro/form\"},{\"text\":\"ğŸ§­ å¯¼èˆªç³»ç»Ÿ\",\"link\":\"/spanEnd/Taro/navigator\"},{\"text\":\"ğŸŒ å¼€æ”¾èƒ½åŠ›\",\"link\":\"/spanEnd/Taro/open\"},{\"text\":\"ğŸ§­ è·¯ç”±ç®¡ç†\",\"link\":\"/spanEnd/Taro/router\"},{\"text\":\"ğŸ“¦ å®¹å™¨è§†å›¾\",\"link\":\"/spanEnd/Taro/viewContrainer\"},{\"text\":\"ğŸ’š Vue é›†æˆ\",\"link\":\"/spanEnd/Taro/vue\"},{\"text\":\"â˜ï¸ äº‘å¼€å‘\",\"link\":\"/spanEnd/Taro/cloud\"}]},{\"text\":\"ğŸ¦„ uni-app\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ uni-app å…¥é—¨\",\"link\":\"/spanEnd/uniapp/\"},{\"text\":\"ğŸ“Š API æ–‡æ¡£\",\"link\":\"/spanEnd/uniapp/api\"},{\"text\":\"ğŸ§© ç»„ä»¶åº“\",\"link\":\"/spanEnd/uniapp/components\"}]},{\"text\":\"ğŸ’» æ¡Œé¢åº”ç”¨\",\"collapsed\":false,\"items\":[{\"text\":\"âš¡ Electron\",\"link\":\"/spanEnd/electron\"}]}],\"/performace/\":[{\"text\":\"âš¡ æ€§èƒ½ä¼˜åŒ–\",\"collapsed\":false,\"items\":[{\"text\":\"ğŸ“Š æ€§èƒ½åˆ†æ\",\"link\":\"/performace/performace\"},{\"text\":\"ğŸ–¼ï¸ å›¾ç‰‡ä¼˜åŒ–\",\"link\":\"/performace/image\"},{\"text\":\"ğŸŒ DNS é¢„è§£æ\",\"link\":\"/performace/dnsPrefetch\"},{\"text\":\"ğŸ“¦ èµ„æºé¢„åŠ è½½\",\"link\":\"/performace/prefetch\"},{\"text\":\"ğŸ” SEO ä¼˜åŒ–\",\"link\":\"/performace/seo\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/jinxi1334640772\"},{\"icon\":{\"svg\":\"<svg role=\\\"img\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><title>æ˜é‡‘</title><path d=\\\"M12 14.316l7.454-5.88-2.022-1.625L12 11.1l-.004.003-5.432-4.289-2.022 1.625L12 14.316z\\\"/><path d=\\\"M12 0l12 9.5-2.518 2L12 4.5 2.518 11.5 0 9.5 12 0z\\\"/></svg>\"},\"link\":\"https://juejin.cn/user/1451011080204040\"}],\"search\":{\"provider\":\"local\",\"options\":{\"translations\":{\"button\":{\"buttonText\":\"æœç´¢æ–‡æ¡£\",\"buttonAriaLabel\":\"æœç´¢æ–‡æ¡£\"},\"modal\":{\"noResultsText\":\"æ— æ³•æ‰¾åˆ°ç›¸å…³ç»“æœ\",\"resetButtonTitle\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"footer\":{\"selectText\":\"é€‰æ‹©\",\"navigateText\":\"åˆ‡æ¢\",\"closeText\":\"å…³é—­\"}}}}},\"editLink\":{\"pattern\":\"https://github.com/jinxi1334640772/jinxi1334640772.github.io/edit/master/docs/:path\",\"text\":\"åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µé¢\"},\"footer\":{\"message\":\"åŸºäº <a href=\\\"https://vitepress.dev/\\\" target=\\\"_blank\\\">VitePress</a> æ„å»ºçš„æŠ€æœ¯æ–‡æ¡£ç«™ç‚¹\",\"copyright\":\"Copyright Â© 2024 <a href=\\\"https://github.com/jinxi1334640772\\\" target=\\\"_blank\\\">å¼ è¿›å–œ</a>\"},\"outline\":{\"level\":[2,3],\"label\":\"é¡µé¢å¯¼èˆª\"},\"returnToTopLabel\":\"å›åˆ°é¡¶éƒ¨\",\"darkModeSwitchLabel\":\"ä¸»é¢˜\",\"lightModeSwitchTitle\":\"åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼\",\"darkModeSwitchTitle\":\"åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼\",\"sidebarMenuLabel\":\"èœå•\",\"externalLinkIcon\":true,\"lastUpdated\":{\"text\":\"æœ€åæ›´æ–°äº\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"docFooter\":{\"prev\":\"ä¸Šä¸€é¡µ\",\"next\":\"ä¸‹ä¸€é¡µ\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>