---
title: ğŸ“Š AntV æ•°æ®å¯è§†åŒ–è§£å†³æ–¹æ¡ˆå®Œå…¨æŒ‡å—
description: èš‚èšä¼ä¸šçº§æ•°æ®å¯è§†åŒ–è§£å†³æ–¹æ¡ˆï¼ŒåŒ…å« G2ã€G6ã€X6ã€L7ã€S2 ç­‰å¤šä¸ªäº§å“ï¼Œè®©äººä»¬åœ¨æ•°æ®ä¸–ç•Œé‡Œè·å¾—è§†è§‰åŒ–æ€è€ƒèƒ½åŠ›ï¼Œæä¾›ç»Ÿè®¡å›¾è¡¨ã€å…³ç³»å›¾ã€æµç¨‹å›¾ã€åœ°å›¾ã€è¡¨æ ¼ç­‰å…¨æ–¹ä½å¯è§†åŒ–èƒ½åŠ›
outline: deep
---

# ğŸ“Š AntV æ•°æ®å¯è§†åŒ–è§£å†³æ–¹æ¡ˆå®Œå…¨æŒ‡å—

> èš‚èšä¼ä¸šçº§æ•°æ®å¯è§†åŒ–è§£å†³æ–¹æ¡ˆï¼Œè®©äººä»¬åœ¨æ•°æ®ä¸–ç•Œé‡Œè·å¾—è§†è§‰åŒ–æ€è€ƒèƒ½åŠ›

::: info ğŸŒŸ å®˜æ–¹èµ„æº
- **å®˜ç½‘**: [https://antv.antgroup.com/](https://antv.antgroup.com/)
- **GitHub**: [https://github.com/antvis](https://github.com/antvis)
- **æ ¸å¿ƒç†å¿µ**: è®©äººä»¬åœ¨æ•°æ®ä¸–ç•Œé‡Œè·å¾—è§†è§‰åŒ–æ€è€ƒèƒ½åŠ›
- **åº”ç”¨åœºæ™¯**: æŠ¥è¡¨æ­å»ºã€æ•°æ®æ¢ç´¢ã€å¯è§†åŒ–å™äº‹ã€ä¸šåŠ¡åˆ†æ
:::

<details>
<summary>ğŸ“‹ ç›®å½•å¯¼èˆª</summary>

[[toc]]

</details>

## ğŸ¯ AntV äº§å“çŸ©é˜µæ¦‚è§ˆ

AntV æ˜¯èš‚èšé›†å›¢å…¨æ–°ä¸€ä»£æ•°æ®å¯è§†åŒ–è§£å†³æ–¹æ¡ˆï¼Œæä¾›äº†å®Œæ•´çš„äº§å“çŸ©é˜µï¼Œè¦†ç›–ç»Ÿè®¡å›¾è¡¨ã€å…³ç³»å›¾ã€æµç¨‹å›¾ã€åœ°å›¾å¯è§†åŒ–ç­‰å„ä¸ªé¢†åŸŸã€‚

### ğŸ“ˆ æ¡Œé¢ç«¯äº§å“

| äº§å“ | ç”¨é€” | ç‰¹è‰² | é€‚ç”¨åœºæ™¯ | å­¦ä¹ æˆæœ¬ |
|------|------|------|----------|----------|
| **G2** | ç»Ÿè®¡å›¾è¡¨ | ğŸ¨ æ¸è¿›å¼è¯­æ³•ã€å‡½æ•°å¼API | æ•°æ®åˆ†æã€æŠ¥è¡¨åˆ¶ä½œ | â­â­â­ |
| **S2** | å¤šç»´è¡¨æ ¼ | ğŸ“Š å¤šç»´åˆ†æã€é€è§†è¡¨ | å¤æ‚æ•°æ®å±•ç¤º | â­â­â­â­ |
| **G6** | å…³ç³»å›¾ | ğŸ”— å›¾åˆ†æã€ç½‘ç»œå›¾ | å…³ç³»åˆ†æã€æ‹“æ‰‘å›¾ | â­â­â­â­ |
| **X6** | æµç¨‹å›¾ | ğŸ”„ å¯è§†åŒ–å»ºæ¨¡ | æµç¨‹è®¾è®¡ã€æ¶æ„å›¾ | â­â­â­â­â­ |
| **L7** | åœ°å›¾ | ğŸ—ºï¸ åœ°ç†å¯è§†åŒ– | åœ°ç†æ•°æ®åˆ†æ | â­â­â­â­ |

### ğŸ“± ç§»åŠ¨ç«¯äº§å“

| äº§å“ | ç”¨é€” | ç‰¹è‰² | å¯¹åº”æ¡Œé¢ç‰ˆ | çŠ¶æ€ |
|------|------|------|------------|------|
| **F2** | ç§»åŠ¨ç»Ÿè®¡å›¾ | ğŸ“± è½»é‡çº§ã€è§¦æ§ä¼˜åŒ– | G2 | ğŸ”„ ç»´æŠ¤ä¸­ |
| **F6** | ç§»åŠ¨å…³ç³»å›¾ | ğŸ”— ç§»åŠ¨ç«¯å›¾åˆ†æ | G6 | ğŸ”„ ç»´æŠ¤ä¸­ |
| **F7** | ç§»åŠ¨åœ°å›¾ | ğŸ—ºï¸ ç§»åŠ¨åœ°ç†å¯è§†åŒ– | L7 | ğŸ”„ ç»´æŠ¤ä¸­ |

### ğŸ› ï¸ å·¥å…·å’Œç”Ÿæ€

| å·¥å…· | ç”¨é€” | ç‰¹è‰² | é€‚ç”¨äººç¾¤ |
|------|------|------|----------|
| **ChartCube** | å›¾è¡¨é…ç½®å™¨ | ğŸ›ï¸ å¯è§†åŒ–é…ç½® | éæŠ€æœ¯äººå‘˜ |
| **Graphin** | å›¾åˆ†æåº”ç”¨ | ğŸ•¸ï¸ å¼€ç®±å³ç”¨ | å›¾åˆ†æéœ€æ±‚ |
| **DipperMap** | åœ°å›¾åº”ç”¨ | ğŸ—ºï¸ åœ°ç†åˆ†æå·¥å…· | åœ°ç†æ•°æ®åˆ†æ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“¦ ç¯å¢ƒè¦æ±‚

```json
{
  "engines": {
    "node": ">=12.0.0"
  },
  "peerDependencies": {
    "react": ">=16.8.0" // å¦‚ä½¿ç”¨ React ç»„ä»¶
  }
}
```

### ğŸ› ï¸ å®‰è£…æ–¹å¼

#### NPM/Yarn å®‰è£…

```bash
# G2 ç»Ÿè®¡å›¾è¡¨
npm install @antv/g2
# æˆ–
yarn add @antv/g2

# G6 å…³ç³»å›¾
npm install @antv/g6
yarn add @antv/g6

# X6 æµç¨‹å›¾
npm install @antv/x6
yarn add @antv/x6

# L7 åœ°å›¾
npm install @antv/l7
yarn add @antv/l7

# S2 å¤šç»´è¡¨æ ¼
npm install @antv/s2
yarn add @antv/s2
```

#### CDN å¼•å…¥

```html
<!-- G2 -->
<script src="https://gw.alipayobjects.com/os/lib/antv/g2/4.2.8/dist/g2.min.js"></script>

<!-- G6 -->
<script src="https://gw.alipayobjects.com/os/lib/antv/g6/4.8.11/dist/g6.min.js"></script>

<!-- X6 -->
<script src="https://unpkg.com/@antv/x6/dist/x6.js"></script>

<!-- L7 -->
<script src="https://unpkg.com/@antv/l7"></script>
```

## ğŸ“Š G2 ç»Ÿè®¡å›¾è¡¨è¯¦è§£

G2 æ˜¯ä¸€å¥—é¢å‘å¸¸è§„ç»Ÿè®¡å›¾è¡¨ï¼Œä»¥æ•°æ®é©±åŠ¨çš„é«˜äº¤äº’å¯è§†åŒ–å›¾å½¢è¯­æ³•ï¼Œå…·æœ‰é«˜åº¦çš„æ˜“ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚

### ğŸ¨ æ ¸å¿ƒæ¦‚å¿µ

| æ¦‚å¿µ | ä½œç”¨ | è¯´æ˜ | åº”ç”¨ |
|------|------|------|------|
| **æ ‡è®° (Mark)** | ç»˜åˆ¶æ•°æ®é©±åŠ¨çš„å›¾å½¢ | G2 çš„åŸºæœ¬è§†è§‰å•å…ƒ | ç‚¹ã€çº¿ã€é¢ç­‰å›¾å½¢ |
| **è½¬æ¢ (Transform)** | æ´¾ç”Ÿæ•°æ® | æ•°æ®å¤„ç†å’Œåˆ†æ | åˆ†ç»„ã€æ’åºã€èšåˆ |
| **æ¯”ä¾‹å°º (Scale)** | æ•°æ®æ˜ å°„ | æŠ½è±¡æ•°æ®â†’è§†è§‰æ•°æ® | çº¿æ€§ã€å¯¹æ•°ã€æ—¶é—´å°ºåº¦ |
| **åæ ‡ç³» (Coordinate)** | ç©ºé—´å˜æ¢ | å¯¹ç©ºé—´é€šé“åº”ç”¨ç‚¹å˜æ¢ | ç›´è§’ã€æåæ ‡ç³» |
| **è§†å›¾å¤åˆ (Composition)** | è§†å›¾ç®¡ç† | ç®¡ç†å’Œå¢å¼ºè§†å›¾ | åˆ†é¢ã€è”åˆå›¾è¡¨ |
| **åŠ¨ç”» (Animation)** | åŠ¨æ€æ•ˆæœ | æ•°æ®é©±åŠ¨çš„åŠ¨ç”» | è¿‡æ¸¡ã€å…³é”®å¸§åŠ¨ç”» |
| **äº¤äº’ (Interaction)** | ç”¨æˆ·äº¤äº’ | æ“ä½œè§†å›¾å¹¶å±•ç°è¯¦ç»†ä¿¡æ¯ | ç¼©æ”¾ã€åˆ·é€‰ã€é«˜äº® |

### ğŸš€ åŸºç¡€ä½¿ç”¨ç¤ºä¾‹

```javascript
// å¼•å…¥ G2
import { Chart } from '@antv/g2';

// åˆ›å»ºå›¾è¡¨å®ä¾‹
const chart = new Chart({
  container: 'container',
    width: 800,
  height: 400,
  padding: [20, 40, 50, 40]
});

// åŸºç¡€æŸ±çŠ¶å›¾
chart
  .interval()
  .data([
    { name: 'A', value: 10 },
    { name: 'B', value: 20 },
    { name: 'C', value: 15 },
    { name: 'D', value: 25 }
  ])
  .encode('x', 'name')
  .encode('y', 'value')
  .encode('color', 'name');

// æ¸²æŸ“å›¾è¡¨
chart.render();
```

### ğŸ“ˆ å¸¸ç”¨å›¾è¡¨ç±»å‹

#### 1. æŸ±çŠ¶å›¾

```javascript
// åŸºç¡€æŸ±çŠ¶å›¾
const barChart = new Chart({
  container: 'bar-chart',
  width: 600,
  height: 400
});

barChart
    .interval()
    .data(data)
  .encode('x', 'category')
  .encode('y', 'value')
  .encode('color', 'category')
  .style('radius', 4)
  .animate('enter', { type: 'scaleInY' });

// åˆ†ç»„æŸ±çŠ¶å›¾
barChart
  .interval()
  .data(data)
  .encode('x', 'category')
  .encode('y', 'value')
  .encode('color', 'series')
  .encode('series', 'series')
  .style('maxWidth', 20);

// å †å æŸ±çŠ¶å›¾
barChart
  .interval()
  .data(data)
  .encode('x', 'category')
  .encode('y', 'value')
  .encode('color', 'series')
  .transform({ type: 'stackY' });
```

#### 2. æŠ˜çº¿å›¾

```javascript
// åŸºç¡€æŠ˜çº¿å›¾
const lineChart = new Chart({
  container: 'line-chart',
  width: 600,
  height: 400
});

lineChart
  .line()
  .data(data)
  .encode('x', 'date')
  .encode('y', 'value')
  .encode('color', 'series')
  .style('lineWidth', 2)
  .animate('enter', { type: 'pathIn' });

// æ·»åŠ æ•°æ®ç‚¹
lineChart
  .point()
  .data(data)
  .encode('x', 'date')
  .encode('y', 'value')
  .encode('color', 'series')
  .style('r', 3);

// é¢ç§¯å›¾
lineChart
  .area()
  .data(data)
  .encode('x', 'date')
  .encode('y', 'value')
  .encode('color', 'series')
  .style('fillOpacity', 0.6);
```

#### 3. é¥¼å›¾

```javascript
// åŸºç¡€é¥¼å›¾
const pieChart = new Chart({
  container: 'pie-chart',
  width: 400,
  height: 400
});

pieChart
  .interval()
  .data(data)
  .transform({ type: 'stackY' })
  .coordinate({ type: 'theta' })
  .encode('y', 'value')
  .encode('color', 'category')
  .style('stroke', '#fff')
  .style('lineWidth', 2)
  .animate('enter', { type: 'waveIn' });

// ç¯å½¢å›¾
pieChart
  .coordinate({ 
    type: 'theta',
    innerRadius: 0.4
  });

// æ·»åŠ æ ‡ç­¾
pieChart
  .text()
  .data(data)
  .encode('x', 'category')
  .encode('y', 'value')
  .encode('text', 'value')
  .style('textAlign', 'center');
```

#### 4. æ•£ç‚¹å›¾

```javascript
// æ•£ç‚¹å›¾
const scatterChart = new Chart({
  container: 'scatter-chart',
  width: 600,
  height: 400
});

scatterChart
  .point()
  .data(data)
  .encode('x', 'height')
  .encode('y', 'weight')
  .encode('color', 'gender')
  .encode('size', 'age')
  .style('fillOpacity', 0.7)
  .animate('enter', { type: 'scaleInX' });

// æ·»åŠ å›å½’çº¿
scatterChart
  .line()
  .data(data)
  .transform({ type: 'regression' })
  .encode('x', 'height')
  .encode('y', 'weight')
  .style('stroke', '#666')
  .style('strokeDasharray', [3, 3]);
```

### ğŸ›ï¸ é«˜çº§é…ç½®

#### ä¸»é¢˜é…ç½®

```javascript
import { register } from '@antv/g2';

// æ³¨å†Œè‡ªå®šä¹‰ä¸»é¢˜
register('theme.customTheme', {
  colors10: [
    '#FF6B3B', '#C23616', '#F79F1F', '#A3CB38',
    '#1289A7', '#D980FA', '#B53471', '#FFC312',
    '#C4E538', '#12CBC4'
  ],
  backgroundColor: '#f5f5f5',
  subColor: '#666',
  axis: {
    domainColor: '#d0d0d0',
    tickColor: '#d0d0d0',
    titleFill: '#444',
    labelFill: '#666'
  }
});

// ä½¿ç”¨ä¸»é¢˜
const chart = new Chart({
  container: 'container',
  theme: 'customTheme'
});
```

#### åŠ¨ç”»é…ç½®

```javascript
// å…¥åœºåŠ¨ç”»
chart
  .interval()
  .animate('enter', {
    type: 'scaleInY',
    duration: 1000,
    delay: (d, i) => i * 100
  });

// æ›´æ–°åŠ¨ç”»
chart
  .animate('update', {
    duration: 500,
    easing: 'easeQuadOut'
  });

// å‡ºåœºåŠ¨ç”»
chart
  .animate('exit', {
    type: 'fadeOut',
    duration: 300
  });
```

#### äº¤äº’é…ç½®

```javascript
// æ·»åŠ äº¤äº’
chart.interaction('brushXHighlight', {
  maskFill: 'rgba(255, 0, 0, 0.1)',
  maskStroke: '#ff0000'
});

chart.interaction('tooltip', {
  shared: true,
  title: 'date',
  body: {
    fields: ['value', 'category'],
    callback: (value, category) => ({
      name: category,
      value: `${value}ä¸‡`
    })
  }
});

chart.interaction('legend', {
  position: 'top',
  layout: 'horizontal'
});
```

## ğŸ”— G6 å…³ç³»å›¾è¯¦è§£

G6 æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å›¾å¯è§†åŒ–å¼•æ“ï¼Œæä¾›äº†ä¸°å¯Œçš„å›¾å¸ƒå±€ç®—æ³•å’Œäº¤äº’è¡Œä¸ºã€‚

### ğŸ—ï¸ åŸºç¡€æ¶æ„

```javascript
import G6 from '@antv/g6';

// åˆ›å»ºå›¾å®ä¾‹
const graph = new G6.Graph({
  container: 'container',
  width: 800,
  height: 600,
  // å¸ƒå±€é…ç½®
  layout: {
    type: 'force',
    preventOverlap: true,
    nodeSize: 30
  },
  // é»˜è®¤èŠ‚ç‚¹æ ·å¼
  defaultNode: {
    size: 30,
    style: {
      fill: '#C6E5FF',
      stroke: '#5B8FF9',
      lineWidth: 3
    },
    labelCfg: {
      style: {
        fill: '#000',
        fontSize: 14
      }
    }
  },
  // é»˜è®¤è¾¹æ ·å¼
  defaultEdge: {
    style: {
      stroke: '#e2e2e2',
      lineWidth: 2
    }
  },
  // èŠ‚ç‚¹çŠ¶æ€æ ·å¼
  nodeStateStyles: {
    hover: {
      fill: '#d3f261'
    },
    selected: {
      fill: '#f00'
    }
  },
  // è¾¹çŠ¶æ€æ ·å¼
  edgeStateStyles: {
    hover: {
      stroke: '#999'
    }
  },
  // äº¤äº’æ¨¡å¼
  modes: {
    default: [
      'drag-canvas',
      'zoom-canvas',
      'drag-node',
      'click-select'
    ]
  }
});

// æ•°æ®ç»“æ„
const data = {
  nodes: [
    { id: 'node1', label: 'Node 1' },
    { id: 'node2', label: 'Node 2' },
    { id: 'node3', label: 'Node 3' }
  ],
  edges: [
    { source: 'node1', target: 'node2' },
    { source: 'node2', target: 'node3' }
  ]
};

// æ¸²æŸ“å›¾
graph.data(data);
graph.render();
```

### ğŸ“ å¸ƒå±€ç®—æ³•

```javascript
// åŠ›å¯¼å‘å¸ƒå±€
graph.updateLayout({
  type: 'force',
  preventOverlap: true,
  nodeSize: 30,
  linkDistance: 100,
  nodeStrength: -30,
  edgeStrength: 0.1
});

// å±‚æ¬¡å¸ƒå±€
graph.updateLayout({
  type: 'dagre',
  rankdir: 'TB', // TB, BT, LR, RL
  align: 'DL',   // UL, UR, DL, DR
  nodesep: 20,
  ranksep: 50
});

// åœ†å½¢å¸ƒå±€
graph.updateLayout({
  type: 'circular',
  radius: 200,
  startRadius: 10,
  endRadius: 300,
  clockwise: true,
  divisions: 5
});

// ç½‘æ ¼å¸ƒå±€
graph.updateLayout({
  type: 'grid',
  rows: 5,
  cols: 5,
  sortBy: 'degree'
});
```

### ğŸ¨ è‡ªå®šä¹‰èŠ‚ç‚¹å’Œè¾¹

```javascript
// æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹
G6.registerNode('custom-node', {
  draw(cfg, group) {
    const rect = group.addShape('rect', {
      attrs: {
        x: -75,
        y: -25,
        width: 150,
        height: 50,
        fill: cfg.color || '#5B8FF9',
        radius: 10
      },
      name: 'rect-shape'
    });

    if (cfg.label) {
      group.addShape('text', {
        attrs: {
          x: 0,
          y: 0,
          fontFamily: 'Arial',
          textAlign: 'center',
          textBaseline: 'middle',
          fontSize: 14,
          fill: '#fff',
          text: cfg.label
        },
        name: 'text-shape'
      });
    }

    return rect;
  }
});

// ä½¿ç”¨è‡ªå®šä¹‰èŠ‚ç‚¹
const data = {
  nodes: [
    { 
      id: 'node1', 
      label: 'Custom Node',
      type: 'custom-node',
      color: '#FF6B6B'
    }
  ]
};
```

## ğŸ”€ X6 æµç¨‹å›¾è¯¦è§£

X6 æ˜¯åŸºäº HTML å’Œ SVG çš„å›¾ç¼–è¾‘å¼•æ“ï¼Œæä¾›ä½æˆæœ¬çš„å®šåˆ¶èƒ½åŠ›å’Œå¼€ç®±å³ç”¨çš„å†…ç½®æ‰©å±•ã€‚

### ğŸ¯ åŸºç¡€ä½¿ç”¨

```javascript
import { Graph } from '@antv/x6';

// åˆ›å»ºç”»å¸ƒ
const graph = new Graph({
  container: document.getElementById('container'),
  width: 800,
  height: 600,
  grid: true,
  mousewheel: {
    enabled: true,
    zoomAtMousePosition: true,
    modifiers: 'ctrl',
    minScale: 0.5,
    maxScale: 3
  },
  connecting: {
    router: 'manhattan',
    connector: {
      name: 'rounded',
      args: {
        radius: 8
      }
    },
    anchor: 'center',
    connectionPoint: 'anchor',
    allowBlank: false,
    snap: {
      radius: 20
    },
    createEdge() {
      return new Shape.Edge({
        attrs: {
          line: {
            stroke: '#A2B1C3',
            strokeWidth: 2,
            targetMarker: {
              name: 'block',
              width: 12,
              height: 8
            }
          }
        },
        zIndex: 0
      });
    }
  },
  highlighting: {
    magnetAdsorbed: {
      name: 'stroke',
      args: {
        attrs: {
          fill: '#5F95FF',
          stroke: '#5F95FF'
        }
      }
    }
  }
});

// æ·»åŠ èŠ‚ç‚¹
const rect = graph.addNode({
  shape: 'rect',
  x: 40,
  y: 40,
  width: 80,
  height: 40,
  label: 'Hello',
  attrs: {
    body: {
      stroke: '#8f8f8f',
      strokeWidth: 1,
      fill: '#fff',
      rx: 6,
      ry: 6
    },
    text: {
      fontSize: 12,
      fill: '#262626'
    }
  }
});

const circle = graph.addNode({
  shape: 'circle',
  x: 180,
  y: 160,
  width: 60,
  height: 60,
  label: 'World',
  attrs: {
    body: {
      stroke: '#8f8f8f',
      strokeWidth: 1,
      fill: '#fff'
    },
    text: {
      fontSize: 12,
      fill: '#262626'
    }
  }
});

// æ·»åŠ è¾¹
graph.addEdge({
  source: rect,
  target: circle,
  attrs: {
    line: {
      stroke: '#8f8f8f',
      strokeWidth: 1
    }
  }
});
```

### ğŸ¨ è‡ªå®šä¹‰å½¢çŠ¶

```javascript
import { Shape } from '@antv/x6';

// æ³¨å†Œè‡ªå®šä¹‰çŸ©å½¢
Shape.Rect.define({
  title: 'Custom Rect',
  width: 100,
  height: 60,
  attrs: {
    body: {
      strokeWidth: 1,
      stroke: '#5F95FF',
      fill: '#EFF4FF',
      rx: 10,
      ry: 10
    },
    text: {
      fontSize: 14,
      fill: '#262626'
    }
  },
  ports: {
    groups: {
      top: {
        position: 'top',
        attrs: {
          circle: {
            r: 4,
            magnet: true,
            stroke: '#5F95FF',
            strokeWidth: 1,
            fill: '#fff'
          }
        }
      },
      right: {
        position: 'right',
        attrs: {
          circle: {
            r: 4,
            magnet: true,
            stroke: '#5F95FF',
            strokeWidth: 1,
            fill: '#fff'
          }
        }
      },
      bottom: {
        position: 'bottom',
        attrs: {
          circle: {
            r: 4,
            magnet: true,
            stroke: '#5F95FF',
            strokeWidth: 1,
            fill: '#fff'
          }
        }
      },
      left: {
        position: 'left',
        attrs: {
          circle: {
            r: 4,
            magnet: true,
            stroke: '#5F95FF',
            strokeWidth: 1,
            fill: '#fff'
          }
        }
      }
    },
    items: [
      { group: 'top' },
      { group: 'right' },
      { group: 'bottom' },
      { group: 'left' }
    ]
  }
}, 'custom-rect');
```

## ğŸ—ºï¸ L7 åœ°å›¾å¯è§†åŒ–è¯¦è§£

L7 æ˜¯ç”±èš‚èšé‡‘æœ AntV æ•°æ®å¯è§†åŒ–å›¢é˜Ÿæ¨å‡ºçš„åŸºäº WebGL çš„å¼€æºå¤§è§„æ¨¡åœ°ç†ç©ºé—´æ•°æ®å¯è§†åˆ†æå¼€å‘æ¡†æ¶ã€‚

### ğŸŒ åŸºç¡€åœ°å›¾

```javascript
import { Scene, PointLayer } from '@antv/l7';
import { GaodeMap } from '@antv/l7-maps';

// åˆ›å»ºåœ°å›¾åœºæ™¯
const scene = new Scene({
  id: 'map',
  map: new GaodeMap({
    pitch: 0,
    style: 'light',
    center: [120.19382669582967, 30.258134],
    zoom: 3,
    token: 'YOUR_AMAP_TOKEN'
  })
});

// æ·»åŠ æ•°æ®
scene.on('loaded', () => {
  fetch('https://gw.alipayobjects.com/os/rmsportal/oVTMqfzuuRFKiDwhPSFL.json')
    .then(res => res.json())
    .then(data => {
      const pointLayer = new PointLayer({})
        .source(data.list, {
          parser: {
            type: 'json',
            x: 'j',
            y: 'w'
          }
        })
        .shape('cylinder')
        .size('t', function (level) {
          return [1, 2, level * 2 + 20];
        })
        .color('t', [
          '#094D4A',
          '#146968',
          '#1D7F7E',
          '#289899',
          '#34B6B7',
          '#4AC5AF',
          '#5FD3A6',
          '#7BE39E',
          '#A1EDB8',
          '#CEF8D6'
        ])
        .style({
          opacity: 1.0
        });
      
      scene.addLayer(pointLayer);
    });
});
```

### ğŸ¯ å›¾å±‚ç±»å‹

```javascript
// ç‚¹å›¾å±‚
const pointLayer = new PointLayer()
  .source(data)
  .shape('circle')
  .size(10)
  .color('#f00');

// çº¿å›¾å±‚
const lineLayer = new LineLayer()
  .source(data)
  .shape('line')
  .size(2)
  .color('#00f');

// é¢å›¾å±‚
const polygonLayer = new PolygonLayer()
  .source(data)
  .shape('fill')
  .color('name', ['#f00', '#0f0', '#00f']);

// çƒ­åŠ›å›¾
const heatmapLayer = new HeatmapLayer()
  .source(data)
  .shape('heatmap')
  .size('weight', [0, 1])
  .style({
    intensity: 2,
    radius: 20,
    opacity: 1.0,
    rampColors: {
      colors: [
        '#FF4818',
        '#F7B74A',
        '#FFF598',
        '#91EABC',
        '#2EA9A1',
        '#206C7C'
      ].reverse(),
      positions: [0, 0.2, 0.4, 0.6, 0.8, 1.0]
    }
  });
```

## ğŸ“Š S2 å¤šç»´è¡¨æ ¼è¯¦è§£

S2 æ˜¯å¤šç»´äº¤å‰åˆ†æé¢†åŸŸçš„è¡¨æ ¼è§£å†³æ–¹æ¡ˆï¼Œæ•°æ®é©±åŠ¨è§†å›¾ï¼Œæä¾›åº•å±‚æ ¸å¿ƒåº“ã€åŸºç¡€ç»„ä»¶åº“ã€ä¸šåŠ¡åœºæ™¯åº“ã€‚

### ğŸ“‹ åŸºç¡€è¡¨æ ¼

```javascript
import { PivotSheet } from '@antv/s2';

// é€è§†è¡¨é…ç½®
const s2Options = {
  width: 600,
  height: 480,
  interaction: {
    enableCopy: true,
    hoverHighlight: false,
    selectedCellsSpotlight: false
  },
  tooltip: {
    showTooltip: true
  }
};

// æ•°æ®é…ç½®
const s2DataConfig = {
  fields: {
    rows: ['province', 'city'],
    columns: ['type'],
    values: ['price']
  },
  data: [
    {
      province: 'æµ™æ±Ÿ',
      city: 'æ­å·',
      type: 'ç¬”',
      price: 1
    },
    {
      province: 'æµ™æ±Ÿ',
      city: 'æ­å·',
      type: 'çº¸å¼ ',
      price: 2
    }
  ]
};

// åˆ›å»ºè¡¨æ ¼
const s2 = new PivotSheet(
  document.getElementById('container'),
  s2DataConfig,
  s2Options
);

// æ¸²æŸ“
s2.render();
```

### ğŸ¨ ä¸»é¢˜å®šåˆ¶

```javascript
import { PaletteLegendTheme } from '@antv/s2';

// è‡ªå®šä¹‰ä¸»é¢˜
const customTheme = {
  name: 'customTheme',
  palette: {
    basicColors: ['#FF6B6B', '#4ECDC4', '#45B7D1'],
    semanticColors: {
      red: '#FF6B6B',
      green: '#4ECDC4'
    }
  },
  dataCell: {
    cell: {
      backgroundColor: '#ffffff',
      horizontalBorderColor: '#000',
      verticalBorderColor: '#000'
    },
    text: {
      fontSize: 13,
      fontFamily: 'Roboto'
    }
  }
};

// åº”ç”¨ä¸»é¢˜
const s2 = new PivotSheet(container, s2DataConfig, {
  ...s2Options,
  theme: customTheme
});
```

## ğŸ”„ æ¡†æ¶é›†æˆ

### React é›†æˆ

```jsx
// G2 React ç»„ä»¶
import React from 'react';
import { Chart } from '@antv/g2';

const G2Chart = ({ data, config }) => {
  const chartRef = useRef(null);
  const chart = useRef(null);

  useEffect(() => {
    if (chartRef.current) {
      chart.current = new Chart({
        container: chartRef.current,
        ...config
      });
      
      chart.current
        .interval()
        .data(data)
  .encode('x', 'name')
  .encode('y', 'value');

      chart.current.render();
    }

    return () => {
      chart.current?.destroy();
    };
  }, [data, config]);

  return <div ref={chartRef} />;
};

// G6 React ç»„ä»¶
import { Graph } from '@antv/g6';

const G6Graph = ({ data, config }) => {
  const graphRef = useRef(null);
  const graph = useRef(null);

  useEffect(() => {
    if (graphRef.current) {
      graph.current = new Graph({
        container: graphRef.current,
        ...config
      });
      
      graph.current.data(data);
      graph.current.render();
    }

    return () => {
      graph.current?.destroy();
    };
  }, [data, config]);

  return <div ref={graphRef} />;
};

// S2 React ç»„ä»¶
import { SheetComponent } from '@antv/s2-react';

const S2Table = ({ dataCfg, options }) => {
  return (
    <SheetComponent
      dataCfg={dataCfg}
      options={options}
      sheetType="pivot"
    />
  );
};
```

### Vue é›†æˆ

```vue
<!-- G2 Vue ç»„ä»¶ -->
<template>
  <div ref="chartContainer"></div>
</template>

<script setup>
import { ref, onMounted, onUnmounted, watch } from 'vue';
import { Chart } from '@antv/g2';

const props = defineProps(['data', 'config']);
const chartContainer = ref(null);
let chart = null;

onMounted(() => {
  chart = new Chart({
    container: chartContainer.value,
    ...props.config
  });
  
  updateChart();
});

onUnmounted(() => {
  chart?.destroy();
});

watch(() => props.data, updateChart, { deep: true });

const updateChart = () => {
  if (chart && props.data) {
    chart.clear();
    chart
      .interval()
      .data(props.data)
      .encode('x', 'name')
      .encode('y', 'value');
    chart.render();
  }
};
</script>

<!-- G6 Vue ç»„ä»¶ -->
<template>
  <div ref="graphContainer"></div>
</template>

<script setup>
import { ref, onMounted, onUnmounted, watch } from 'vue';
import G6 from '@antv/g6';

const props = defineProps(['data', 'config']);
const graphContainer = ref(null);
let graph = null;

onMounted(() => {
  graph = new G6.Graph({
    container: graphContainer.value,
    ...props.config
  });
  
  updateGraph();
});

onUnmounted(() => {
  graph?.destroy();
});

watch(() => props.data, updateGraph, { deep: true });

const updateGraph = () => {
  if (graph && props.data) {
    graph.data(props.data);
    graph.render();
  }
};
</script>
```

### Angular é›†æˆ

```typescript
// G2 Angular ç»„ä»¶
import { Component, ElementRef, Input, OnInit, OnDestroy, ViewChild } from '@angular/core';
import { Chart } from '@antv/g2';

@Component({
  selector: 'app-g2-chart',
  template: '<div #chartContainer></div>'
})
export class G2ChartComponent implements OnInit, OnDestroy {
  @ViewChild('chartContainer', { static: true }) chartContainer!: ElementRef;
  @Input() data: any[] = [];
  @Input() config: any = {};
  
  private chart: Chart | null = null;

  ngOnInit() {
    this.chart = new Chart({
      container: this.chartContainer.nativeElement,
      ...this.config
    });
    
    this.updateChart();
  }

  ngOnDestroy() {
    this.chart?.destroy();
  }

  private updateChart() {
    if (this.chart && this.data) {
      this.chart.clear();
      this.chart
        .interval()
        .data(this.data)
        .encode('x', 'name')
        .encode('y', 'value');
      this.chart.render();
    }
  }
}

// G6 Angular ç»„ä»¶
import { Component, ElementRef, Input, OnInit, OnDestroy, ViewChild } from '@angular/core';
import G6 from '@antv/g6';

@Component({
  selector: 'app-g6-graph',
  template: '<div #graphContainer></div>'
})
export class G6GraphComponent implements OnInit, OnDestroy {
  @ViewChild('graphContainer', { static: true }) graphContainer!: ElementRef;
  @Input() data: any = {};
  @Input() config: any = {};
  
  private graph: any = null;

  ngOnInit() {
    this.graph = new G6.Graph({
      container: this.graphContainer.nativeElement,
      ...this.config
    });
    
    this.updateGraph();
  }

  ngOnDestroy() {
    this.graph?.destroy();
  }

  private updateGraph() {
    if (this.graph && this.data) {
      this.graph.data(this.data);
      this.graph.render();
    }
  }
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ğŸ¯ G2 æ€§èƒ½ä¼˜åŒ–

```javascript
// å¤§æ•°æ®é‡ä¼˜åŒ–
const chart = new Chart({
  container: 'container',
  // ä½¿ç”¨ Canvas æ¸²æŸ“å™¨æé«˜æ€§èƒ½
  renderer: 'canvas',
  // å¯ç”¨å±€éƒ¨åˆ·æ–°
  localRefresh: true
});

  // æ•°æ®é‡‡æ ·
chart
  .point()
  .data(largeDataset)
  .transform({ 
    type: 'sample', 
    size: 5000 // é‡‡æ ·åˆ°5000ä¸ªç‚¹
  });

  // å…³é—­åŠ¨ç”»
chart
  .interval()
  .animate(false);

// ä½¿ç”¨ Web Worker å¤„ç†æ•°æ®
const worker = new Worker('data-processor.js');
worker.postMessage(rawData);
worker.onmessage = (e) => {
  chart.changeData(e.data);
};
```

### ğŸ”— G6 æ€§èƒ½ä¼˜åŒ–

```javascript
// å¤§å›¾ä¼˜åŒ–
const graph = new G6.Graph({
  container: 'container',
  // å¯ç”¨ GPU åŠ é€Ÿ
  renderer: 'webgl',
  // èŠ‚ç‚¹é‡‡æ ·
  enabledStack: true,
  // æœ€å¤§ç¼©æ”¾æ¯”ä¾‹
  maxZoom: 10,
  minZoom: 0.1,
  // æ€§èƒ½æ¨¡å¼
  modes: {
    default: [
      {
        type: 'drag-canvas',
        enableOptimize: true // å¯ç”¨æ‹–æ‹½ä¼˜åŒ–
      },
      {
        type: 'zoom-canvas',
        enableOptimize: true, // å¯ç”¨ç¼©æ”¾ä¼˜åŒ–
        optimizeZoom: 0.9
      }
    ]
  },
  // èŠ‚ç‚¹å±‚æ¬¡æ¸²æŸ“
  groupByTypes: false,
  // è¾¹æ†ç»‘
  defaultEdge: {
    type: 'cubic-horizontal'
  }
});

// å¤§æ•°æ®åˆ†é¡µåŠ è½½
const loadNodesByLevel = (level) => {
  const nodes = getNodesByLevel(level);
  graph.addItem('node', nodes);
};

// è§†å£è£å‰ª
graph.on('viewportchange', () => {
  const viewport = graph.getViewPortBBox();
  const visibleNodes = getNodesInViewport(viewport);
  updateVisibleNodes(visibleNodes);
});
```

### ğŸ—ºï¸ L7 æ€§èƒ½ä¼˜åŒ–

```javascript
// æ•°æ®èšåˆ
const clusterLayer = new PointLayer({
  cluster: true
})
  .source(data, {
    cluster: true,
    clusterRadius: 80,
    clusterMaxZoom: 15
  })
  .shape('circle')
  .size('point_count', [5, 15, 25, 35])
  .color('point_count', [
    '#51bbd6',
    '#f1f075',
    '#f28cb1',
    '#ff6b6b'
  ]);

// ç“¦ç‰‡ä¼˜åŒ–
const heatmapLayer = new HeatmapLayer({
  workerEnabled: true // å¯ç”¨ Web Worker
})
  .source(data)
  .shape('heatmap3D')
  .size('weight', [0, 1])
  .style({
    intensity: 2,
    radius: 20,
    rampColors: {
      colors: ['#f7acbc', '#ef5b9c', '#f05b72'],
      positions: [0, 0.5, 1.0]
    }
  });

// æ•°æ®æ›´æ–°ä¼˜åŒ–
layer.setData(newData, {
  // å¢é‡æ›´æ–°
  partial: true,
  // åŠ¨ç”»è¿‡æ¸¡
  animateOption: {
    enable: true,
    duration: 500
  }
});
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### 1. å›¾è¡¨ä¸æ˜¾ç¤º

```javascript
// ç¡®ä¿å®¹å™¨å­˜åœ¨ä¸”æœ‰å°ºå¯¸
const container = document.getElementById('container');
if (!container) {
  console.error('Container not found');
  return;
}

// è®¾ç½®å®¹å™¨å°ºå¯¸
container.style.width = '600px';
container.style.height = '400px';

// æ£€æŸ¥æ•°æ®æ ¼å¼
console.log('Data:', data);
if (!data || !Array.isArray(data)) {
  console.error('Invalid data format');
  return;
}
```

### 2. å†…å­˜æ³„æ¼é—®é¢˜

```javascript
// ç»„ä»¶å¸è½½æ—¶æ­£ç¡®é”€æ¯å®ä¾‹
class ChartManager {
  constructor() {
    this.charts = new Map();
    this.graphs = new Map();
  }
  
  createChart(id, config) {
    const chart = new Chart(config);
    this.charts.set(id, chart);
    return chart;
  }
  
  createGraph(id, config) {
    const graph = new G6.Graph(config);
    this.graphs.set(id, graph);
    return graph;
  }
  
  destroy(id) {
    const chart = this.charts.get(id);
    const graph = this.graphs.get(id);
    
    if (chart) {
      chart.destroy();
      this.charts.delete(id);
    }
    
    if (graph) {
      graph.destroy();
      this.graphs.delete(id);
    }
  }
  
  destroyAll() {
    this.charts.forEach(chart => chart.destroy());
    this.graphs.forEach(graph => graph.destroy());
    this.charts.clear();
    this.graphs.clear();
  }
}
```

### 3. å“åº”å¼å¸ƒå±€

```javascript
// å“åº”å¼å›¾è¡¨
const createResponsiveChart = (container) => {
  const updateSize = () => {
    const rect = container.getBoundingClientRect();
    chart.changeSize(rect.width, rect.height);
  };
  
  // ç›‘å¬çª—å£å¤§å°å˜åŒ–
  window.addEventListener('resize', updateSize);
  
  // ä½¿ç”¨ ResizeObserver ç›‘å¬å®¹å™¨å˜åŒ–
  const resizeObserver = new ResizeObserver(entries => {
    for (let entry of entries) {
      const { width, height } = entry.contentRect;
      chart.changeSize(width, height);
    }
  });
  
  resizeObserver.observe(container);
  
  return {
    chart,
    destroy() {
      window.removeEventListener('resize', updateSize);
      resizeObserver.disconnect();
      chart.destroy();
    }
  };
};
```

### 4. ä¸»é¢˜åˆ‡æ¢

```javascript
// åŠ¨æ€ä¸»é¢˜åˆ‡æ¢
const themes = {
  light: {
    backgroundColor: '#ffffff',
    textColor: '#000000',
    gridColor: '#f0f0f0'
  },
  dark: {
    backgroundColor: '#1f1f1f',
    textColor: '#ffffff',
    gridColor: '#333333'
  }
};

const switchTheme = (themeName) => {
  const theme = themes[themeName];
  
  // G2 ä¸»é¢˜åˆ‡æ¢
  chart.theme(theme);
  
  // G6 ä¸»é¢˜åˆ‡æ¢
  graph.updateItem('node', {
    style: {
      fill: theme.backgroundColor,
      stroke: theme.textColor
    }
  });
  
  // æ›´æ–°å®¹å™¨æ ·å¼
  document.body.style.backgroundColor = theme.backgroundColor;
  document.body.style.color = theme.textColor;
};
```

## ğŸ¯ æœ€ä½³å®è·µ

### ğŸ“‹ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Charts/
â”‚   â”‚   â”œâ”€â”€ G2Chart.tsx
â”‚   â”‚   â”œâ”€â”€ G6Graph.tsx
â”‚   â”‚   â””â”€â”€ S2Table.tsx
â”‚   â””â”€â”€ Maps/
â”‚       â””â”€â”€ L7Map.tsx
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ chartConfig.ts
â”‚   â”œâ”€â”€ graphLayouts.ts
â”‚   â””â”€â”€ mapLayers.ts
â”œâ”€â”€ themes/
â”‚   â”œâ”€â”€ light.ts
â”‚   â””â”€â”€ dark.ts
â””â”€â”€ types/
    â””â”€â”€ antv.d.ts
```

### ğŸ¨ é…ç½®ç®¡ç†

```javascript
// chartConfig.js
export const chartDefaults = {
  padding: [20, 40, 50, 40],
  theme: 'light',
  animation: true
};

export const graphDefaults = {
  layout: {
    type: 'force',
    preventOverlap: true
  },
  modes: {
    default: ['drag-canvas', 'zoom-canvas']
  }
};

export const mapDefaults = {
  zoom: 3,
  center: [120, 30],
  pitch: 0
};
```

### ğŸ“Š æ•°æ®å¤„ç†

```javascript
// æ•°æ®æ ‡å‡†åŒ–
export const normalizeChartData = (rawData) => {
  return rawData.map(item => ({
    name: item.label || item.name,
    value: Number(item.value) || 0,
    category: item.type || 'default'
  }));
};

// å›¾æ•°æ®å¤„ç†
export const normalizeGraphData = (nodes, edges) => {
  const nodeMap = new Map();
  
  const processedNodes = nodes.map(node => {
    const processed = {
      id: node.id,
      label: node.name || node.label,
      ...node
    };
    nodeMap.set(node.id, processed);
    return processed;
  });
  
  const processedEdges = edges.filter(edge => 
    nodeMap.has(edge.source) && nodeMap.has(edge.target)
  );
  
  return { nodes: processedNodes, edges: processedEdges };
};
```

### ğŸ”„ çŠ¶æ€ç®¡ç†

```javascript
// ä½¿ç”¨ Context ç®¡ç†å¯è§†åŒ–çŠ¶æ€
import React, { createContext, useContext, useReducer } from 'react';

const VisualizationContext = createContext();

const visualizationReducer = (state, action) => {
  switch (action.type) {
    case 'SET_THEME':
      return { ...state, theme: action.payload };
    case 'UPDATE_DATA':
      return { ...state, data: action.payload };
    case 'SET_LOADING':
      return { ...state, loading: action.payload };
    default:
      return state;
  }
};

export const VisualizationProvider = ({ children }) => {
  const [state, dispatch] = useReducer(visualizationReducer, {
    theme: 'light',
    data: null,
    loading: false
  });
  
  return (
    <VisualizationContext.Provider value={{ state, dispatch }}>
      {children}
    </VisualizationContext.Provider>
  );
};

export const useVisualization = () => {
  const context = useContext(VisualizationContext);
  if (!context) {
    throw new Error('useVisualization must be used within VisualizationProvider');
  }
  return context;
};
```

## ğŸ“š æ‰©å±•èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [G2 æ–‡æ¡£](https://g2.antv.antgroup.com/)
- [G6 æ–‡æ¡£](https://g6.antv.antgroup.com/)
- [X6 æ–‡æ¡£](https://x6.antv.antgroup.com/)
- [L7 æ–‡æ¡£](https://l7.antv.antgroup.com/)
- [S2 æ–‡æ¡£](https://s2.antv.antgroup.com/)

### ç¤ºä¾‹å’Œæ•™ç¨‹

- [AntV ç¤ºä¾‹ä¸­å¿ƒ](https://antv.antgroup.com/examples)
- [Observable ç¤ºä¾‹](https://observablehq.com/@antv)
- [CodeSandbox æ¨¡æ¿](https://codesandbox.io/s/antv-templates)

### ç¤¾åŒºèµ„æº

- [GitHub ç»„ç»‡](https://github.com/antvis)
- [è¯­é›€æ–‡æ¡£](https://www.yuque.com/antv)
- [é’‰é’‰ç”¨æˆ·ç¾¤](https://qr.dingtalk.com/action/joingroup?code=v1,k1,cK0REo8+6xPdq64bBHmgC96PQ9ypfgHGSKpv8Ay=)

### ç›¸å…³å·¥å…·

- **AntV è®¾è®¡åŸåˆ™**: [è®¾è®¡è¯­è¨€](https://antv.antgroup.com/spec/principles)
- **é¢œè‰²è®¡ç®—å™¨**: [é¢œè‰²å·¥å…·](https://antv.antgroup.com/colors)
- **å›¾è¡¨é€‰æ‹©å™¨**: [å›¾è¡¨å»ºè®®](https://chartcube.alipay.com/)

::: tip ğŸ’¡ å¼€å‘å»ºè®®
1. æ ¹æ®æ•°æ®è§„æ¨¡é€‰æ‹©åˆé€‚çš„äº§å“ï¼ˆG2 é€‚åˆä¸­å°å‹æ•°æ®ï¼ŒL7 é€‚åˆåœ°ç†å¤§æ•°æ®ï¼‰
2. åˆç†ä½¿ç”¨åŠ¨ç”»å’Œäº¤äº’ï¼Œé¿å…è¿‡åº¦è®¾è®¡å½±å“æ€§èƒ½
3. æ³¨æ„ç§»åŠ¨ç«¯é€‚é…ï¼Œç‰¹åˆ«æ˜¯è§¦æ§äº¤äº’çš„ä¼˜åŒ–
4. å……åˆ†åˆ©ç”¨ AntV çš„ç”Ÿæ€ç³»ç»Ÿï¼Œé¿å…é‡å¤é€ è½®å­
5. å…³æ³¨å®˜æ–¹æ›´æ–°ï¼ŒåŠæ—¶å‡çº§ç‰ˆæœ¬è·å–æ–°ç‰¹æ€§å’Œæ€§èƒ½ä¼˜åŒ–
:::

---

*æœ€åæ›´æ–°: 2024å¹´12æœˆ*
