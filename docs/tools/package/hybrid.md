---
title: ğŸ“± Hybrid æ··åˆå¼€å‘å®Œå…¨æŒ‡å—
description: æ··åˆå¼€å‘æŠ€æœ¯è¯¦è§£ï¼ŒåŒ…æ‹¬åŸç†å®ç°ã€H5ä¸åŸç”Ÿäº¤äº’ã€DSBridge æ¡†æ¶ç­‰ï¼Œå®ç°ä¸€æ¬¡å¼€å‘å¤šå¤„è¿è¡Œ
outline: deep
---

# ğŸ“± Hybrid æ··åˆå¼€å‘å®Œå…¨æŒ‡å—

> Hybrid App ä¸»è¦ä»¥ JS+Native ä¸¤è€…ç›¸äº’è°ƒç”¨ä¸ºä¸»ï¼Œä»å¼€å‘å±‚é¢å®ç°"ä¸€æ¬¡å¼€å‘ï¼Œå¤šå¤„è¿è¡Œ"çš„æœºåˆ¶ï¼Œæˆä¸ºçœŸæ­£é€‚åˆè·¨å¹³å°çš„å¼€å‘ã€‚

## ğŸ¯ æ··åˆå¼€å‘æ¦‚è¿°

Hybrid App å…¼å…·äº† Native App è‰¯å¥½ç”¨æˆ·ä½“éªŒçš„ä¼˜åŠ¿ï¼Œä¹Ÿå…¼å…·äº† Web App ä½¿ç”¨ HTML5 è·¨å¹³å°å¼€å‘ä½æˆæœ¬çš„ä¼˜åŠ¿ã€‚

æ··åˆå¼€å‘å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š

- è·¨å¹³å°å¼€å‘ï¼šé€šè¿‡æ··åˆå¼€å‘ï¼Œå¼€å‘è€…å¯ä»¥åˆ©ç”¨ä¸€å¥—ä»£ç åº“åŒæ—¶æ„å»ºé€‚ç”¨äºå¤šä¸ªå¹³å°çš„åº”ç”¨ç¨‹åºï¼Œé™ä½äº†å¼€å‘æˆæœ¬å’Œæ—¶é—´ã€‚
- å¿«é€Ÿè¿­ä»£ï¼šWeb æŠ€æœ¯å…·æœ‰å¿«é€Ÿè¿­ä»£çš„ç‰¹ç‚¹ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°æ›´æ–°åº”ç”¨ç•Œé¢å’Œä¸šåŠ¡é€»è¾‘ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚
- ä¸°å¯Œçš„ Web èµ„æºï¼šWeb æŠ€æœ¯æ‹¥æœ‰ä¸°å¯Œçš„èµ„æºå’Œåº“ï¼Œå¦‚å‰ç«¯æ¡†æ¶ã€UI ç»„ä»¶ç­‰ï¼Œå¼€å‘è€…å¯ä»¥æ–¹ä¾¿åœ°åˆ©ç”¨è¿™äº›èµ„æºæ¥æ„å»ºåº”ç”¨ã€‚

ç„¶è€Œï¼Œæ··åˆå¼€å‘ä¹Ÿå­˜åœ¨ä¸€äº›ç¼ºç‚¹ï¼š

- æ€§èƒ½é—®é¢˜ï¼šç”±äº WebView çš„æ¸²æŸ“æ•ˆç‡ä½äºåŸç”Ÿä»£ç ï¼Œæ··åˆåº”ç”¨åœ¨æ€§èƒ½æ–¹é¢å¯èƒ½ä¸å¦‚åŸç”Ÿåº”ç”¨ã€‚
- ç”¨æˆ·ä½“éªŒï¼šæ··åˆåº”ç”¨åœ¨ç”¨æˆ·ä½“éªŒæ–¹é¢ä¹Ÿå¯èƒ½å—åˆ° WebView çš„é™åˆ¶ï¼Œå¦‚è§¦æ§å“åº”é€Ÿåº¦ã€åŠ¨ç”»æ•ˆæœç­‰ã€‚
- è·¨å¹³å°é€‚é…éš¾åº¦ï¼šè™½ç„¶æ··åˆå¼€å‘å¯ä»¥å®ç°è·¨å¹³å°å¼€å‘ï¼Œä½†ä¸åŒå¹³å°ä¹‹é—´çš„å·®å¼‚ä»ç„¶éœ€è¦å¼€å‘è€…è¿›è¡Œå¤§é‡çš„é€‚é…å·¥ä½œã€‚

## ç§»åŠ¨åº”ç”¨å¼€å‘ä¸‰ç§æ–¹å¼

- Native Appï¼š åŸç”Ÿåº”ç”¨ç¨‹åºï¼ˆåŸç”Ÿ Appï¼‰
- Web Appï¼šç½‘é¡µåº”ç”¨ç¨‹åºï¼ˆç§»åŠ¨ webï¼‰
- Hybrid Appï¼šæ··åˆåº”ç”¨ç¨‹åºï¼ˆæ··åˆ Appï¼‰

![alt text](image-27.png)

![alt text](image-28.png)

## æ··åˆå¼€å‘çš„åŸç†ä¸å®ç°

é€šè¿‡åœ¨åŸç”Ÿåº”ç”¨ä¸­åµŒå…¥ä¸€ä¸ª WebView ç»„ä»¶ï¼Œç”¨äºåŠ è½½å’Œæ¸²æŸ“ Web é¡µé¢ã€‚å¼€å‘è€…å¯ä»¥åˆ©ç”¨ HTML5ã€CSS å’Œ JavaScript ç­‰æŠ€æœ¯æ„å»ºåº”ç”¨ç•Œé¢å’Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åé€šè¿‡ WebView ä¸åŸç”Ÿä»£ç è¿›è¡Œäº¤äº’ã€‚è¿™ç§äº¤äº’é€šå¸¸åŒ…æ‹¬æ•°æ®ä¼ é€’ã€äº‹ä»¶å¤„ç†å’Œ UI æ›´æ–°ç­‰æ–¹é¢ã€‚

ä¸ºäº†å®ç°æ··åˆå¼€å‘ï¼Œå¼€å‘è€…éœ€è¦æŒæ¡ä»¥ä¸‹å…³é”®æŠ€æœ¯ï¼š

- WebView çš„ä½¿ç”¨ï¼šWebView æ˜¯åŸç”Ÿåº”ç”¨ä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºåŠ è½½å’Œæ˜¾ç¤º Web å†…å®¹ã€‚å¼€å‘è€…éœ€è¦äº†è§£å¦‚ä½•åœ¨åŸç”Ÿåº”ç”¨ä¸­åµŒå…¥ WebViewï¼Œå¹¶é…ç½®å…¶å±æ€§ä»¥æ»¡è¶³åº”ç”¨éœ€æ±‚ã€‚
- JavaScript ä¸åŸç”Ÿä»£ç çš„äº¤äº’ï¼šJavaScript æ˜¯ Web æŠ€æœ¯ä¸­çš„æ ¸å¿ƒè¯­è¨€ï¼Œç”¨äºå®ç°åº”ç”¨ç•Œé¢å’Œä¸šåŠ¡é€»è¾‘ã€‚å¼€å‘è€…éœ€è¦äº†è§£å¦‚ä½•é€šè¿‡ JavaScript è°ƒç”¨åŸç”Ÿä»£ç æä¾›çš„åŠŸèƒ½ï¼Œå¦‚è®¿é—®è®¾å¤‡æ‘„åƒå¤´ã€è·å–ç”¨æˆ·ä½ç½®ç­‰ã€‚åŒæ—¶ï¼Œä¹Ÿéœ€è¦äº†è§£å¦‚ä½•å°†åŸç”Ÿä»£ç çš„ç»“æœä¼ é€’å› JavaScript ä¸­ã€‚
- è·¨å¹³å°é€‚é…ä¸ä¼˜åŒ–ï¼šæ··åˆå¼€å‘è™½ç„¶å¯ä»¥å®ç°è·¨å¹³å°å¼€å‘ï¼Œä½†ä¸åŒå¹³å°ä¹‹é—´çš„å·®å¼‚ä»ç„¶éœ€è¦å¼€å‘è€…è¿›è¡Œé€‚é…å’Œä¼˜åŒ–ã€‚è¿™åŒ…æ‹¬ UI å¸ƒå±€ã€æ€§èƒ½ä¼˜åŒ–ã€è®¾å¤‡å…¼å®¹æ€§ç­‰æ–¹é¢ã€‚

## H5 å’ŒåŸç”Ÿåº”ç”¨äº¤äº’

1. Webview JavaScript Interfaceï¼šåœ¨ WebView ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ JavaScript æ¥å£ä¸ WebView å®¹å™¨ä¸­çš„ Java ä»£ç è¿›è¡Œäº¤äº’ã€‚

```js
// JavaScript ä»£ç 
window.jsInterface.someFun(arg);

window.sdk = {
  someFun(value){
    return value*2
  }
}


// Java ä»£ç 
webView.addJavascriptInterface(new Object() {
    @JavascriptInterface
    public void someFun(String arg) {
        // å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®
    }
}, "jsInterface");

// WebViewæä¾›äº†ä¸‰ä¸ªapiç”¨äºè°ƒç”¨jsï¼š
// void callHandler(String method, Object[] args)
// void callHandler(String method, Object[] args, CompletionHandler handler)
// void evaluateJavascript(String script)
webView.evaluateJavascript('window.sdk.someFun(10)',
new ValueCallback<String>(){
  @Override
  public void onReceiveValue(String s){} // 20
})
```

2. é€šè¿‡ Intent å’Œ Custom Schemeï¼šH5 é¡µé¢å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ URL Scheme å¯åŠ¨åŸç”Ÿåº”ç”¨æˆ–è€…ä¼ é€’æ•°æ®ã€‚

```js
// HTML ä»£ç 
<a href="myapp://some/path">æ‰“å¼€åŸç”Ÿåº”ç”¨</a>

// Java ä»£ç 
public class MyActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Uri uri = getIntent().getData();
        // æ ¹æ®URIå¤„ç†ç›¸åº”çš„æ“ä½œ
    }
}

// æ£€æŸ¥appæ˜¯å¦æ‰“å¼€
 function checkOpen(cb) {
     const clickTime = +(new Date());
     function check(elsTime) {
         if (elsTime > 3000 || document.hidden || document.webkitHidden) {
             cb(true);
         } else {
             cb(false);
         }
     }
     // å¯åŠ¨é—´éš”20msè¿è¡Œçš„å®šæ—¶å™¨ï¼Œå¹¶æ£€æµ‹ç´¯è®¡æ¶ˆè€—æ—¶é—´æ˜¯å¦è¶…è¿‡3000msï¼Œè¶…è¿‡åˆ™ç»“æŸ
     let count = 0;
     let intHandle = null;
     intHandle = setInterval(() => {
         count++;
         const elsTime = +(new Date()) - clickTime;
         if (count >= 100 || elsTime > 3000) {
             clearInterval(intHandle);
             check(elsTime);
         }
     }, 20);
 }

 /**
  * å”¤èµ·app
  * @param {any} uri  app schema
  * @param {any} fallback  å”¤èµ·å¤±è´¥å›è°ƒ
  */
 function openApp(uri, fallback) {
     const ifr = document.createElement('iframe');
     ifr.src = uri;
     ifr.style.display = 'none';
     if (fallback) {
         checkOpen((opened) => {
             if (!opened) {
                 fallback();
             }
         });
     }
     document.body.appendChild(ifr);
     setTimeout(() => {
         document.body.removeChild(ifr);
     }, 2000);
 }
```

3. ä½¿ç”¨ Cordova/PhoneGapï¼šè¿™æ˜¯ä¸€ä¸ªå°† H5 ä½œä¸ºæ¡¥æ¢ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ„å»ºè·¨å¹³å°åº”ç”¨çš„å¼€æºç§»åŠ¨å¼€å‘æ¡†æ¶ã€‚å®ƒå…è®¸ä½ ä½¿ç”¨æ ‡å‡†çš„ web æŠ€æœ¯ï¼Œå¦‚ HTMLã€CSS å’Œ JavaScriptï¼Œå¹¶é€šè¿‡æ’ä»¶ä¸åŸç”ŸåŠŸèƒ½è¿›è¡Œäº¤äº’ã€‚

```js
// JavaScript ä»£ç 
cordova.exec(successCallback, errorCallback, "NativePlugin", "someFunction", [arg0, arg1]);


// Java ä»£ç  (Cordova æ’ä»¶)
public class NativePlugin extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if ("someFunction".equals(action)) {
            // å¤„ç†æ¥æ”¶åˆ°çš„æ•°æ®
            return true;
        }
        return false;
    }
}
```

4. ä½¿ç”¨ React Nativeã€æˆ– Flutterï¼šè¿™äº›æ¡†æ¶å…è®¸ä½ ä½¿ç”¨ H5 æŠ€æœ¯ï¼ˆå¦‚ React æˆ– JavaScriptï¼‰ç¼–å†™åº”ç”¨ï¼Œå¹¶åˆ©ç”¨åŸç”Ÿç³»ç»ŸåŠŸèƒ½ã€‚å®ƒä»¬é€šå¸¸æœ‰è‡ªå·±çš„æœºåˆ¶ä¸åŸç”Ÿä»£ç äº¤äº’ã€‚

```js
// React Native ç¤ºä¾‹
import { NativeModules } from "react-native";

NativeModules.NativeModule.someFunction(arg, result => {
  // å¤„ç†ç»“æœ
});
```

## DSBridge

åœ¨ web å’Œ native ä¹‹é—´è¿›è¡Œäº¤äº’ï¼Œå¦‚ä¼ é€’æ•°æ®ï¼Œè°ƒç”¨å‡½æ•°ï¼Œè€Œè¿æ¥ web ä¸ native éœ€è¦ä¸€ä¸ªæ¡¥æ¢,é€šå¸¸ç§°ä¸º javascript bridge

ç›®å‰ github ä¸Šå¼€æºæœ€å¹¿çš„ WebViewJavascriptBridgeã€JsBridgeã€DSBridgeã€‚DSBridge ç‰¹æ€§:

- å®˜æ–¹åŒæ—¶æ”¯æŒ ios å’Œ androidã€‚
- åŒå‘è°ƒç”¨:js å¯ä»¥è°ƒç”¨ nativeï¼Œ native å¯ä»¥è°ƒç”¨ js
- ä¸ä»…æ”¯æŒå¼‚æ­¥è°ƒç”¨ï¼Œè¿˜æ”¯æŒåŒæ­¥è°ƒç”¨ï¼ˆDSbridge æ˜¯å”¯ä¸€ä¸€ä¸ªæ”¯æŒåŒæ­¥è°ƒç”¨çš„ javascript bridgeï¼‰ã€‚
- ä¸‰ç«¯å‹å¥½ï¼Œåœ¨æ¥å£æ˜“ç”¨æ€§æ¯” WebViewJavascriptBridge å¼º

### h5 è°ƒç”¨åŸç”Ÿ

åŸç†ï¼šé€šè¿‡æ‹¦æˆª JavaScript çš„ prompt äº‹ä»¶ï¼Œè§£æå‡ºå¯¹åº”çš„ methodï¼Œç„¶ååˆ©ç”¨ objc_msgSend è°ƒç”¨ OC çš„æ–¹æ³•ã€‚è®¾è®¡å°†æ¥å£å°è£…åˆ°è‡ªå®šä¹‰çš„ JavaScriptInterface ä¸­ï¼Œæ”¯æŒå¤šä¸ª JavaScriptInterface ç±»ã€‚å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªå­—å…¸ï¼Œæ”¯æŒå¤šä¸ªå‘½åç©ºé—´ã€‚

```js
// Javaæ³¨å†Œä¾›h5 ä¸­ JavaScriptè°ƒç”¨çš„ API
public class JsApi{
    //ç”¨äºåŒæ­¥è°ƒç”¨
    @JavascriptInterface
    String testSyn(JSONObject jsonObject) throws JSONException {
        // è¿”å›å€¼åªèƒ½æ˜¯å­—ç¬¦ä¸²
        return jsonObject.getString("msg");
    }
    //ç”¨äºå¼‚æ­¥è°ƒç”¨
    @JavascriptInterface
    void testAsyn(JSONObject jsonObject, CompletionHandler handler) throws JSONException {
        handler.complete(jsonObject.getString("msg"));
    }
}

// å°†å®ç°çš„APIå®‰è£…åˆ° DWebView
import wendu.dsbridge.DWebView
DWebView dwebView= (DWebView) findViewById(R.id.dwebview);
dwebView.setJavascriptInterface(new JsApi());


// åœ¨h5é¡µé¢ä¸­è°ƒç”¨ Java API
var dsBridge=require("dsbridge")
// åŒæ­¥è°ƒç”¨
var str=dsBridge.call("testSyn", {msg: "testSyn"});
// å¼‚æ­¥è°ƒç”¨
dsBridge.call("testAsyn", {msg: "testAsyn"}, function (v) {
  alert(v);
})
```

### åŸç”Ÿè°ƒç”¨ h5

åŸç†ï¼šè°ƒç”¨ evaluateJavaScript:completionHandler:æ‰§è¡Œ js å‡½æ•° `window._handleMessageFromNative` è°ƒç”¨ js æ³¨å†Œçš„æ–¹æ³•ã€‚

```js
//Javascript æ³¨å†Œä¾› Nativeè°ƒç”¨çš„ API
 dsBridge.register('addValue',function(l,r){
     return l+r;
 })

// åœ¨ Java ä¸­è°ƒç”¨ javascript API
webView.callHandler("addValue",new Object[]{1,"hello"},new OnReturnValue(){
       @Override
       public void onValue(String retValue) {
          Log.d("jsbridge","return value is "+retValue);
       }
});
```

ä¸ºäº†å…¼å®¹ Android å’Œ IOS ï¼ŒDSBridge å¯¹ Native API çš„ç­¾åæœ‰ä¸¤ä¸ªè¦æ±‚ï¼š

- è¿”å›å€¼å¿…é¡»æ˜¯ Stringï¼Œ å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œç›´æ¥è¿”å› null å°±è¡Œ
- API çš„å‚æ•°é€šè¿‡ JSONObject ä¼ é€’ï¼Œå¦‚æœæœ‰äº› API æ²¡æœ‰å‚æ•°ï¼Œä¹Ÿéœ€è¦ç”³æ˜ã€‚

### è°ƒç”¨æ—¶æœº

DSBridge è¿˜æä¾›äº†ä¸€ä¸ª WebViewClient ç±»ï¼Œç”¨äºç›‘å¬ WebView çš„å„ç§äº‹ä»¶ï¼Œå¦‚é¡µé¢åŠ è½½å®Œæˆã€é¡µé¢åŠ è½½å¤±è´¥ç­‰ã€‚é€šè¿‡è¿™äº›äº‹ä»¶çš„ç›‘å¬ï¼Œå¯ä»¥å®ç°æ›´åŠ å¤æ‚çš„äº¤äº’é€»è¾‘ï¼Œæ¯”å¦‚åœ¨é¡µé¢åŠ è½½å®Œæˆåå†è°ƒç”¨åŸç”Ÿä»£ç ï¼Œæˆ–åœ¨é¡µé¢åŠ è½½å¤±è´¥æ—¶è°ƒç”¨ JavaScript ä»£ç æç¤ºç”¨æˆ·ç­‰ã€‚

DWebview åªæœ‰åœ¨ javascript context åˆå§‹åŒ–æˆåŠŸåæ‰èƒ½æ­£ç¡®æ‰§è¡Œ js ä»£ç ï¼Œè€Œ javascript context åˆå§‹åŒ–å®Œæˆçš„æ—¶æœºä¸€èˆ¬éƒ½æ¯”æ•´ä¸ªé¡µé¢åŠ è½½å®Œæ¯•è¦æ—©ï¼Œéšç„¶ DSBridge èƒ½æ•è·åˆ° javascript context åˆå§‹åŒ–å®Œæˆçš„æ—¶æœºï¼Œä½†æ˜¯ä¸€äº› js api å¯èƒ½å£°æ˜åœ¨é¡µé¢å°¾éƒ¨ï¼Œç”šè‡³å•ç‹¬çš„ js æ–‡ä»¶ä¸­ï¼ˆè¯·åŠ¡å¿…ä¸è¦è¿™ä¹ˆåšï¼‰ï¼Œå¦‚æœåœ¨ javascript context åˆšåˆå§‹åŒ–å®Œæˆå°±è°ƒç”¨ js api, æ­¤æ—¶ js api å¯èƒ½è¿˜æ²¡æœ‰æ³¨å†Œï¼Œæ‰€ä»¥ä¼šå¤±è´¥ï¼Œç»¼ä¸Šæ‰€è¿°ï¼Œå¦‚æœæ˜¯å®¢æˆ·ç«¯ä¸»åŠ¨è°ƒç”¨ js åº”è¯¥åœ¨ onPageFinished åè°ƒç”¨ã€‚ç®€å•çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

```java
webView.setWebViewClient(new WebViewClient(){
    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        //æœŸæœ›è¿”å›å€¼
        webView.callHandler("test",new Object[]{1,"hello"},new CompletionHandler(){
            @Override
            public void complete(String retValue) {
                Log.d("jsbridge","call succeed,return value is "+retValue);
            }
        });
        //ä¸æœŸæœ›è¿”å›å€¼
        webView.callHandler("test",null);
    }
});
```

## DSBridge åŸç†

JS æ ¸å¿ƒï¼š

```js
var bridge = {
  // jsè°ƒç”¨nativeçš„æ–¹æ³•å…¥å£
  call: function (method, args, cb) {
    arg = JSON.stringify(arg);

    if (window._dsbridge) {
      ret = _dsbridge.call(method, arg);
    } else if (window._dswk || navigator.userAgent.indexOf("_dsbridge") != -1) {
      // è°ƒç”¨promptå‡½æ•°ï¼ŒNativeä¼šæ‹¦æˆªpromptäº‹ä»¶ï¼Œç„¶åæ‰§è¡Œ
      ret = prompt("_dsbridge=" + method, arg);
    }

    return JSON.parse(ret || "{}").data;
  },

  //Nativeè°ƒç”¨çš„æ–¹æ³•ä½¿ç”¨æ­¤æ–¹æ³•æ³¨å†Œ
  // å¾€windowæ³¨å…¥å…¨å±€å‚æ•°ï¼Œå¦‚å­˜å‚¨jsçš„æ³¨å†Œæ–¹æ³•ç­‰ã€‚
  register: function (name, fun, asyn) {
    //æ³¨å†Œçš„æ–¹æ³•ä¼šä¿å­˜åˆ°windowä¸Šï¼Œæ–¹ä¾¿åŸç”Ÿè°ƒç”¨
    var q = asyn ? window._dsaf : window._dsf;
    //objectç±»å‹ä¿å­˜åˆ°_obsä¸‹ï¼Œæ–¹æ³•ç›´æ¥ä¿å­˜åˆ°_dsf(_dsaf)ä¸‹
    if (typeof fun == "object") {
      q._obs[name] = fun;
    } else {
      q[name] = fun;
    }
  },
};
```

Native æ ¸å¿ƒï¼š

```js
//ç«‹å³æ‰§è¡Œå‡½æ•°
!function () {
  //åˆ¤æ–­æ˜¯å¦éœ€è¦ç»™windowè¿›è¡Œå‚æ•°æ·»åŠ ï¼Œå¦‚æœæ²¡æœ‰æ·»åŠ ä¼šæŠŠobå†…å‚æ•°è¿›è¡Œä¸€æ¬¡æ·»åŠ 
  if (window._dsf) return;

  // åŸç”Ÿåˆå§‹åŒ–æ—¶ï¼Œä¼šæŠŠæ•°æ®æŒ‚è½½åˆ°windowä¸Š
  var ob = {
    // æ˜¯å¦åœ¨åŸç”Ÿwebviewä¸­è¿è¡Œ
    _dswk: true,
    //å­˜å‚¨åŒæ­¥æ–¹æ³•å’Œç›¸å…³å¯¹è±¡
    _dsf: { _obs: {} },
    //å­˜å‚¨å¼‚æ­¥æ–¹æ³•å’Œç›¸å…³å¯¹è±¡
    _dsaf: { _obs: {} },
    dscb: 0, //é¿å…æ–¹æ³•åŒåæ¯æ¬¡åŠ 1
    _dsBridge: bridge,

    //å¤„ç†Nativeè°ƒç”¨jsæ–¹æ³•ï¼Œæ ¸å¿ƒå®ç°å¦‚ä¸‹
    _handleMessageFromNative: function (info) {
      // é€šè¿‡info.method è·å–æ–¹æ³•å®ç°
      var f = this._dsf[info.method];

      // é€šè¿‡info.data è·å–å…¥å‚ï¼Œæ•°ç»„å½¢å¼
      var arg = JSON.parse(info.data);

      // ä½¿ç”¨applyå‡½æ•°ï¼Œè°ƒç”¨å‡½æ•°
      f.apply(ob, arg);
    },
  };
};
```
