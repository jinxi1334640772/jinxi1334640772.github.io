import{_ as a,c as i,a3 as n,o as e}from"./js/framework-ohJJpums.js";const l="/assets/png/image-Dxnn9C1v.png",t="/assets/png/image-1-DxHm4enj.png",p="/assets/png/image-2-DMrHNTC_.png",r="/assets/png/image-4-CQIHa-pc.png",h="/assets/png/image-8-CEY3o30J.png",d="/assets/png/image-3-DdPCPtD6.png",k="/assets/png/image-7-DXIGhzf-.png",o="/assets/png/image-5-CGbAjnLE.png",c="/assets/png/image-6-Bh9bBZnJ.png",v=JSON.parse('{"title":"🔍 Whistle 代理调试工具完全指南","description":"Whistle 是基于 Node.js 的代理工具，支持 HTTP/HTTPS/WebSocket 抓包、Mock、修改等功能","frontmatter":{"title":"🔍 Whistle 代理调试工具完全指南","description":"Whistle 是基于 Node.js 的代理工具，支持 HTTP/HTTPS/WebSocket 抓包、Mock、修改等功能","outline":"deep"},"headers":[],"relativePath":"tools/package/whistle.md","filePath":"tools/package/whistle.md","lastUpdated":1751271078000}'),b={name:"tools/package/whistle.md"};function g(u,s,m,F,y,C){return e(),i("div",null,s[0]||(s[0]=[n(`<h1>🔍 Whistle 代理调试工具完全指南</h1><blockquote><p>Whistle 是一款基于 Node.js 实现的，类似 Fiddler、Charles 的代理工具，可用于 HTTP、WebSocket 等请求的抓取、编辑、重放等功能。</p></blockquote><h2 id="-" tabindex="-1">📖 概述 <a class="header-anchor" href="#-" aria-label="Permalink to &quot;📖 概述&quot;">​</a></h2><p>与 Fiddler 等其他代理工具不同，Whistle 采用了类似于配置系统 hosts 的方式，使得一切操作都可以通过配置来实现。这使得使用 Whistle 变得更加简单和直观。</p><h3 id="--1" tabindex="-1">✨ 主要功能 <a class="header-anchor" href="#--1" aria-label="Permalink to &quot;✨ 主要功能&quot;">​</a></h3><table tabindex="0"><thead><tr><th>功能分类</th><th>具体功能</th><th>应用场景</th></tr></thead><tbody><tr><td>🔍 <strong>抓包调试</strong></td><td>HTTP/HTTPS/WebSocket 抓包</td><td>接口调试、问题排查</td></tr><tr><td>🎭 <strong>数据模拟</strong></td><td>Mock 数据、修改返回数据</td><td>前端开发、测试</td></tr><tr><td>🌐 <strong>代理转发</strong></td><td>请求转发、环境切换</td><td>开发环境配置</td></tr><tr><td>📝 <strong>脚本注入</strong></td><td>注入自定义脚本</td><td>自动化测试、提效工具</td></tr><tr><td>🐌 <strong>网络模拟</strong></td><td>延迟模拟弱网</td><td>性能测试</td></tr></tbody></table><h2 id="--2" tabindex="-1">📦 安装和启动 <a class="header-anchor" href="#--2" aria-label="Permalink to &quot;📦 安装和启动&quot;">​</a></h2><h3 id="-whistle" tabindex="-1">🔧 安装 Whistle <a class="header-anchor" href="#-whistle" aria-label="Permalink to &quot;🔧 安装 Whistle&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 通过 npm 全局安装 Whistle</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> whistle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用 yarn 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> whistle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用 pnpm 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> whistle</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="--3" tabindex="-1">🚀 启动命令 <a class="header-anchor" href="#--3" aria-label="Permalink to &quot;🚀 启动命令&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动 Whistle 代理服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重新启动 Whistle 代理服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看运行状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 停止运行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看帮助信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">💡 默认配置</p><p>默认情况下，Whistle 服务器会监听本地的 <strong>8899</strong> 端口。 访问管理后台：<code>http://127.0.0.1:8899/</code></p></div><h2 id="--4" tabindex="-1">🌐 代理配置 <a class="header-anchor" href="#--4" aria-label="Permalink to &quot;🌐 代理配置&quot;">​</a></h2><h3 id="--5" tabindex="-1">🔧 配置方式对比 <a class="header-anchor" href="#--5" aria-label="Permalink to &quot;🔧 配置方式对比&quot;">​</a></h3><table tabindex="0"><thead><tr><th>配置方式</th><th>影响范围</th><th>优点</th><th>缺点</th><th>推荐度</th></tr></thead><tbody><tr><td><strong>全局代理</strong></td><td>系统全局</td><td>覆盖所有应用</td><td>影响其他应用</td><td>⭐⭐</td></tr><tr><td><strong>浏览器代理</strong></td><td>当前浏览器</td><td>不影响其他应用</td><td>需要插件支持</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td><strong>移动端代理</strong></td><td>移动设备</td><td>支持移动端调试</td><td>配置相对复杂</td><td>⭐⭐⭐⭐</td></tr></tbody></table><h3 id="--6" tabindex="-1">🌍 全局代理配置 <a class="header-anchor" href="#--6" aria-label="Permalink to &quot;🌍 全局代理配置&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">⚠️ 注意</p><p>全局代理会影响所有应用的网络请求，不建议日常使用。</p></div><ol><li>在系统设置中搜索「代理」</li><li>找到代理服务器配置</li><li>开启代理服务器</li><li>输入 Whistle 代理服务的 IP 地址和端口号 (8899)</li><li>保存配置</li></ol><p><img src="`+l+'" alt="全局代理配置"></p><h3 id="--7" tabindex="-1">🔌 浏览器代理配置（推荐） <a class="header-anchor" href="#--7" aria-label="Permalink to &quot;🔌 浏览器代理配置（推荐）&quot;">​</a></h3><p>推荐使用 <strong>SwitchyOmega</strong> 插件进行浏览器代理配置：</p><h4>📥 安装 SwitchyOmega</h4><ol><li>在浏览器扩展商店搜索 <code>SwitchyOmega</code></li><li>安装 SwitchyOmega 扩展</li></ol><h4>⚙️ 配置代理</h4><ol><li>打开 SwitchyOmega 设置页面</li><li>创建新的情景模式或编辑现有模式</li><li>配置代理参数： <ul><li><strong>代理协议</strong>: HTTP</li><li><strong>代理服务器</strong>: 127.0.0.1 (或 Whistle 服务器 IP)</li><li><strong>端口</strong>: 8899</li></ul></li><li>配置不走代理的地址列表（可选）</li><li>应用配置并选择该情景模式</li></ol><p><img src="'+t+'" alt="SwitchyOmega 配置"><img src="'+p+'" alt="代理设置详情"></p><h3 id="--8" tabindex="-1">📱 移动端代理配置 <a class="header-anchor" href="#--8" aria-label="Permalink to &quot;📱 移动端代理配置&quot;">​</a></h3><h4>🔧 配置步骤</h4><ol><li><strong>确保网络连通</strong>: 移动设备与 Whistle 服务器在同一网络</li><li><strong>获取服务器 IP</strong>: 查看 Whistle 服务器的局域网 IP 地址</li><li><strong>配置移动端代理</strong>: <ul><li>打开移动端 WiFi 设置</li><li>进入详细配置</li><li>找到代理服务器配置</li><li>输入 Whistle 的 IP 地址和端口号 (8899)</li></ul></li></ol><p><img src="'+r+'" alt="移动端代理配置1"><img src="'+h+'" alt="移动端代理配置2"></p><h4>🚫 防火墙问题解决</h4><p>如果配置完代理后手机无法访问，可能是防火墙限制：</p><div class="warning custom-block"><p class="custom-block-title">🔥 防火墙设置</p><ul><li>关闭 Windows 防火墙</li><li>或者设置防火墙白名单允许 8899 端口</li><li>参考: <a href="http://jingyan.baidu.com/article/870c6fc317cae7b03ee4be48.html" target="_blank" rel="noreferrer">防火墙配置教程</a></li></ul></div><h2 id="--9" tabindex="-1">🎯 使用界面 <a class="header-anchor" href="#--9" aria-label="Permalink to &quot;🎯 使用界面&quot;">​</a></h2><h3 id="-network-" tabindex="-1">📊 Network 面板 <a class="header-anchor" href="#-network-" aria-label="Permalink to &quot;📊 Network 面板&quot;">​</a></h3><p>在 Whistle 管理后台 (<code>http://127.0.0.1:8899/</code>) 的 Network 面板中：</p><ul><li>📋 <strong>查看请求列表</strong>: 显示所有被拦截的 HTTP 请求</li><li>🎨 <strong>状态颜色区分</strong>: 不同状态的请求显示不同颜色</li><li>🔍 <strong>请求详情</strong>: 点击请求查看详细内容</li><li>📈 <strong>实时监控</strong>: 实时显示网络请求</li></ul><p><img src="'+d+'" alt="Network 面板"></p><h3 id="-rules-" tabindex="-1">⚙️ Rules 面板 <a class="header-anchor" href="#-rules-" aria-label="Permalink to &quot;⚙️ Rules 面板&quot;">​</a></h3><p>在 Rules 面板中可以：</p><ul><li>📝 <strong>配置转发规则</strong>: 设置请求拦截和转发</li><li>✅ <strong>启用/禁用规则</strong>: 灵活控制规则状态</li><li>🔄 <strong>正则模式</strong>: 支持正则表达式匹配</li><li>💾 <strong>规则管理</strong>: 保存和管理多套规则</li></ul><p><img src="https://user-images.githubusercontent.com/11450939/169522482-92ebb644-c0ae-49d5-8934-a8652cc1544b.gif" alt="Whistle 操作演示"></p><p><img src="'+k+'" alt="Rules 配置"></p><h2 id="-https-websocket-" tabindex="-1">🔒 HTTPS 和 WebSocket 支持 <a class="header-anchor" href="#-https-websocket-" aria-label="Permalink to &quot;🔒 HTTPS 和 WebSocket 支持&quot;">​</a></h2><h3 id="--10" tabindex="-1">📜 证书安装 <a class="header-anchor" href="#--10" aria-label="Permalink to &quot;📜 证书安装&quot;">​</a></h3><p>要拦截 HTTPS 请求，需要安装 CA 证书：</p><h4>💻 桌面端证书安装</h4><ol><li>在 Whistle 后台打开 Network 面板</li><li>点击 <strong>HTTPS</strong> 按钮</li><li>勾选以下两个选项： <ul><li>☑️ Capture HTTPS CONNECTs</li><li>☑️ Enable HTTPS</li></ul></li><li>点击 <strong>Download RootCA</strong> 下载证书</li><li>安装证书到系统信任区域</li></ol><p><img src="'+o+'" alt="HTTPS 证书配置"><img src="'+c+`" alt="证书安装"></p><h4>📱 移动端证书安装</h4><ul><li>扫描 Whistle 后台提供的二维码</li><li>下载并安装证书到移动设备</li></ul><div class="tip custom-block"><p class="custom-block-title">💡 证书说明</p><p>安装证书后，Whistle 就能够拦截和分析 HTTPS 和 WebSocket 请求了。</p></div><h2 id="--11" tabindex="-1">📜 规则配置语法 <a class="header-anchor" href="#--11" aria-label="Permalink to &quot;📜 规则配置语法&quot;">​</a></h2><h3 id="-hosts-" tabindex="-1">🏠 基础 Hosts 配置 <a class="header-anchor" href="#-hosts-" aria-label="Permalink to &quot;🏠 基础 Hosts 配置&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 基础域名映射 (从左到右，等同于 hosts 从右到左)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test1.wproxy.org</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test2.wproxy.org</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 127.0.0.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 支持端口和路径</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test1.wproxy.org/path/to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https://test2.wproxy.org/path1/to1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:6001</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 正则匹配</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/google/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:6001</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">w.:-]+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)/ host://</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">$1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CNAME 支持</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test1.wproxy.org/path/to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> host://www.qq.com:8080</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="--12" tabindex="-1">🍪 请求修改 <a class="header-anchor" href="#--12" aria-label="Permalink to &quot;🍪 请求修改&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改请求 Cookie</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">www.qq.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reqCookies://custom_key1=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;custom_key2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">789</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置请求头</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http://example.com/*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reqHeaders://\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">host</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">m.aliexpress.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reqHeaders://{req-headers}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 请求替换</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.wproxy.org/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file:///Users/xx/statics</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.wproxy.org/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">test</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://ke.qq.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="--13" tabindex="-1">🎨 界面和调试 <a class="header-anchor" href="#--13" aria-label="Permalink to &quot;🎨 界面和调试&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置列表样式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">baidu.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> style://color=@fff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;fontStyle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">italic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;bgColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">red</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看 JS 报错及页面 console.log</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ke.qq.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log://</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 设置 weinre 用于调试远程页面</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ke.qq.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weinre://test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="--14" tabindex="-1">🔄 响应控制 <a class="header-anchor" href="#--14" aria-label="Permalink to &quot;🔄 响应控制&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 模拟响应 500 (请求不会到后台服务)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test3.wproxy.org/path/to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> statusCode://500</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改响应状态码 (请求会到后台服务)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test4.wproxy.org/path/to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> replaceStatus://400</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 302 重定向</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test5.wproxy.org/path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redirect://https://ke.qq.com/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 301 重定向</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">test6.wproxy.org/path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redirect://https://ke.qq.com/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> replaceStatus://301</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="--15" tabindex="-1">💉 脚本注入 <a class="header-anchor" href="#--15" aria-label="Permalink to &quot;💉 脚本注入&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 注入 JavaScript</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ke.qq.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jsPrepend://{test.js}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 返回 HTML 文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">www.test.com/index.html</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file://{test.html}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="--16" tabindex="-1">🔧 变量使用 <a class="header-anchor" href="#--16" aria-label="Permalink to &quot;🔧 变量使用&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用变量</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">www.test.com/api</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">clientIp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:8080\`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用文件变量</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">http://</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`{test.json}\`</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="--17" tabindex="-1">🚀 高级功能 <a class="header-anchor" href="#--17" aria-label="Permalink to &quot;🚀 高级功能&quot;">​</a></h2><h3 id="--18" tabindex="-1">📋 完整协议列表 <a class="header-anchor" href="#--18" aria-label="Permalink to &quot;📋 完整协议列表&quot;">​</a></h3><table tabindex="0"><thead><tr><th>协议类别</th><th>协议名称</th><th>功能描述</th></tr></thead><tbody><tr><td><strong>功能扩展</strong></td><td><code>@</code></td><td>功能扩展及引入远程规则</td></tr><tr><td><strong>UI 样式</strong></td><td><code>style</code></td><td>设置抓包列表样式</td></tr><tr><td><strong>代理设置</strong></td><td><code>proxy</code></td><td>HTTP 代理服务器</td></tr><tr><td></td><td><code>https-proxy</code></td><td>HTTPS 代理服务器</td></tr><tr><td></td><td><code>socks</code></td><td>SOCKS 代理服务器</td></tr><tr><td></td><td><code>pac</code></td><td>PAC 脚本设置</td></tr><tr><td><strong>请求控制</strong></td><td><code>reqDelay</code></td><td>延迟请求</td></tr><tr><td></td><td><code>reqSpeed</code></td><td>限制请求速度</td></tr><tr><td></td><td><code>method</code></td><td>修改请求方法</td></tr><tr><td><strong>请求头修改</strong></td><td><code>referer</code></td><td>修改请求 referer</td></tr><tr><td></td><td><code>auth</code></td><td>修改用户名密码</td></tr><tr><td></td><td><code>ua</code></td><td>修改 user-agent</td></tr><tr><td></td><td><code>reqHeaders</code></td><td>修改请求头</td></tr><tr><td><strong>响应控制</strong></td><td><code>resDelay</code></td><td>延迟响应</td></tr><tr><td></td><td><code>resSpeed</code></td><td>限制响应速度</td></tr><tr><td></td><td><code>statusCode</code></td><td>直接响应状态码</td></tr><tr><td></td><td><code>resHeaders</code></td><td>修改响应头</td></tr></tbody></table><h3 id="--19" tabindex="-1">🔄 内容修改 <a class="header-anchor" href="#--19" aria-label="Permalink to &quot;🔄 内容修改&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 请求内容修改</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reqPrepend://data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 往请求内容前面添加数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reqBody://data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 替换请求内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reqAppend://data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 往请求内容后面追加数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reqReplace://pattern</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 正则替换请求内容</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 响应内容修改</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resPrepend://data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 往响应内容前面添加数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resBody://data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 替换响应内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resAppend://data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 往响应内容后面追加数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resReplace://pattern</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 正则替换响应内容</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="--20" tabindex="-1">📁 文件替换 <a class="header-anchor" href="#--20" aria-label="Permalink to &quot;📁 文件替换&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 文件替换协议</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">file://path</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # 替换本地文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xfile://path</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 替换本地文件，找不到继续请求线上</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tpl://path</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # 模板文件，支持 jsonp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rawfile://path</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # HTTP 响应格式文件</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="--21" tabindex="-1">🎯 实际应用场景 <a class="header-anchor" href="#--21" aria-label="Permalink to &quot;🎯 实际应用场景&quot;">​</a></h2><h3 id="--22" tabindex="-1">🔧 开发环境配置 <a class="header-anchor" href="#--22" aria-label="Permalink to &quot;🔧 开发环境配置&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将生产环境的前端资源代理到本地开发环境</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prod.example.com/static/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:3000/static/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将特定接口代理到测试环境</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prod.example.com/api/user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://test-api.example.com/api/user</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="-mock" tabindex="-1">🎭 数据 Mock <a class="header-anchor" href="#-mock" aria-label="Permalink to &quot;🎭 数据 Mock&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Mock 接口返回数据</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">api.example.com/user/info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file://{user-info.json}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Mock 错误状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">api.example.com/error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> statusCode://500</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="--23" tabindex="-1">🐛 调试辅助 <a class="header-anchor" href="#--23" aria-label="Permalink to &quot;🐛 调试辅助&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 注入调试脚本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">m.example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jsPrepend://{debug.js}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用远程调试</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">m.example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weinre://mobile-debug</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="--24" tabindex="-1">🌐 网络模拟 <a class="header-anchor" href="#--24" aria-label="Permalink to &quot;🌐 网络模拟&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 模拟慢网络</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slow.example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reqSpeed://10kb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resSpeed://10kb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 模拟网络延迟</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">delay.example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reqDelay://2000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resDelay://1000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="--25" tabindex="-1">🎨 最佳实践 <a class="header-anchor" href="#--25" aria-label="Permalink to &quot;🎨 最佳实践&quot;">​</a></h2><h3 id="--26" tabindex="-1">✅ 推荐做法 <a class="header-anchor" href="#--26" aria-label="Permalink to &quot;✅ 推荐做法&quot;">​</a></h3><div class="tip custom-block"><p class="custom-block-title">🎯 最佳实践</p><ol><li><strong>规则分组管理</strong>: 按项目或功能对规则进行分组</li><li><strong>使用注释</strong>: 为复杂规则添加注释说明</li><li><strong>环境隔离</strong>: 不同环境使用不同的规则集</li><li><strong>定期清理</strong>: 删除不再使用的规则和证书</li><li><strong>备份配置</strong>: 定期备份重要的规则配置</li></ol></div><h3 id="--27" tabindex="-1">🚫 注意事项 <a class="header-anchor" href="#--27" aria-label="Permalink to &quot;🚫 注意事项&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">⚠️ 安全提醒</p><ul><li>不要在生产环境使用代理</li><li>注意保护敏感信息不被泄露</li><li>及时关闭不需要的代理服务</li><li>定期更新 Whistle 版本</li></ul></div><h2 id="--28" tabindex="-1">🌟 总结 <a class="header-anchor" href="#--28" aria-label="Permalink to &quot;🌟 总结&quot;">​</a></h2><p>Whistle 是一个功能强大的代理调试工具，特别适合：</p><ul><li>✅ <strong>前端开发</strong>: 接口调试、数据 Mock、环境切换</li><li>✅ <strong>移动端调试</strong>: 移动端网络请求分析</li><li>✅ <strong>性能测试</strong>: 网络条件模拟</li><li>✅ <strong>自动化测试</strong>: 脚本注入、数据拦截</li><li>✅ <strong>问题排查</strong>: 网络请求分析、错误定位</li></ul><p>通过灵活的规则配置，Whistle 能够满足各种复杂的调试需求，是前端开发者必备的调试工具之一。</p>`,90)]))}const D=a(b,[["render",g]]);export{v as __pageData,D as default};
