import{_ as n,c as l,a3 as i,j as a,o as p}from"./js/framework-ohJJpums.js";const g=JSON.parse('{"title":"Electron æ¡Œé¢åº”ç”¨å¼€å‘æŒ‡å—","description":"ä½¿ç”¨ JavaScriptã€HTML å’Œ CSS æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼ŒæŒæ¡ Electron ä¸»è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹å’Œè¿›ç¨‹é—´é€šä¿¡","frontmatter":{"title":"Electron æ¡Œé¢åº”ç”¨å¼€å‘æŒ‡å—","description":"ä½¿ç”¨ JavaScriptã€HTML å’Œ CSS æ„å»ºè·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼ŒæŒæ¡ Electron ä¸»è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹å’Œè¿›ç¨‹é—´é€šä¿¡","outline":"deep"},"headers":[],"relativePath":"spanEnd/electron.md","filePath":"spanEnd/electron.md","lastUpdated":1753880038000}'),e={name:"spanEnd/electron.md"};function t(h,s,k,r,E,d){return p(),l("div",null,s[0]||(s[0]=[i('<h1>ğŸ’» Electron æ¡Œé¢åº”ç”¨å¼€å‘æŒ‡å—</h1><p>Electron æ˜¯ä¸€ä¸ªä½¿ç”¨ JavaScriptã€HTML å’Œ CSS æ„å»ºæ¡Œé¢åº”ç”¨çš„å¼ºå¤§æ¡†æ¶ã€‚é€šè¿‡å°† Chromium å’Œ Node.js åµŒå…¥åˆ°åº”ç”¨ä¸­ï¼ŒElectron è®© Web å¼€å‘è€…èƒ½å¤Ÿåˆ›å»ºè·¨å¹³å°çš„åŸç”Ÿæ¡Œé¢åº”ç”¨ã€‚</p><div class="tip custom-block"><p class="custom-block-title">ğŸ“š æœ¬ç« å†…å®¹</p><p>å…¨é¢å­¦ä¹  Electron åº”ç”¨æ¶æ„ã€ä¸»è¿›ç¨‹ç®¡ç†ã€æ¸²æŸ“è¿›ç¨‹é€šä¿¡å’Œæ¡Œé¢åº”ç”¨å¼€å‘æœ€ä½³å®è·µã€‚</p></div><h2 id="1-electron-" tabindex="-1">1. Electron æ¶æ„æ¦‚è§ˆ <a class="header-anchor" href="#1-electron-" aria-label="Permalink to &quot;1. Electron æ¶æ„æ¦‚è§ˆ&quot;">â€‹</a></h2><h3 id="1-1-" tabindex="-1">1.1 æ ¸å¿ƒç‰¹æ€§ <a class="header-anchor" href="#1-1-" aria-label="Permalink to &quot;1.1 æ ¸å¿ƒç‰¹æ€§&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>è·¨å¹³å°</strong></td><td>Windowsã€macOSã€Linux</td><td>ä¸€å¥—ä»£ç å¤šå¹³å°è¿è¡Œ</td></tr><tr><td><strong>Web æŠ€æœ¯</strong></td><td>HTMLã€CSSã€JavaScript</td><td>é™ä½å­¦ä¹ æˆæœ¬</td></tr><tr><td><strong>åŸç”Ÿé›†æˆ</strong></td><td>ç³»ç»Ÿ API è®¿é—®</td><td>å®Œæ•´çš„æ¡Œé¢åº”ç”¨ä½“éªŒ</td></tr><tr><td><strong>ä¸°å¯Œç”Ÿæ€</strong></td><td>npm ç”Ÿæ€ç³»ç»Ÿ</td><td>æµ·é‡ç¬¬ä¸‰æ–¹åº“æ”¯æŒ</td></tr></tbody></table><h3 id="1-2-" tabindex="-1">1.2 è¿›ç¨‹æ¶æ„ <a class="header-anchor" href="#1-2-" aria-label="Permalink to &quot;1.2 è¿›ç¨‹æ¶æ„&quot;">â€‹</a></h3><p>Electron åº”ç”¨é‡‡ç”¨å¤šè¿›ç¨‹æ¶æ„ï¼Œåˆ†ä¸ºä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ï¼š</p>',8),a("figure",{class:"vpd-diagram vpd-diagram--mermaid",onclick:`
        const figure = this;
        const isFullscreen = figure.classList.contains('vpd-diagram--fullscreen');
        
        document.querySelectorAll('.vpd-diagram').forEach(diagram => {
          diagram.classList.remove('vpd-diagram--fullscreen');
        });

        if (!isFullscreen) {
          figure.classList.add('vpd-diagram--fullscreen');
        }
      `},[a("img",{src:"/diagrams/mermaid-fd875a7058adde2d8431360805b8e516.svg",alt:"mermaid Diagram",class:"vpd-diagram-image"})],-1),i(`<h4>1.2.1 ä¸»è¿›ç¨‹ï¼ˆMain Processï¼‰</h4><p><strong>ä¸»è¿›ç¨‹</strong>æ˜¯ Electron åº”ç”¨çš„å…¥å£ç‚¹å’Œæ§åˆ¶ä¸­å¿ƒï¼š</p><ul><li>ğŸš€ <strong>åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong> - æ§åˆ¶åº”ç”¨å¯åŠ¨ã€é€€å‡º</li><li>ğŸªŸ <strong>çª—å£ç®¡ç†</strong> - åˆ›å»ºå’Œç®¡ç† BrowserWindow å®ä¾‹</li><li>ğŸ” <strong>ç³»ç»Ÿæƒé™</strong> - è®¿é—® Node.js API å’Œç³»ç»Ÿèµ„æº</li><li>ğŸ“¡ <strong>è¿›ç¨‹é€šä¿¡</strong> - ä¸æ¸²æŸ“è¿›ç¨‹è¿›è¡Œ IPC é€šä¿¡</li><li>âš™ï¸ <strong>åŸç”ŸåŠŸèƒ½</strong> - èœå•ã€æ‰˜ç›˜ã€é€šçŸ¥ç­‰åŸç”Ÿç‰¹æ€§</li></ul><h4>1.2.2 æ¸²æŸ“è¿›ç¨‹ï¼ˆRenderer Processï¼‰</h4><p><strong>æ¸²æŸ“è¿›ç¨‹</strong>è´Ÿè´£æ˜¾ç¤ºç”¨æˆ·ç•Œé¢ï¼š</p><ul><li>ğŸŒ <strong>Web ç¯å¢ƒ</strong> - è¿è¡Œåœ¨ Chromium ç¯å¢ƒä¸­</li><li>ğŸ¨ <strong>UI æ¸²æŸ“</strong> - ä½¿ç”¨ HTMLã€CSSã€JavaScript</li><li>ğŸ”’ <strong>å®‰å…¨éš”ç¦»</strong> - é»˜è®¤æ— æ³•è®¿é—® Node.js API</li><li>ğŸ“ <strong>é€šä¿¡æœºåˆ¶</strong> - é€šè¿‡ IPC ä¸ä¸»è¿›ç¨‹é€šä¿¡</li></ul><h2 id="2-" tabindex="-1">2. ä¸»è¿›ç¨‹å¼€å‘ <a class="header-anchor" href="#2-" aria-label="Permalink to &quot;2. ä¸»è¿›ç¨‹å¼€å‘&quot;">â€‹</a></h2><p>ä¸»è¿›ç¨‹æ˜¯ Electron åº”ç”¨çš„æ ¸å¿ƒï¼Œè´Ÿè´£åº”ç”¨çš„æ•´ä½“æ§åˆ¶å’Œç®¡ç†ã€‚</p><h3 id="2-1-" tabindex="-1">2.1 æ ¸å¿ƒæ¨¡å—å¯¼å…¥ <a class="header-anchor" href="#2-1-" aria-label="Permalink to &quot;2.1 æ ¸å¿ƒæ¨¡å—å¯¼å…¥&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ğŸ”¥ Electron æ ¸å¿ƒæ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app,                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åº”ç”¨ç¨‹åºæ§åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BrowserWindow,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// çª—å£ç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ipcMain,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸»è¿›ç¨‹ IPC é€šä¿¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  screen,                 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å±å¹•ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dialog,                 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç³»ç»Ÿå¯¹è¯æ¡†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  shell,                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç³»ç»Ÿ shell æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  nativeTheme,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç³»ç»Ÿä¸»é¢˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  session,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¼šè¯ç®¡ç†</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Menu,                   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åº”ç”¨èœå•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Tray,                   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç³»ç»Ÿæ‰˜ç›˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  globalShortcut,         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…¨å±€å¿«æ·é”®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  powerMonitor,           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”µæºç›‘æ§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  crashReporter,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å´©æºƒæŠ¥å‘Š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;electron&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ğŸŸ¢ Node.js æ¨¡å—ï¼ˆä¸»è¿›ç¨‹å¯å®Œæ•´ä½¿ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:path&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:os&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fileURLToPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:url&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ğŸ“ è·å–å½“å‰æ–‡ä»¶ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __dirname</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fileURLToPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="2-2-api-" tabindex="-1">2.2 ä¸»è¿›ç¨‹ API æ¦‚è§ˆ <a class="header-anchor" href="#2-2-api-" aria-label="Permalink to &quot;2.2 ä¸»è¿›ç¨‹ API æ¦‚è§ˆ&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ¨¡å—</th><th>ä¸»è¦åŠŸèƒ½</th><th>å¸¸ç”¨æ–¹æ³•</th></tr></thead><tbody><tr><td><strong>app</strong></td><td>åº”ç”¨ç”Ÿå‘½å‘¨æœŸ</td><td><code>whenReady()</code>, <code>quit()</code>, <code>focus()</code></td></tr><tr><td><strong>BrowserWindow</strong></td><td>çª—å£ç®¡ç†</td><td><code>new BrowserWindow()</code>, <code>loadURL()</code></td></tr><tr><td><strong>ipcMain</strong></td><td>è¿›ç¨‹é€šä¿¡</td><td><code>handle()</code>, <code>on()</code>, <code>once()</code></td></tr><tr><td><strong>dialog</strong></td><td>ç³»ç»Ÿå¯¹è¯æ¡†</td><td><code>showMessageBox()</code>, <code>showOpenDialog()</code></td></tr><tr><td><strong>shell</strong></td><td>ç³»ç»Ÿæ“ä½œ</td><td><code>openExternal()</code>, <code>showItemInFolder()</code></td></tr><tr><td><strong>session</strong></td><td>ä¼šè¯ç®¡ç†</td><td><code>defaultSession</code>, <code>loadExtension()</code></td></tr></tbody></table><h3 id="2-3-" tabindex="-1">2.3 ä¸»è¿›ç¨‹æ ¸å¿ƒåŠŸèƒ½å®ç° <a class="header-anchor" href="#2-3-" aria-label="Permalink to &quot;2.3 ä¸»è¿›ç¨‹æ ¸å¿ƒåŠŸèƒ½å®ç°&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> talkWithRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** ipcMainç”¨äºå’Œæ¸²æŸ“è¿›ç¨‹è¿›è¡Œé€šä¿¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * ç›‘å¬æ¸²æŸ“è¿›ç¨‹çš„talkäº‹ä»¶ï¼Œå›è°ƒå‡½æ•°æ¥å—äº‹ä»¶å¯¹è±¡å’Œä¼ è¿‡æ¥çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * é€šè¿‡on(eventName,callback)ç›‘å¬é€šè¿‡sendæ´¾å‘çš„äº‹ä»¶ã€‚åŒæ­¥äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * é€šè¿‡handle(eventName,callback)ç›‘å¬é€šè¿‡invokeæ´¾å‘çš„äº‹ä»¶ï¼Œå…¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * è¿”å›å€¼ä¼šå‘é€ç»™æ¸²æŸ“è¿›ç¨‹ã€‚ä¸ºå¼‚æ­¥äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ipcMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;talk&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    event.sender.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;talk&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŒå‘é€šä¿¡ï¼šé€šè¿‡senderæ‹¿åˆ°webContents,å†æ¬¡æ´¾å‘talkäº‹ä»¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æ¸²æŸ“è¿›ç¨‹ï¼Œä½ å¥½&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ipcMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleOnce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;onceEvent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åªä¼šå¼‚æ­¥é€šä¿¡ä¸€æ¬¡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ipcMain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    event.returnValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;æŠŠæ•°æ®åŒæ­¥å‘ç»™æ¸²æŸ“è¿›ç¨‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°è£…åˆ›å»ºæ–°çª—å£çš„å·¥å‚å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * ä½¿ç”¨BrowserWindow() çª—å£æ„é€ å™¨æ–°å»ºä¸€ä¸ªçª—å£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   *  getAllWindows()è·å–æ‰€æœ‰çª—å£å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   *  formId(windowId) è¿”å›windowIdå¯¹åº”çš„çª—å£å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   *  getFocusedWindow() è·å–èšç„¦çš„çª—å£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * çª—å£é…ç½®å¯¹è±¡ï¼šæ¯ä¸ªçª—å£éƒ½å±äºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * setPosition(x,y) è®¾ç½®çª—å£ä½ç½®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * getBounds()  è·å–çª—å£è¾¹ç•Œä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * setBounds({x,y,width,height})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * webContents  è·å–çª—å£webå†…å®¹å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * id çª—å£å”¯ä¸€æ ‡è¯†id</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * isMinimized() æ˜¯å¦æœ€å°çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * restore()  æ¢å¤çª—å£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * focus()  ä½¿çª—å£èšç„¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * removeAllListeners() å–æ¶ˆè®¢é˜…æ‰€æœ‰ä¸è¯¥çª—å£ç›¸å…³çš„äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * setProgressBar(number) è®¾ç½®æ‰˜ç›˜å›¾è¡¨è¿›åº¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * isDestroyed() æ˜¯å¦å·²ç»è¢«é”€æ¯</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * isFocused() æ˜¯å¦èšç„¦</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * loadURL(remoteURL) åŠ è½½è¿œç¨‹urlé¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * loadFile(&#39;index.html&#39;) åŠ è½½æœ¬åœ°é¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * getSize()  è·å–çª—å£å¤§å°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> çª—å£å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mainWindow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BrowserWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;çª—å£æ ‡é¢˜&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/hello.svg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ‰˜ç›˜å›¾è¡¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    width: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// çª—å£å®½åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// çª—å£é«˜åº¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    show: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ˜¯å¦æ˜¾ç¤ºçª—å£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // webåå¥½é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    webPreferences: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      offscreen: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ˜¯å¦æ˜¾ç¤ºUIé¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æ¸²æŸ“è¿›ç¨‹æ‰§è¡Œå‰éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œå…¶å±äºç‰¹æ®Šçš„æ¸²æŸ“è¿›ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      preload: path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./preload/preload.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æ˜¯å¦é›†æˆnodeï¼Œé›†æˆåå¯éƒ¨åˆ†ä½¿ç”¨nodeåŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      nodeIntegration: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // æ˜¯å¦ä¸Šä¸‹æ–‡éš”ç¦»ï¼Œéš”ç¦»åä¸èƒ½ä½¿ç”¨contextBridgeé€šä¿¡ï¼Œåªèƒ½ä½¿ç”¨è¿›ç¨‹é—´é€šè®¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      contextIsolation: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:5173/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mainWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;closed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;çª—å£å·²ç»å…³é—­äº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    childWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeAllListeners</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    childWindow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /** çª—å£é‡Œçš„å†…å®¹å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * send(&#39;eventName&#39;,data) åŒæ­¥è§¦å‘eventNameäº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * openDevTools() æ‰“å¼€å¼€å‘è€…å·¥å…·</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * setWindowOpenHandler(callback(content)=&gt;({action:&#39;deny&#39;}))</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> webContents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mainWindow.webContents;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  webContents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openDevTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  webContents.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;did-finish-load&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é¡µé¢èµ„æºåŠ è½½å®Œæ¯•æ‰§è¡Œï¼š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mainWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTitle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** appåº”ç”¨å·²ç»å®Œæˆåˆå§‹åŒ–å·¥ä½œï¼Œå‡†å¤‡åˆ›å»ºçª—å£</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * disableHardwareAcceleration() ç¦ç”¨GPUåŠ é€Ÿ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * getName() è·å–åº”ç”¨åç§°</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * setAppUserModelId()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * requestSingleInstanceLock() å•ä¾‹é”ï¼Œä¿è¯åªæœ‰ä¸€ä¸ªappè¿è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * quit() åœæ­¢è¿è¡Œï¼Œé€€å‡ºåº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * setAsDefaultProtocolClient(protocl,path,args) æ³¨å†Œåº”ç”¨å”¤é†’çš„åè®®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * isPackaged æ˜¯å¦è¢«æ‰“åŒ…è¿‡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> åˆå§‹åŒ–å®Œæˆåå…‘ç°çš„promise</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">whenReady</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  createWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆå§‹åŒ–ä¹‹åï¼Œå¼€å§‹åˆ›å»ºçª—å£</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;activate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * ç›¸æ¯”ä¹‹ä¸‹ï¼ŒmacOS åº”ç”¨é€šå¸¸å³ä½¿æ²¡æœ‰æ‰“å¼€ä»»ä½•çª—å£ä¹Ÿä¼šç»§ç»­è¿è¡Œã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * åœ¨æ²¡æœ‰å¯ç”¨çª—å£æ—¶æ¿€æ´»åº”ç”¨åº”è¯¥ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çª—å£ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (BrowserWindow.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAllWindows</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createWindow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ‰€æœ‰çª—å£å…³é—­åé€€å‡ºåº”ç”¨ï¼ˆWindows å’Œ Linuxï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;window-all-closed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.platform </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;darwin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">quit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;browser-window-created&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">v</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  talkWithRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¬¬äºŒä¸ªå®ä¾‹å”¤é†’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;second-instance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">workingDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  talkWithRender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br></div></div><h2 id="3-preload-" tabindex="-1">3. é¢„åŠ è½½è„šæœ¬ï¼ˆPreloadï¼‰ <a class="header-anchor" href="#3-preload-" aria-label="Permalink to &quot;3. é¢„åŠ è½½è„šæœ¬ï¼ˆPreloadï¼‰&quot;">â€‹</a></h2><p>é¢„åŠ è½½è„šæœ¬åœ¨æ¸²æŸ“è¿›ç¨‹çš„ç½‘é¡µåŠ è½½ä¹‹å‰è¿è¡Œï¼Œå¯ä»¥è®¿é—® DOM API å’Œéƒ¨åˆ† Node.js APIï¼Œæ˜¯ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹ä¹‹é—´çš„æ¡¥æ¢ã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * preloadè„šæœ¬ä¼šåœ¨index.htmlåŠ è½½å‰æ‰§è¡Œã€‚æœ‰æƒé™è®¿é—®web APIï¼Œå¯ä»¥è®¿é—®electronçš„ipcRendereræ¨¡å—ï¼Œå’Œéƒ¨åˆ†nodeåŠŸèƒ½ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">contextBridge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ipcRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;electron&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> talkWithMain</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * æ‹¿åˆ°æ¸²æŸ“è¿›ç¨‹ä¼ æ¥çš„valueï¼Œé€šè¿‡ipcRenderer.invoke(eventName,value)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * æ´¾å‘ä¸»è¿›ç¨‹çš„handle(eventName,callback(event,value)=&gt;{})äº‹ä»¶ç›‘å¬å™¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@return</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ä¸»è¿›ç¨‹handleçš„å›è°ƒå‡½æ•°è¿”å›çš„æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;talk&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// send invoke</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸»è¿›ç¨‹è¿”å›çš„æ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** contextBridgeä¸ºä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹çš„æ¡¥æ¢ï¼šå‘æ¸²æŸ“è¿›ç¨‹æš´éœ²å±æ€§å’Œæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * å½“å‰çª—å£æ²¡æœ‰é…ç½®contextIsolation:trueçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * contextBridge.exposeInMainWorld(key,value)ï¼Œå‘æ¸²æŸ“è¿›ç¨‹æš´éœ²æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æ¸²æŸ“è¿›ç¨‹å¯é€šè¿‡window.electronAPIæ‹¿åˆ°æ­¤æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">contextBridge.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exposeInMainWorld</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;electronAPI&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  talkWithMain,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// preloadå¯ä»¥ä½¿ç”¨web APIï¼Œå¯ä»¥ä½¿ç”¨éƒ¨åˆ†nodeåŠŸèƒ½process</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOMContentLoaded&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> replaceText</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> element</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(selector);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (element) element.innerText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;chrome&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;electron&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    replaceText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}-version\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, process.versions[type]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="4-" tabindex="-1">4. æ¸²æŸ“è¿›ç¨‹å¼€å‘ <a class="header-anchor" href="#4-" aria-label="Permalink to &quot;4. æ¸²æŸ“è¿›ç¨‹å¼€å‘&quot;">â€‹</a></h2><p>æ¸²æŸ“è¿›ç¨‹è´Ÿè´£ç”¨æˆ·ç•Œé¢çš„æ˜¾ç¤ºå’Œäº¤äº’ï¼Œé€šè¿‡ IPC ä¸ä¸»è¿›ç¨‹é€šä¿¡ã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€šè¿‡contextBridgeæš´éœ²çš„æ•°æ® å’Œä¸»è¿›ç¨‹é€šä¿¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> talkHandler</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.electronAPI.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">talkWithMain</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸»è¿›ç¨‹ï¼Œä½ å¥½å•Š&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›´æ¥ä½¿ç”¨è¿›ç¨‹é—´é€šä¿¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ipcRenderer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;electron&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬ä¸»è¿›ç¨‹çš„send(&#39;langChange&#39;,value) äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;langChange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åŒæ­¥ç›‘å¬langChangeäº‹ä»¶&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ´¾å‘ä¸»è¿›ç¨‹é€šè¿‡handleæ³¨å†Œçš„talkäº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ipcRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;talk&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸»è¿›ç¨‹è¿”å›çš„æ•°æ®&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="5-ipc-" tabindex="-1">5. è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ <a class="header-anchor" href="#5-ipc-" aria-label="Permalink to &quot;5. è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰&quot;">â€‹</a></h2><h3 id="5-1-" tabindex="-1">5.1 é€šä¿¡æ¨¡å¼ <a class="header-anchor" href="#5-1-" aria-label="Permalink to &quot;5.1 é€šä¿¡æ¨¡å¼&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>é€šä¿¡æ–¹å‘</th><th>åŒæ­¥æ–¹å¼</th><th>å¼‚æ­¥æ–¹å¼</th></tr></thead><tbody><tr><td>æ¸²æŸ“è¿›ç¨‹ â†’ ä¸»è¿›ç¨‹</td><td><code>ipcRenderer.sendSync()</code></td><td><code>ipcRenderer.send()</code>, <code>ipcRenderer.invoke()</code></td></tr><tr><td>ä¸»è¿›ç¨‹ â†’ æ¸²æŸ“è¿›ç¨‹</td><td>-</td><td><code>webContents.send()</code></td></tr></tbody></table><h3 id="5-2-" tabindex="-1">5.2 é€šä¿¡æœ€ä½³å®è·µ <a class="header-anchor" href="#5-2-" aria-label="Permalink to &quot;5.2 é€šä¿¡æœ€ä½³å®è·µ&quot;">â€‹</a></h3><ul><li>ä½¿ç”¨ <code>contextBridge</code> å®‰å…¨åœ°æš´éœ² API</li><li>ä¼˜å…ˆä½¿ç”¨å¼‚æ­¥é€šä¿¡ï¼ˆ<code>invoke/handle</code>ï¼‰</li><li>é¿å…é¢‘ç¹çš„ IPC é€šä¿¡ï¼Œå‡å°‘æ€§èƒ½å¼€é”€</li><li>ä½¿ç”¨ <code>ipcRenderer.once()</code> å’Œ <code>ipcMain.handleOnce()</code> å¤„ç†ä¸€æ¬¡æ€§äº‹ä»¶</li></ul><h2 id="6-" tabindex="-1">6. åº”ç”¨æ‰“åŒ…ä¸åˆ†å‘ <a class="header-anchor" href="#6-" aria-label="Permalink to &quot;6. åº”ç”¨æ‰“åŒ…ä¸åˆ†å‘&quot;">â€‹</a></h2><h3 id="6-1-" tabindex="-1">6.1 å¸¸ç”¨æ‰“åŒ…å·¥å…· <a class="header-anchor" href="#6-1-" aria-label="Permalink to &quot;6.1 å¸¸ç”¨æ‰“åŒ…å·¥å…·&quot;">â€‹</a></h3><ul><li><strong>electron-builder</strong> - åŠŸèƒ½å…¨é¢çš„æ‰“åŒ…å·¥å…·</li><li><strong>electron-forge</strong> - é›†æˆäº†æ„å»ºã€æ‰“åŒ…ã€å‘å¸ƒåŠŸèƒ½</li><li><strong>electron-packager</strong> - ç®€å•çš„æ‰“åŒ…å·¥å…·</li></ul><h3 id="6-2-" tabindex="-1">6.2 æ‰“åŒ…é…ç½®ç¤ºä¾‹ <a class="header-anchor" href="#6-2-" aria-label="Permalink to &quot;6.2 æ‰“åŒ…é…ç½®ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;build&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;appId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.example.app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;productName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;My Electron App&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;directories&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;output&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dist&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;mac&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;category&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public.app-category.developer-tools&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;win&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nsis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;portable&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;linux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;AppImage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;deb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="7-" tabindex="-1">7. å®‰å…¨æœ€ä½³å®è·µ <a class="header-anchor" href="#7-" aria-label="Permalink to &quot;7. å®‰å…¨æœ€ä½³å®è·µ&quot;">â€‹</a></h2><ul><li>å§‹ç»ˆå¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»ï¼ˆ<code>contextIsolation: true</code>ï¼‰</li><li>ç¦ç”¨ Node.js é›†æˆï¼ˆ<code>nodeIntegration: false</code>ï¼‰</li><li>ä½¿ç”¨å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰</li><li>éªŒè¯æ‰€æœ‰æ¥è‡ªæ¸²æŸ“è¿›ç¨‹çš„è¾“å…¥</li><li>å®šæœŸæ›´æ–° Electron ç‰ˆæœ¬ä»¥è·å–å®‰å…¨è¡¥ä¸</li></ul><h2 id="8-" tabindex="-1">8. å‚è€ƒèµ„æº <a class="header-anchor" href="#8-" aria-label="Permalink to &quot;8. å‚è€ƒèµ„æº&quot;">â€‹</a></h2><ul><li><a href="https://www.electronjs.org/docs" target="_blank" rel="noreferrer">Electron å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://www.electronforge.io/" target="_blank" rel="noreferrer">Electron Forge</a></li><li><a href="https://www.electron.build/" target="_blank" rel="noreferrer">Electron Builder</a></li><li><a href="https://www.electronjs.org/docs/tutorial/security" target="_blank" rel="noreferrer">Electron å®‰å…¨æŒ‡å—</a></li></ul>`,34)]))}const o=n(e,[["render",t]]);export{g as __pageData,o as default};
