import{_ as i,c as a,a3 as n,o as l}from"./js/framework-ohJJpums.js";const g=JSON.parse('{"title":"å›¾ç‰‡ä¼˜åŒ–å®Œå…¨æŒ‡å—","description":"å‰ç«¯å›¾ç‰‡ä¼˜åŒ–æŠ€æœ¯è¯¦è§£ï¼ŒåŒ…æ‹¬å›¾ç‰‡æ ¼å¼é€‰æ‹©ã€æ‡’åŠ è½½ã€é¢„åŠ è½½ç­‰å¤šç§ä¼˜åŒ–ç­–ç•¥","frontmatter":{"title":"å›¾ç‰‡ä¼˜åŒ–å®Œå…¨æŒ‡å—","description":"å‰ç«¯å›¾ç‰‡ä¼˜åŒ–æŠ€æœ¯è¯¦è§£ï¼ŒåŒ…æ‹¬å›¾ç‰‡æ ¼å¼é€‰æ‹©ã€æ‡’åŠ è½½ã€é¢„åŠ è½½ç­‰å¤šç§ä¼˜åŒ–ç­–ç•¥","outline":"deep"},"headers":[],"relativePath":"performace/image.md","filePath":"performace/image.md","lastUpdated":1753880038000}'),p={name:"performace/image.md"};function h(t,s,e,k,r,E){return l(),a("div",null,s[0]||(s[0]=[n(`<h1>ğŸ–¼ï¸ å›¾ç‰‡ä¼˜åŒ–å®Œå…¨æŒ‡å—</h1><p>å›¾ç‰‡èµ„æºé€šå¸¸å æ®ç½‘é¡µæ€»ä¸‹è½½é‡çš„ 60-65%ï¼Œåˆç†ä¼˜åŒ–å›¾ç‰‡å¯ä»¥æ˜¾è‘—æå‡ç½‘é¡µæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»å‰ç«¯å›¾ç‰‡ä¼˜åŒ–çš„å…³é”®æŠ€æœ¯å’Œæœ€ä½³å®è·µã€‚</p><div class="tip custom-block"><p class="custom-block-title">ğŸ“š æœ¬ç« å†…å®¹</p><p>å…¨é¢äº†è§£å„ç§å›¾ç‰‡æ ¼å¼ç‰¹æ€§ï¼ŒæŒæ¡æ‡’åŠ è½½ã€é¢„åŠ è½½ç­‰æ ¸å¿ƒä¼˜åŒ–æŠ€æœ¯ï¼Œæå‡ç½‘ç«™æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p></div><h2 id="1-" tabindex="-1">1. å›¾ç‰‡æ ¼å¼é€‰æ‹© <a class="header-anchor" href="#1-" aria-label="Permalink to &quot;1. å›¾ç‰‡æ ¼å¼é€‰æ‹©&quot;">â€‹</a></h2><p>é€‰æ‹©åˆé€‚çš„å›¾ç‰‡æ ¼å¼å¯¹äºä¼˜åŒ–ç½‘ç«™æ€§èƒ½è‡³å…³é‡è¦ã€‚ä¸åŒçš„å›¾ç‰‡æ ¼å¼å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œåº”æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„æ ¼å¼ã€‚</p><h3 id="1-1-" tabindex="-1">1.1 å¸¸ç”¨å›¾ç‰‡æ ¼å¼å¯¹æ¯” <a class="header-anchor" href="#1-1-" aria-label="Permalink to &quot;1.1 å¸¸ç”¨å›¾ç‰‡æ ¼å¼å¯¹æ¯”&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ ¼å¼</th><th>å‹ç¼©ç±»å‹</th><th>é€æ˜æ”¯æŒ</th><th>åŠ¨ç”»æ”¯æŒ</th><th>è‰²å½©æ¨¡å¼</th><th>æœ€ä½³åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>JPEG/JPG</strong></td><td>æœ‰æŸ</td><td>ä¸æ”¯æŒ</td><td>ä¸æ”¯æŒ</td><td>ç›´æ¥è‰²</td><td>ç…§ç‰‡ã€å¤æ‚å›¾åƒ</td></tr><tr><td><strong>PNG-8</strong></td><td>æ— æŸ</td><td>æ”¯æŒå®Œå…¨é€æ˜</td><td>ä¸æ”¯æŒ</td><td>ç´¢å¼•è‰²(256è‰²)</td><td>ç®€å•å›¾å½¢ã€å›¾æ ‡</td></tr><tr><td><strong>PNG-24</strong></td><td>æ— æŸ</td><td>æ”¯æŒåŠé€æ˜</td><td>ä¸æ”¯æŒ</td><td>ç›´æ¥è‰²</td><td>éœ€è¦é€æ˜åº¦çš„å›¾åƒ</td></tr><tr><td><strong>GIF</strong></td><td>æ— æŸ</td><td>æ”¯æŒå®Œå…¨é€æ˜</td><td>æ”¯æŒ</td><td>ç´¢å¼•è‰²(256è‰²)</td><td>ç®€å•åŠ¨ç”»</td></tr><tr><td><strong>SVG</strong></td><td>æ— æŸ</td><td>æ”¯æŒ</td><td>æ”¯æŒ(SMIL/CSS/JS)</td><td>çŸ¢é‡</td><td>å›¾æ ‡ã€Logoã€æ’å›¾</td></tr><tr><td><strong>WebP</strong></td><td>æœ‰æŸ/æ— æŸ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ç›´æ¥è‰²</td><td>æ›¿ä»£JPEG/PNGçš„ç°ä»£æ ¼å¼</td></tr><tr><td><strong>AVIF</strong></td><td>æœ‰æŸ/æ— æŸ</td><td>æ”¯æŒ</td><td>æ”¯æŒ</td><td>ç›´æ¥è‰²</td><td>ä¸‹ä¸€ä»£é«˜å‹ç¼©æ¯”æ ¼å¼</td></tr></tbody></table><h3 id="1-2-" tabindex="-1">1.2 å›¾ç‰‡æ ¼å¼è¯¦è§£ <a class="header-anchor" href="#1-2-" aria-label="Permalink to &quot;1.2 å›¾ç‰‡æ ¼å¼è¯¦è§£&quot;">â€‹</a></h3><h4>1.2.1 GIF æ ¼å¼</h4><ul><li><strong>ç‰¹ç‚¹</strong>ï¼šæ— æŸå‹ç¼©ï¼Œæ–‡ä»¶å°ï¼Œæ”¯æŒåŠ¨ç”»åŠå®Œå…¨é€æ˜</li><li><strong>å±€é™æ€§</strong>ï¼š <ul><li>ä¸æ”¯æŒåŠé€æ˜</li><li>ä»…æ”¯æŒ 8bit ç´¢å¼•è‰²ï¼ˆ256ç§é¢œè‰²ï¼‰</li><li>åœ¨ç½‘ç»œä¸­ä¸»è¦ç”¨äºç®€å•åŠ¨ç”»å’Œå°å›¾æ ‡</li><li>æ­£é€æ¸è¢«æ›´ç°ä»£çš„æ ¼å¼æ›¿ä»£</li></ul></li></ul><h4>1.2.2 JPEG/JPG æ ¼å¼</h4><ul><li><strong>ç‰¹ç‚¹</strong>ï¼šæœ‰æŸå‹ç¼©ï¼Œé‡‡ç”¨ç›´æ¥è‰²ï¼Œä¿è¯è‰²å½©ä¸°å¯Œæ€§</li><li><strong>åº”ç”¨</strong>ï¼š <ul><li>é€‚ç”¨äºç…§ç‰‡ã€å¤æ‚å›¾åƒç­‰å¤§å›¾</li><li>ä¸æ”¯æŒé€æ˜ï¼ˆç©ºç™½åŒºåŸŸå¡«å……ç™½è‰²ï¼‰</li><li>å‹ç¼©æ¯”é«˜ï¼Œæ–‡ä»¶ä½“ç§¯å°</li></ul></li></ul><h4>1.2.3 PNG ç³»åˆ—æ ¼å¼</h4><ul><li><p><strong>PNG-8</strong>ï¼š</p><ul><li>æ— æŸå‹ç¼©ï¼Œç´¢å¼•è‰²ç‰ˆæœ¬</li><li>æ¯” GIF æœ‰æ›´å°çš„æ–‡ä»¶ä½“ç§¯</li><li>æ”¯æŒé€æ˜åº¦è°ƒèŠ‚ï¼Œä½†ä¸æ”¯æŒåŠé€æ˜å’ŒåŠ¨ç”»</li></ul></li><li><p><strong>PNG-24</strong>ï¼š</p><ul><li>æ— æŸå‹ç¼©ï¼Œç›´æ¥è‰²ç‰ˆæœ¬</li><li>æ”¯æŒé€æ˜å’ŒåŠé€æ˜</li><li>æ–‡ä»¶ä½“ç§¯è¾ƒå¤§ï¼ˆé€šå¸¸æ˜¯ JPG çš„ 5 å€ï¼‰</li><li>æ˜¾ç¤ºæ•ˆæœç•¥ä¼˜äº JPG</li></ul></li><li><p><strong>PNG-32</strong>ï¼š</p><ul><li>åœ¨ PNG-24 åŸºç¡€ä¸Šæ·»åŠ  8 ä½ alpha é€šé“</li><li>å®Œå…¨æ”¯æŒé€æ˜å’ŒåŠé€æ˜</li><li>æ”¯æŒå›¾å±‚ã€è¾…åŠ©çº¿ç­‰å¤æ‚æ•°æ®</li><li>PS å¯¼å‡ºçš„é€æ˜ PNG-24 å®é™…æ˜¯é˜‰å‰²ç‰ˆ PNG-32ï¼ˆä¸æ”¯æŒå›¾å±‚ï¼‰</li></ul></li></ul><h4>1.2.4 SVG æ ¼å¼</h4><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š <ul><li>æ— æŸçš„çŸ¢é‡å›¾æ ¼å¼</li><li>ç¼©æ”¾ä¸å¤±çœŸï¼Œé€‚åˆå“åº”å¼è®¾è®¡</li><li>åŸºäº XMLï¼Œå¯é€šè¿‡ CSS/JS æ§åˆ¶</li><li>é€‚ç”¨äº Logoã€å›¾æ ‡ã€ç®€å•æ’å›¾</li><li>æ–‡ä»¶ä½“ç§¯å°ï¼ˆç®€å•å›¾å½¢ï¼‰</li></ul></li></ul><h4>1.2.5 WebP æ ¼å¼</h4><ul><li><strong>ç‰¹ç‚¹</strong>ï¼š <ul><li>Google äº 2010 å¹´å‘å¸ƒ</li><li>æ”¯æŒæœ‰æŸå’Œæ— æŸå‹ç¼©</li><li>æ´¾ç”Ÿè‡ªå›¾åƒç¼–ç æ ¼å¼ VP8</li><li>æ¯” JPEG å°çº¦ 25-35%ï¼Œæ¯” PNG å°çº¦ 25-35%</li><li>æ”¯æŒ Alpha é€æ˜å’ŒåŠ¨ç”»</li><li>åœ¨ Android è®¾å¤‡ä¸Šæœ‰è‰¯å¥½æ”¯æŒ</li></ul></li></ul><h2 id="2-" tabindex="-1">2. å›¾ç‰‡æ‡’åŠ è½½æŠ€æœ¯ <a class="header-anchor" href="#2-" aria-label="Permalink to &quot;2. å›¾ç‰‡æ‡’åŠ è½½æŠ€æœ¯&quot;">â€‹</a></h2><p>æ‡’åŠ è½½æ˜¯ä¸€ç§å»¶è¿ŸåŠ è½½å›¾ç‰‡çš„æŠ€æœ¯ï¼Œåªåœ¨å›¾ç‰‡å³å°†è¿›å…¥å¯è§†åŒºåŸŸæ—¶æ‰åŠ è½½ï¼Œå¯æœ‰æ•ˆå‡å°‘åˆå§‹é¡µé¢åŠ è½½æ—¶é—´å’Œèµ„æºæ¶ˆè€—ã€‚</p><h3 id="2-1-" tabindex="-1">2.1 æ‡’åŠ è½½åŸç† <a class="header-anchor" href="#2-1-" aria-label="Permalink to &quot;2.1 æ‡’åŠ è½½åŸç†&quot;">â€‹</a></h3><ol><li>å¾…åŠ è½½çš„å›¾ç‰‡é»˜è®¤æ˜¾ç¤ºä¸€å¼ å ä½å›¾</li><li>ä½¿ç”¨ <code>data-src</code> å±æ€§ä¿å­˜çœŸå®å›¾ç‰‡åœ°å€</li><li>å½“å›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸæ—¶ï¼Œå°† <code>data-src</code> çš„å€¼èµ‹ç»™ <code>src</code> å±æ€§</li><li>å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œç§»é™¤å ä½å›¾æ ·å¼</li></ol><h3 id="2-2-" tabindex="-1">2.2 ä¼ ç»Ÿå®ç°æ–¹å¼ <a class="header-anchor" href="#2-2-" aria-label="Permalink to &quot;2.2 ä¼ ç»Ÿå®ç°æ–¹å¼&quot;">â€‹</a></h3><p>ä½¿ç”¨ <code>getBoundingClientRect()</code> æ–¹æ³•æ£€æµ‹å…ƒç´ ä½ç½®ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// HTML ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;img data-src=&quot;./images/1.jpg&quot; alt=&quot;&quot; /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ getBoundingClientRect() å®ç°æ‡’åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> oList</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> viewHeight</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> oList.clientHeight;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> eles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelectorAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;img[data-src]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lazyLoad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.forEach.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eles, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rect</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBoundingClientRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rect.top </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> viewHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">item.isLoaded) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      item.isLoaded </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> oImg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      oImg.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        item.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> oImg.src;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      oImg.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> item.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data-src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨èŠ‚æµå‡½æ•°ä¼˜åŒ–æ»šåŠ¨äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> throttle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">wait</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (fn.timer) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fn.timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fn.timer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, wait);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆå§‹åŠ è½½å’Œæ»šåŠ¨äº‹ä»¶ç›‘å¬</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lazyLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">oList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scroll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">throttle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lazyLoad));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="2-3-" tabindex="-1">2.3 ç°ä»£å®ç°æ–¹å¼ <a class="header-anchor" href="#2-3-" aria-label="Permalink to &quot;2.3 ç°ä»£å®ç°æ–¹å¼&quot;">â€‹</a></h3><p>ä½¿ç”¨ <code>IntersectionObserver</code> API å®ç°æ›´é«˜æ•ˆçš„æ‡’åŠ è½½ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// HTML ç»“æ„</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;img data-src=&quot;./images/1.jpg&quot; alt=&quot;&quot; /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ IntersectionObserver å®ç°æ‡’åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> imgs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelectorAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;img[data-src]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  root: document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#scrollArea&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rootMargin: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0px&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  threshold: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å½“ç›®æ ‡å…ƒç´ 10%å¯è§æ—¶è§¦å‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> io</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IntersectionObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entries</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  entries.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // å½“å›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (entry.isIntersecting) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry.target;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      img.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img.dataset.src;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å›¾ç‰‡åŠ è½½ååœæ­¢è§‚å¯Ÿè¯¥å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      io.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unobserve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // å›¾ç‰‡åŠ è½½å®Œæˆåç§»é™¤å ä½æ ·å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      img.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        img.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data-src&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        img.classList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lazy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, options);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼€å§‹è§‚å¯Ÿæ‰€æœ‰å›¾ç‰‡å…ƒç´ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">imgs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">img</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  io.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">observe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(img);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  img.classList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lazy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="2-4-" tabindex="-1">2.4 æ‡’åŠ è½½ä¼˜åŠ¿ <a class="header-anchor" href="#2-4-" aria-label="Permalink to &quot;2.4 æ‡’åŠ è½½ä¼˜åŠ¿&quot;">â€‹</a></h3><ul><li>å‡å°‘åˆå§‹é¡µé¢åŠ è½½æ—¶é—´å’Œå¸¦å®½æ¶ˆè€—</li><li>é™ä½æœåŠ¡å™¨è´Ÿè½½</li><li>é¿å…åŠ è½½ç”¨æˆ·å¯èƒ½æ°¸è¿œä¸ä¼šæŸ¥çœ‹çš„å†…å®¹</li><li>æå‡é¡µé¢æ»šåŠ¨æ€§èƒ½</li></ul><h2 id="3-" tabindex="-1">3. å›¾ç‰‡é¢„åŠ è½½æŠ€æœ¯ <a class="header-anchor" href="#3-" aria-label="Permalink to &quot;3. å›¾ç‰‡é¢„åŠ è½½æŠ€æœ¯&quot;">â€‹</a></h2><p>é¢„åŠ è½½æ˜¯ä¸€ç§æå‰åŠ è½½ç”¨æˆ·å¯èƒ½éœ€è¦çš„å›¾ç‰‡èµ„æºçš„æŠ€æœ¯ï¼Œç¡®ä¿ç”¨æˆ·éœ€è¦æŸ¥çœ‹å›¾ç‰‡æ—¶èƒ½å¤Ÿç«‹å³æ˜¾ç¤ºï¼Œæä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p><h3 id="3-1-" tabindex="-1">3.1 é€‚ç”¨åœºæ™¯ <a class="header-anchor" href="#3-1-" aria-label="Permalink to &quot;3.1 é€‚ç”¨åœºæ™¯&quot;">â€‹</a></h3><p>é¢„åŠ è½½æŠ€æœ¯é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p><ol><li>åœ¨é¦–å±åŠ è½½ä¹‹å‰ï¼Œç¼©çŸ­ç™½å±æ—¶é—´</li><li>åœ¨ç©ºé—²æ—¶é—´ä¸º SPA çš„ä¸‹ä¸€å±é¢„åŠ è½½å†…å®¹</li><li>é¢„æµ‹ç”¨æˆ·æ“ä½œï¼Œé¢„å…ˆåŠ è½½å¯èƒ½éœ€è¦çš„æ•°æ®</li><li>å›¾ç‰‡ç”»å»Šã€è½®æ’­å›¾ç­‰éœ€è¦å¿«é€Ÿåˆ‡æ¢æ˜¾ç¤ºçš„åœºæ™¯</li></ol><h3 id="3-2-" tabindex="-1">3.2 å®ç°æ–¹æ³• <a class="header-anchor" href="#3-2-" aria-label="Permalink to &quot;3.2 å®ç°æ–¹æ³•&quot;">â€‹</a></h3><h4>3.2.1 CSS èƒŒæ™¯å›¾é¢„åŠ è½½</h4><p>åˆ©ç”¨é¡µé¢ä¸­ä¸å¯è§å…ƒç´ çš„èƒŒæ™¯å›¾æ¥é¢„åŠ è½½å›¾ç‰‡ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> preLoadImg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  preload1.style.background </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;url(&#39;img/img1.gif&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  preload2.style.background </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;url(&#39;img/img2.gif&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  preload3.style.background </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;url(&#39;img/img3.gif&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  preload4.style.background </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;url(&#39;img/img4.gif&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4>3.2.2 JavaScript é¢„åŠ è½½</h4><p>é€šè¿‡åˆ›å»º Image å¯¹è±¡æ¥é¢„åŠ è½½å›¾ç‰‡ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> preLoadImg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> imageUrls</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;img/img1.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;img/img2.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;img/img3.gif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;img/img4.gif&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> preloadedImages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageUrls.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    preloadedImages[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    preloadedImages[i].src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageUrls[i];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œé¢„åŠ è½½</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  preLoadImg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4>3.2.3 XHR é¢„åŠ è½½</h4><p>é€šè¿‡ XMLHttpRequest è¯·æ±‚é¢„åŠ è½½å›¾ç‰‡ï¼ˆä»…é€‚ç”¨äºåŒåŸŸèµ„æºï¼‰ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> preloadImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> xhr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLHttpRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;GET&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, url, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    xhr.responseType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;blob&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onload</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> imageUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.response);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageUrl);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Failed to load image: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onerror</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Network error when loading: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    xhr.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="3-3-" tabindex="-1">3.3 æ¡†æ¶é›†æˆ <a class="header-anchor" href="#3-3-" aria-label="Permalink to &quot;3.3 æ¡†æ¶é›†æˆ&quot;">â€‹</a></h3><p>åœ¨ Vue é¡¹ç›®ä¸­ä½¿ç”¨ <code>vue-lazyload</code> æ’ä»¶å®ç°æ‡’åŠ è½½å’Œé¢„åŠ è½½ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®‰è£…ï¼šnpm install vue-lazyload</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨ main.js ä¸­é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VueLazyload </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue-lazyload&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Vue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(VueLazyload, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  preLoad: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¢„åŠ è½½é«˜åº¦æ¯”ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  error: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dist/error.png&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ è½½å¤±è´¥æ˜¾ç¤ºå›¾ç‰‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  loading: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;dist/loading.gif&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŠ è½½ä¸­æ˜¾ç¤ºå›¾ç‰‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  attempt: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°è¯•åŠ è½½æ¬¡æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  listenEvents: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;scroll&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç›‘å¬çš„äº‹ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  observer: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ IntersectionObserver</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  observerOptions: {         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// IntersectionObserver é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rootMargin: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    threshold: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &lt;img v-lazy=&quot;imgUrl&quot; /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="4-" tabindex="-1">4. å›¾ç‰‡ä¼˜åŒ–æœ€ä½³å®è·µ <a class="header-anchor" href="#4-" aria-label="Permalink to &quot;4. å›¾ç‰‡ä¼˜åŒ–æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="4-1-" tabindex="-1">4.1 é€‰æ‹©åˆé€‚çš„å›¾ç‰‡æ ¼å¼ <a class="header-anchor" href="#4-1-" aria-label="Permalink to &quot;4.1 é€‰æ‹©åˆé€‚çš„å›¾ç‰‡æ ¼å¼&quot;">â€‹</a></h3><ul><li><strong>ç…§ç‰‡å’Œå¤æ‚å›¾åƒ</strong>ï¼šä½¿ç”¨ WebPï¼ˆä¼˜å…ˆï¼‰æˆ– JPEG</li><li><strong>éœ€è¦é€æ˜åº¦çš„å›¾åƒ</strong>ï¼šä½¿ç”¨ WebPï¼ˆä¼˜å…ˆï¼‰æˆ– PNG</li><li><strong>å›¾æ ‡å’Œç®€å•å›¾å½¢</strong>ï¼šä¼˜å…ˆä½¿ç”¨ SVGï¼Œå…¶æ¬¡æ˜¯ PNG-8</li><li><strong>åŠ¨ç”»</strong>ï¼šä½¿ç”¨ WebP åŠ¨ç”»æˆ–è€ƒè™‘ä½¿ç”¨ video æ ‡ç­¾æ›¿ä»£ GIF</li></ul><h3 id="4-2-" tabindex="-1">4.2 å“åº”å¼å›¾ç‰‡ <a class="header-anchor" href="#4-2-" aria-label="Permalink to &quot;4.2 å“åº”å¼å›¾ç‰‡&quot;">â€‹</a></h3><p>ä½¿ç”¨ <code>&lt;picture&gt;</code> å…ƒç´ å’Œ <code>srcset</code> å±æ€§æä¾›ä¸åŒåˆ†è¾¨ç‡å’Œæ ¼å¼çš„å›¾ç‰‡ï¼š</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">picture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">source</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> srcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image.webp&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/webp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">source</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> srcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image.jpg&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image/jpeg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image.jpg&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> alt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æè¿°&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">picture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- å“åº”å¼å›¾ç‰‡å°ºå¯¸ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  srcset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;small.jpg 300w, medium.jpg 600w, large.jpg 900w&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  sizes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;(max-width: 600px) 300px, (max-width: 1200px) 600px, 900px&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fallback.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å“åº”å¼å›¾ç‰‡&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="4-3-" tabindex="-1">4.3 å›¾ç‰‡å‹ç¼©å·¥å…· <a class="header-anchor" href="#4-3-" aria-label="Permalink to &quot;4.3 å›¾ç‰‡å‹ç¼©å·¥å…·&quot;">â€‹</a></h3><ul><li><strong>åœ¨çº¿å·¥å…·</strong>ï¼šTinyPNG, Squoosh, Kraken.io</li><li><strong>æ„å»ºå·¥å…·</strong>ï¼šä½¿ç”¨ webpack çš„ image-webpack-loader</li><li><strong>CLI å·¥å…·</strong>ï¼šImageOptim-CLI, Sharp</li></ul><h3 id="4-4-cdn-" tabindex="-1">4.4 CDN å’Œç¼“å­˜ç­–ç•¥ <a class="header-anchor" href="#4-4-cdn-" aria-label="Permalink to &quot;4.4 CDN å’Œç¼“å­˜ç­–ç•¥&quot;">â€‹</a></h3><ul><li>ä½¿ç”¨ CDN åˆ†å‘å›¾ç‰‡èµ„æº</li><li>è®¾ç½®é€‚å½“çš„ç¼“å­˜å¤´ï¼ˆCache-Controlï¼‰</li><li>ä½¿ç”¨å†…å®¹å“ˆå¸Œä½œä¸ºæ–‡ä»¶åçš„ä¸€éƒ¨åˆ†ï¼Œå®ç°é•¿æœŸç¼“å­˜</li></ul><h2 id="5-" tabindex="-1">5. å‚è€ƒèµ„æº <a class="header-anchor" href="#5-" aria-label="Permalink to &quot;5. å‚è€ƒèµ„æº&quot;">â€‹</a></h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images" target="_blank" rel="noreferrer">MDN Web Docs: å“åº”å¼å›¾ç‰‡</a></li><li><a href="https://web.dev/fast/#optimize-your-images" target="_blank" rel="noreferrer">Web.dev: å›¾åƒä¼˜åŒ–</a></li><li><a href="https://developers.google.com/speed/webp" target="_blank" rel="noreferrer">WebP å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noreferrer">IntersectionObserver API</a></li><li><a href="https://github.com/hilongjw/vue-lazyload" target="_blank" rel="noreferrer">Vue Lazyload æ’ä»¶</a></li></ul>`,60)]))}const c=i(p,[["render",h]]);export{g as __pageData,c as default};
