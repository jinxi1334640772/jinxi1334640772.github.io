import{_ as i,c as a,a3 as t,o as e}from"./js/framework-ohJJpums.js";const E=JSON.parse('{"title":"资源预加载技术详解：Prefetch 与 Preload","description":"深入解析 Prefetch 和 Preload 资源预加载技术的原理、使用方法、应用场景及最佳实践","frontmatter":{"title":"资源预加载技术详解：Prefetch 与 Preload","description":"深入解析 Prefetch 和 Preload 资源预加载技术的原理、使用方法、应用场景及最佳实践","outline":"deep"},"headers":[],"relativePath":"performace/prefetch.md","filePath":"performace/prefetch.md","lastUpdated":1753880038000}'),n={name:"performace/prefetch.md"};function l(h,s,r,p,k,d){return e(),a("div",null,s[0]||(s[0]=[t(`<h1>🚀 资源预加载技术详解：Prefetch 与 Preload</h1><p>资源预加载是前端性能优化的重要手段，通过合理使用 Prefetch 和 Preload 技术，可以显著提升网页加载速度和用户体验。本文详细介绍这两种预加载技术的原理、实现和最佳实践。</p><div class="tip custom-block"><p class="custom-block-title">📚 本章内容</p><p>全面了解 Prefetch 和 Preload 预加载技术，掌握它们的区别、使用场景和实现方法，有效提升网站性能。</p></div><h2 id="1-" tabindex="-1">1. 资源预加载概述 <a class="header-anchor" href="#1-" aria-label="Permalink to &quot;1. 资源预加载概述&quot;">​</a></h2><p>资源预加载是一种浏览器优化技术，通过提前获取用户可能需要的资源，减少等待时间，提升页面性能。主要有两种预加载技术：Prefetch 和 Preload，它们针对不同的场景提供优化。</p><h3 id="1-1-" tabindex="-1">1.1 预加载技术对比 <a class="header-anchor" href="#1-1-" aria-label="Permalink to &quot;1.1 预加载技术对比&quot;">​</a></h3><table tabindex="0"><thead><tr><th>特性</th><th>Prefetch</th><th>Preload</th></tr></thead><tbody><tr><td><strong>加载时机</strong></td><td>浏览器空闲时</td><td>页面加载过程中高优先级获取</td></tr><tr><td><strong>使用场景</strong></td><td>未来可能需要的资源</td><td>当前页面必需的关键资源</td></tr><tr><td><strong>优先级</strong></td><td>低</td><td>高</td></tr><tr><td><strong>页面关闭行为</strong></td><td>继续加载</td><td>立即停止</td></tr><tr><td><strong>浏览器支持</strong></td><td>现代浏览器</td><td>现代浏览器</td></tr></tbody></table><h2 id="2-prefetch-" tabindex="-1">2. Prefetch 预获取技术 <a class="header-anchor" href="#2-prefetch-" aria-label="Permalink to &quot;2. Prefetch 预获取技术&quot;">​</a></h2><h3 id="2-1-" tabindex="-1">2.1 基本概念 <a class="header-anchor" href="#2-1-" aria-label="Permalink to &quot;2.1 基本概念&quot;">​</a></h3><p>Prefetch（预获取）利用浏览器空闲时间，预加载用户未来可能会用到的资源。它告诉浏览器这个资源将来可能需要，但具体什么时间加载这个资源是由浏览器决定的。</p><h3 id="2-2-" tabindex="-1">2.2 工作原理 <a class="header-anchor" href="#2-2-" aria-label="Permalink to &quot;2.2 工作原理&quot;">​</a></h3><ol><li>浏览器解析到 <code>prefetch</code> 指令</li><li>在浏览器空闲时，以低优先级获取资源</li><li>将获取的资源缓存起来</li><li>当用户实际需要该资源时，从缓存中快速获取</li></ol><h3 id="2-3-" tabindex="-1">2.3 实现方式 <a class="header-anchor" href="#2-3-" aria-label="Permalink to &quot;2.3 实现方式&quot;">​</a></h3><p>通过 <code>&lt;link&gt;</code> 标签实现 Prefetch：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 预获取 JavaScript 文件 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/js/next-page.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 预获取 CSS 文件 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/css/secondary-styles.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 预获取图片 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/large-image.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="2-4-" tabindex="-1">2.4 应用场景 <a class="header-anchor" href="#2-4-" aria-label="Permalink to &quot;2.4 应用场景&quot;">​</a></h3><p>Prefetch 特别适合以下场景：</p><ul><li><strong>分页内容</strong>：预加载下一页的资源</li><li><strong>搜索结果</strong>：预加载用户可能点击的第一个结果</li><li><strong>单页应用</strong>：预加载用户可能导航到的路由</li><li><strong>表单提交后页面</strong>：预加载表单提交后可能显示的页面</li></ul><h3 id="2-5-prefetch-" tabindex="-1">2.5 Prefetch 变体 <a class="header-anchor" href="#2-5-prefetch-" aria-label="Permalink to &quot;2.5 Prefetch 变体&quot;">​</a></h3><h4>2.5.1 DNS Prefetch</h4><p>仅预解析域名的 DNS，不加载任何资源：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dns-prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4>2.5.2 Prerender</h4><p>预渲染整个页面（包括资源下载和页面渲染）：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prerender&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com/next-page&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="3-preload-" tabindex="-1">3. Preload 预加载技术 <a class="header-anchor" href="#3-preload-" aria-label="Permalink to &quot;3. Preload 预加载技术&quot;">​</a></h2><h3 id="3-1-" tabindex="-1">3.1 基本概念 <a class="header-anchor" href="#3-1-" aria-label="Permalink to &quot;3.1 基本概念&quot;">​</a></h3><p>Preload（预加载）用于预加载当前页面立即需要的关键资源，使必需的资源能够更早加载，从而避免阻塞页面的初步渲染，提升性能和用户体验。它是一个声明式 fetch，可以强制浏览器在不阻塞 document 的 onload 事件的情况下请求资源。</p><h3 id="3-2-" tabindex="-1">3.2 工作原理 <a class="header-anchor" href="#3-2-" aria-label="Permalink to &quot;3.2 工作原理&quot;">​</a></h3><ol><li>浏览器解析到 <code>preload</code> 指令</li><li>立即以高优先级开始加载资源</li><li>资源加载完成后，等待页面代码调用使用</li><li>如果 20 秒内未被使用，控制台会显示警告</li></ol><h3 id="3-3-" tabindex="-1">3.3 实现方式 <a class="header-anchor" href="#3-3-" aria-label="Permalink to &quot;3.3 实现方式&quot;">​</a></h3><h4>3.3.1 通过 HTML 标签实现</h4><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 预加载 JavaScript --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;script&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/js/critical.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 预加载 CSS --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/css/critical.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 预加载字体 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;font&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/fonts/awesome.woff2&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> crossorigin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 预加载图片 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/images/hero.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4>3.3.2 通过 HTTP 头实现</h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Link: &lt;https://example.com/styles.css&gt;; rel=preload; as=style</span></span>
<span class="line"><span>Link: &lt;https://example.com/script.js&gt;; rel=preload; as=script</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>通过 HTTP 头部实现的预加载比 HTML 中的 <code>&lt;link&gt;</code> 标签更快，因为请求在返回还没到解析页面的时候就已经开始预加载资源。</p><h3 id="3-4-as-" tabindex="-1">3.4 资源类型（as 属性） <a class="header-anchor" href="#3-4-as-" aria-label="Permalink to &quot;3.4 资源类型（as 属性）&quot;">​</a></h3><p><code>as</code> 属性用于指定资源类型，浏览器根据此属性判断请求资源的优先级。没有 <code>as</code> 属性的预加载请求会被视为异步请求。</p><table tabindex="0"><thead><tr><th>as 值</th><th>资源类型</th><th>说明</th></tr></thead><tbody><tr><td><code>audio</code></td><td>音频文件</td><td>MP3, WAV 等音频格式</td></tr><tr><td><code>video</code></td><td>视频文件</td><td>MP4, WebM 等视频格式</td></tr><tr><td><code>style</code></td><td>样式表</td><td>CSS 文件</td></tr><tr><td><code>font</code></td><td>字体文件</td><td>WOFF, WOFF2, TTF 等字体格式</td></tr><tr><td><code>image</code></td><td>图片文件</td><td>JPEG, PNG, WebP 等图片格式</td></tr><tr><td><code>script</code></td><td>脚本文件</td><td>JavaScript 文件</td></tr><tr><td><code>document</code></td><td>HTML 文档</td><td>将要被嵌入到内部的 HTML 文档</td></tr><tr><td><code>embed</code></td><td>嵌入资源</td><td>将要被插入到元素内部的资源</td></tr><tr><td><code>fetch</code></td><td>数据资源</td><td>通过 fetch 或 XHR 请求获取的资源</td></tr><tr><td><code>object</code></td><td>对象文件</td><td>将要被嵌入到元素内的文件</td></tr><tr><td><code>track</code></td><td>文本轨道</td><td>WebVTT 文件</td></tr><tr><td><code>worker</code></td><td>Web Worker</td><td>Web Worker 或 Shared Worker 的 JavaScript 文件</td></tr></tbody></table><h3 id="3-5-" tabindex="-1">3.5 应用场景 <a class="header-anchor" href="#3-5-" aria-label="Permalink to &quot;3.5 应用场景&quot;">​</a></h3><p>Preload 特别适合以下场景：</p><ul><li><strong>关键 CSS</strong>：预加载首屏渲染所需的样式</li><li><strong>Web 字体</strong>：避免字体闪烁（FOIT）</li><li><strong>关键脚本</strong>：预加载页面交互所需的脚本</li><li><strong>主图片</strong>：预加载首屏大图或 Hero 图片</li></ul><h2 id="4-prefetch-preload-" tabindex="-1">4. Prefetch 与 Preload 的区别 <a class="header-anchor" href="#4-prefetch-preload-" aria-label="Permalink to &quot;4. Prefetch 与 Preload 的区别&quot;">​</a></h2><h3 id="4-1-" tabindex="-1">4.1 关键区别 <a class="header-anchor" href="#4-1-" aria-label="Permalink to &quot;4.1 关键区别&quot;">​</a></h3><ol><li><strong>优先级</strong>：Preload 具有高优先级，Prefetch 具有低优先级</li><li><strong>加载时机</strong>：Preload 在页面加载过程中立即加载，Prefetch 在浏览器空闲时加载</li><li><strong>用途</strong>：Preload 用于当前页面的关键资源，Prefetch 用于未来可能需要的资源</li><li><strong>页面关闭行为</strong>：页面关闭时，Preload 请求会立即停止，而 Prefetch 请求会继续执行完成</li></ol><h3 id="4-2-" tabindex="-1">4.2 选择指南 <a class="header-anchor" href="#4-2-" aria-label="Permalink to &quot;4.2 选择指南&quot;">​</a></h3><table tabindex="0"><thead><tr><th>场景</th><th>推荐技术</th><th>原因</th></tr></thead><tbody><tr><td>当前页面立即需要的资源</td><td>Preload</td><td>高优先级，确保资源及时可用</td></tr><tr><td>下一页可能需要的资源</td><td>Prefetch</td><td>低优先级，不影响当前页面加载</td></tr><tr><td>关键渲染路径中的资源</td><td>Preload</td><td>减少渲染阻塞时间</td></tr><tr><td>用户可能点击的链接</td><td>Prefetch</td><td>提前准备可能的导航目标</td></tr></tbody></table><h2 id="5-" tabindex="-1">5. 最佳实践 <a class="header-anchor" href="#5-" aria-label="Permalink to &quot;5. 最佳实践&quot;">​</a></h2><h3 id="5-1-" tabindex="-1">5.1 避免重复请求 <a class="header-anchor" href="#5-1-" aria-label="Permalink to &quot;5.1 避免重复请求&quot;">​</a></h3><p>确保预加载的资源不会被重复请求：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 预加载 CSS --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/css/styles.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 使用预加载的 CSS --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stylesheet&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/css/styles.css&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="5-2-" tabindex="-1">5.2 合理设置优先级 <a class="header-anchor" href="#5-2-" aria-label="Permalink to &quot;5.2 合理设置优先级&quot;">​</a></h3><p>不要过度使用 Preload，以免占用过多带宽：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 仅预加载关键资源 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/fonts/main.woff2&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;font&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> crossorigin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/css/critical.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 对次要资源使用 Prefetch --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/js/non-critical.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="5-3-" tabindex="-1">5.3 结合使用提升性能 <a class="header-anchor" href="#5-3-" aria-label="Permalink to &quot;5.3 结合使用提升性能&quot;">​</a></h3><p>结合 Preload 和 Prefetch 可以获得最佳性能：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 当前页面需要的资源 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;preload&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/css/current-page.css&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 下一页可能需要的资源 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prefetch&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/js/next-page.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="5-4-javascript-" tabindex="-1">5.4 使用 JavaScript 动态添加 <a class="header-anchor" href="#5-4-javascript-" aria-label="Permalink to &quot;5.4 使用 JavaScript 动态添加&quot;">​</a></h3><p>根据用户行为动态添加预加载：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 监测用户行为，预加载可能需要的资源</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.product-link&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mouseenter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> link</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;link&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  link.rel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;prefetch&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  link.href </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/products/detail.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  document.head.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendChild</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(link);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="6-" tabindex="-1">6. 浏览器支持和兼容性 <a class="header-anchor" href="#6-" aria-label="Permalink to &quot;6. 浏览器支持和兼容性&quot;">​</a></h2><h3 id="6-1-" tabindex="-1">6.1 浏览器支持情况 <a class="header-anchor" href="#6-1-" aria-label="Permalink to &quot;6.1 浏览器支持情况&quot;">​</a></h3><table tabindex="0"><thead><tr><th>浏览器</th><th>Prefetch 支持</th><th>Preload 支持</th></tr></thead><tbody><tr><td>Chrome</td><td>8.0+</td><td>50.0+</td></tr><tr><td>Firefox</td><td>3.5+</td><td>56.0+</td></tr><tr><td>Safari</td><td>11.1+</td><td>11.1+</td></tr><tr><td>Edge</td><td>12+</td><td>17+</td></tr><tr><td>IE</td><td>11 (部分)</td><td>不支持</td></tr></tbody></table><h3 id="6-2-" tabindex="-1">6.2 降级处理 <a class="header-anchor" href="#6-2-" aria-label="Permalink to &quot;6.2 降级处理&quot;">​</a></h3><p>对于不支持预加载的浏览器，可以使用以下降级策略：</p><ul><li>使用 JavaScript 动态加载资源</li><li>使用传统的资源加载方式作为备选</li><li>监测浏览器支持情况后再决定使用哪种技术</li></ul><h2 id="7-" tabindex="-1">7. 性能监测与优化 <a class="header-anchor" href="#7-" aria-label="Permalink to &quot;7. 性能监测与优化&quot;">​</a></h2><h3 id="7-1-" tabindex="-1">7.1 监测预加载效果 <a class="header-anchor" href="#7-1-" aria-label="Permalink to &quot;7.1 监测预加载效果&quot;">​</a></h3><p>使用 Chrome DevTools 的 Network 面板监测预加载效果：</p><ol><li>打开 Chrome DevTools (F12)</li><li>切换到 Network 面板</li><li>查找带有 &quot;Preload&quot; 或 &quot;Prefetch&quot; 标记的资源</li><li>比较预加载前后的资源加载时间</li></ol><h3 id="7-2-" tabindex="-1">7.2 常见问题及解决方案 <a class="header-anchor" href="#7-2-" aria-label="Permalink to &quot;7.2 常见问题及解决方案&quot;">​</a></h3><ul><li><strong>未使用的预加载</strong>：确保预加载的资源在页面中被实际使用</li><li><strong>优先级冲突</strong>：避免过多高优先级的预加载请求</li><li><strong>带宽浪费</strong>：仅预加载真正必要的资源</li><li><strong>缓存问题</strong>：确保预加载资源的缓存策略正确</li></ul><h2 id="8-" tabindex="-1">8. 参考资源 <a class="header-anchor" href="#8-" aria-label="Permalink to &quot;8. 参考资源&quot;">​</a></h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Preloading_content" target="_blank" rel="noreferrer">MDN Web Docs: Preloading content</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Link_prefetching_FAQ" target="_blank" rel="noreferrer">MDN Web Docs: Link prefetching FAQ</a></li><li><a href="https://web.dev/preload-critical-assets/" target="_blank" rel="noreferrer">Web.dev: Preload critical assets</a></li><li><a href="https://developers.google.com/web/fundamentals/performance/resource-prioritization" target="_blank" rel="noreferrer">Google Developers: Resource Prioritization</a></li></ul>`,74)]))}const c=i(n,[["render",l]]);export{E as __pageData,c as default};
