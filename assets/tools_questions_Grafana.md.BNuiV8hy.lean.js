import{_ as a,c as i,a3 as l,o as n}from"./js/framework-ohJJpums.js";const e="/assets/png/image-48-QkMJ4Zlz.png",u=JSON.parse('{"title":"📊 Grafana 数据监控与查询指南","description":"详解 Grafana 数据可视化平台的使用，包括基础概念、查询语法、最佳实践等","frontmatter":{"title":"📊 Grafana 数据监控与查询指南","description":"详解 Grafana 数据可视化平台的使用，包括基础概念、查询语法、最佳实践等","outline":"deep"},"headers":[],"relativePath":"tools/questions/Grafana.md","filePath":"tools/questions/Grafana.md","lastUpdated":1753862666000}'),t={name:"tools/questions/Grafana.md"};function p(r,s,h,o,k,d){return n(),i("div",null,s[0]||(s[0]=[l('<h1>📊 Grafana 数据监控与查询指南</h1><blockquote><p>Grafana 是一个强大的开源数据可视化和监控平台，支持多种数据源的实时监控和分析。</p></blockquote><h2 id="1-grafana-" tabindex="-1">1. Grafana 简介 <a class="header-anchor" href="#1-grafana-" aria-label="Permalink to &quot;1. Grafana 简介&quot;">​</a></h2><h3 id="1-1-grafana" tabindex="-1">1.1 什么是 Grafana <a class="header-anchor" href="#1-1-grafana" aria-label="Permalink to &quot;1.1 什么是 Grafana&quot;">​</a></h3><p>Grafana 是一个开源的数据可视化和监控平台，可以帮助用户通过创建仪表盘和图表来实时监控和分析数据。它支持多种数据源，包括：</p><ul><li>Prometheus</li><li>InfluxDB</li><li>Elasticsearch</li><li>MySQL/PostgreSQL</li><li>Graphite</li><li>OpenTSDB</li></ul><img src="'+e+`" alt="Grafana Dashboard" data-fancybox="gallery"><h3 id="1-2-" tabindex="-1">1.2 核心优势 <a class="header-anchor" href="#1-2-" aria-label="Permalink to &quot;1.2 核心优势&quot;">​</a></h3><ol><li><p><strong>统一数据，而非数据库</strong></p><ul><li>无需将数据导入后端数据仓库</li><li>提供单一数据面板</li><li>支持多种数据源的统一展示</li><li>可从各类平台获取数据： <ul><li>Kubernetes 集群</li><li>Raspberry Pi</li><li>云服务</li><li>Google Sheets 等</li></ul></li></ul></li><li><p><strong>数据可视化民主化</strong></p><ul><li>面向组织所有成员开放</li><li>打破数据孤岛</li><li>增强团队协作能力</li></ul></li><li><p><strong>灵活的数据面板</strong></p><ul><li>支持自定义图表创建</li><li>便捷的面板共享机制</li><li>支持团队协作探索</li></ul></li><li><p><strong>强大的扩展性</strong></p><ul><li>丰富的插件生态</li><li>自定义数据转换能力</li><li>高级查询功能支持</li></ul></li></ol><h2 id="2-" tabindex="-1">2. 核心功能 <a class="header-anchor" href="#2-" aria-label="Permalink to &quot;2. 核心功能&quot;">​</a></h2><h3 id="2-1-" tabindex="-1">2.1 数据源集成 <a class="header-anchor" href="#2-1-" aria-label="Permalink to &quot;2.1 数据源集成&quot;">​</a></h3><ul><li><p><strong>时序数据库</strong></p><ul><li>Prometheus</li><li>InfluxDB</li><li>Graphite</li></ul></li><li><p><strong>关系型数据库</strong></p><ul><li>MySQL</li><li>PostgreSQL</li><li>Microsoft SQL Server</li></ul></li><li><p><strong>文档数据库</strong></p><ul><li>Elasticsearch</li><li>MongoDB</li></ul></li><li><p><strong>云服务</strong></p><ul><li>AWS CloudWatch</li><li>Azure Monitor</li><li>Google Cloud Monitoring</li></ul></li></ul><h3 id="2-2-" tabindex="-1">2.2 可视化选项 <a class="header-anchor" href="#2-2-" aria-label="Permalink to &quot;2.2 可视化选项&quot;">​</a></h3><ol><li><p><strong>图表类型</strong></p><ul><li>折线图</li><li>柱状图</li><li>饼图</li><li>热力图</li><li>地图</li><li>仪表盘</li></ul></li><li><p><strong>面板功能</strong></p><ul><li>数据过滤</li><li>时间范围选择</li><li>变量替换</li><li>动态刷新</li></ul></li></ol><h3 id="2-3-" tabindex="-1">2.3 告警功能 <a class="header-anchor" href="#2-3-" aria-label="Permalink to &quot;2.3 告警功能&quot;">​</a></h3><ul><li>支持多种告警规则</li><li>灵活的通知渠道</li><li>告警历史记录</li><li>告警状态管理</li></ul><h2 id="3-lucene-" tabindex="-1">3. Lucene 查询语法 <a class="header-anchor" href="#3-lucene-" aria-label="Permalink to &quot;3. Lucene 查询语法&quot;">​</a></h2><h3 id="3-1-" tabindex="-1">3.1 基础概念 <a class="header-anchor" href="#3-1-" aria-label="Permalink to &quot;3.1 基础概念&quot;">​</a></h3><h4>Terms</h4><p>查询将分解为若干 Term 以及操作符：</p><ul><li>单一 Term：最小分词单元（如：&quot;Test&quot;、&quot;Hello&quot;）</li><li>短语：双引号括起的词组（如：&quot;Hello dolly&quot;）</li></ul><h4>Fields</h4><p>支持指定字段查询：</p><ul><li>显式指定：<code>title:hello</code></li><li>默认字段：可省略字段名</li></ul><h3 id="3-2-" tabindex="-1">3.2 查询语法示例 <a class="header-anchor" href="#3-2-" aria-label="Permalink to &quot;3.2 查询语法示例&quot;">​</a></h3><ol><li><strong>基础查询</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 标题包含短语且文本包含特定词</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">title:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;The Right Way&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 等价写法</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">title:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;The Right Way&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> text:go</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li><strong>通配符查询</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ? 匹配单个字符</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:te?t</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># * 匹配多个字符</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:test*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:te*t</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li><strong>模糊查询</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拼写相近词匹配</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:roam~</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 距离查询（词间距离）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;jakarta apache&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">~10</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="4"><li><strong>范围查询</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 闭区间查询 []</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mod_date:[20020101</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 20030101]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开区间查询 {}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">title:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{Aida</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Carmen}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="5"><li><strong>权重查询</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 提升特定词的权重</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:jakarta^4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 提升短语的权重</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;jakarta apache&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">^4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;jakarta lucene&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="6"><li><strong>布尔操作符</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># AND 操作</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;jakarta apache&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> AND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jakarta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OR 操作（默认）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;jakarta apache&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jakarta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># NOT 操作</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;jakarta apache&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NOT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;jakarta lucene&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 必须包含（+）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:+jakarta</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 必须不包含（-）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">&quot;jakarta apache&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jakarta lucene&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="7"><li><strong>分组查询</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 组合条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text:(jakarta</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> OR</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) AND website</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 组内优先级</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">title:(+return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +&quot;pink panther&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="8"><li><strong>特殊字符转义</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 需要转义的特殊字符：+ - &amp;&amp; || ! ( ) { } [ ] ^ &quot; ~ * ? : \\</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">num:1\\+1\\:2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="4-" tabindex="-1">4. 最佳实践 <a class="header-anchor" href="#4-" aria-label="Permalink to &quot;4. 最佳实践&quot;">​</a></h2><h3 id="4-1-" tabindex="-1">4.1 查询优化 <a class="header-anchor" href="#4-1-" aria-label="Permalink to &quot;4.1 查询优化&quot;">​</a></h3><ol><li><p><strong>合理使用索引</strong></p><ul><li>避免使用通配符开头的查询</li><li>优先使用精确匹配</li><li>合理设置字段类型</li></ul></li><li><p><strong>查询性能优化</strong></p><ul><li>控制查询复杂度</li><li>使用缓存机制</li><li>设置合理的超时时间</li></ul></li></ol><h3 id="4-2-" tabindex="-1">4.2 监控建议 <a class="header-anchor" href="#4-2-" aria-label="Permalink to &quot;4.2 监控建议&quot;">​</a></h3><ol><li><p><strong>仪表盘设计</strong></p><ul><li>保持简洁清晰</li><li>突出重要指标</li><li>合理使用变量</li></ul></li><li><p><strong>告警配置</strong></p><ul><li>设置合理的阈值</li><li>避免告警风暴</li><li>定期维护规则</li></ul></li></ol><h2 id="5-" tabindex="-1">5. 参考资料 <a class="header-anchor" href="#5-" aria-label="Permalink to &quot;5. 参考资料&quot;">​</a></h2><ul><li><a href="https://grafana.com/docs/" target="_blank" rel="noreferrer">Grafana 官方文档</a></li><li><a href="https://lucene.apache.org/core/2_9_4/queryparsersyntax.html" target="_blank" rel="noreferrer">Lucene 查询语法指南</a></li><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html" target="_blank" rel="noreferrer">Elasticsearch 查询 DSL</a></li></ul>`,48)]))}const b=a(t,[["render",p]]);export{u as __pageData,b as default};
